import"./firebase-config-DxLbwtvt.js";/* empty css              */import{auth as i,createUserProfile as u,updateLastLogin as f}from"./firebase-client-Bklma2ql.js";import{createUserWithEmailAndPassword as p,signInWithEmailAndPassword as w,signOut as I,onAuthStateChanged as C}from"https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";import"https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";const m=document.getElementById("auth-form"),E=document.getElementById("email"),h=document.getElementById("password"),s=document.getElementById("submit-btn"),o=document.getElementById("toggle-btn"),d=document.getElementById("form-title"),n=document.getElementById("message"),c=document.getElementById("signout-btn");let t="login";const y=new URLSearchParams(window.location.search),r=y.get("mode");(r==="register"||r==="login")&&(t=r,d.textContent=t==="login"?"Login":"Register",s.textContent=t==="login"?"Sign In":"Sign Up",o.textContent=t==="login"?"Sign Up":"Sign In");o&&o.addEventListener("click",()=>{t=t==="login"?"register":"login",d.textContent=t==="login"?"Login":"Register",s.textContent=t==="login"?"Sign In":"Sign Up",o.textContent=t==="login"?"Sign Up":"Sign In",n.textContent=""});m&&m.addEventListener("submit",async a=>{a.preventDefault();const g=E.value.trim(),l=h.value.trim();n.textContent="",s.disabled=!0;try{if(t==="register"){const e=await p(i,g,l);await u(e.user,"contributor"),n.textContent="Registration successful. Redirecting...",setTimeout(()=>{window.location.href="map.html"},1500)}else{const e=await w(i,g,l);await f(e.user.uid),n.textContent="Login successful. Redirecting...",setTimeout(()=>{window.location.href="map.html"},1500)}}catch(e){console.error(e),n.textContent=(e==null?void 0:e.message)||"An error occurred"}finally{s.disabled=!1}});c&&c.addEventListener("click",async()=>{await I(i)});C(i,async a=>{});
