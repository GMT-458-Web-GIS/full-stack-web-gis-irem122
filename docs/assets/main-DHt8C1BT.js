/* empty css              */var aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ag={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),lC=Symbol.for("react.portal"),uC=Symbol.for("react.fragment"),cC=Symbol.for("react.strict_mode"),hC=Symbol.for("react.profiler"),dC=Symbol.for("react.provider"),fC=Symbol.for("react.context"),pC=Symbol.for("react.forward_ref"),_C=Symbol.for("react.suspense"),mC=Symbol.for("react.memo"),gC=Symbol.for("react.lazy"),Vp=Symbol.iterator;function vC(t){return t===null||typeof t!="object"?null:(t=Vp&&t[Vp]||t["@@iterator"],typeof t=="function"?t:null)}var lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,cg={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hg(){}hg.prototype=Hr.prototype;function Wh(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}var Hh=Wh.prototype=new hg;Hh.constructor=Wh;ug(Hh,Hr.prototype);Hh.isPureReactComponent=!0;var jp=Array.isArray,dg=Object.prototype.hasOwnProperty,Vh={current:null},fg={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var i,s={},a=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)dg.call(e,i)&&!fg.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:vo,type:t,key:a,ref:l,props:s,_owner:Vh.current}}function yC(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function wC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zp=/\/+/g;function Wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wC(""+t.key):e.toString(36)}function Ea(t,e,n,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case vo:case lC:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Wu(l,0):i,jp(s)?(n="",t!=null&&(n=t.replace(Zp,"$&/")+"/"),Ea(s,e,n,"",function(p){return p})):s!=null&&(jh(s)&&(s=yC(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Zp,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",jp(t))for(var h=0;h<t.length;h++){a=t[h];var d=i+Wu(a,h);l+=Ea(a,e,n,d,s)}else if(d=vC(t),typeof d=="function")for(t=d.call(t),h=0;!(a=t.next()).done;)a=a.value,d=i+Wu(a,h++),l+=Ea(a,e,n,d,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ea(t,e,n){if(t==null)return t;var i=[],s=0;return Ea(t,i,"","",function(a){return e.call(n,a,s++)}),i}function EC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},Ca={transition:null},CC={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:Vh};function _g(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ea,forEach:function(t,e,n){ea(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ea(t,function(){e++}),e},toArray:function(t){return ea(t,function(e){return e})||[]},only:function(t){if(!jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Hr;ie.Fragment=uC;ie.Profiler=hC;ie.PureComponent=Wh;ie.StrictMode=cC;ie.Suspense=_C;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CC;ie.act=_g;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ug({},t.props),s=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Vh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)dg.call(e,d)&&!fg.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:vo,type:t.type,key:s,ref:a,props:i,_owner:l}};ie.createContext=function(t){return t={$$typeof:fC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dC,_context:t},t.Consumer=t};ie.createElement=pg;ie.createFactory=function(t){var e=pg.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:pC,render:t}};ie.isValidElement=jh;ie.lazy=function(t){return{$$typeof:gC,_payload:{_status:-1,_result:t},_init:EC}};ie.memo=function(t,e){return{$$typeof:mC,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Ca.transition;Ca.transition={};try{t()}finally{Ca.transition=e}};ie.unstable_act=_g;ie.useCallback=function(t,e){return at.current.useCallback(t,e)};ie.useContext=function(t){return at.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return at.current.useDeferredValue(t)};ie.useEffect=function(t,e){return at.current.useEffect(t,e)};ie.useId=function(){return at.current.useId()};ie.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return at.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};ie.useRef=function(t){return at.current.useRef(t)};ie.useState=function(t){return at.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return at.current.useTransition()};ie.version="18.3.1";ag.exports=ie;var re=ag.exports;const W=og(re);var mg={exports:{}},Tt={},gg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,K){var M=x.length;x.push(K);e:for(;0<M;){var G=M-1>>>1,oe=x[G];if(0<s(oe,K))x[G]=K,x[M]=oe,M=G;else break e}}function n(x){return x.length===0?null:x[0]}function i(x){if(x.length===0)return null;var K=x[0],M=x.pop();if(M!==K){x[0]=M;e:for(var G=0,oe=x.length,be=oe>>>1;G<be;){var fe=2*(G+1)-1,le=x[fe],$=fe+1,ut=x[$];if(0>s(le,M))$<oe&&0>s(ut,le)?(x[G]=ut,x[$]=M,G=$):(x[G]=le,x[fe]=M,G=fe);else if($<oe&&0>s(ut,M))x[G]=ut,x[$]=M,G=$;else break e}}return K}function s(x,K){var M=x.sortIndex-K.sortIndex;return M!==0?M:x.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],g=1,m=null,v=3,T=!1,k=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(x){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=x)i(p),K.sortIndex=K.expirationTime,e(d,K);else break;K=n(p)}}function N(x){if(P=!1,C(x),!k)if(n(d)!==null)k=!0,Ge(b);else{var K=n(p);K!==null&&ln(N,K.startTime-x)}}function b(x,K){k=!1,P&&(P=!1,E(U),U=-1),T=!0;var M=v;try{for(C(K),m=n(d);m!==null&&(!(m.expirationTime>K)||x&&!me());){var G=m.callback;if(typeof G=="function"){m.callback=null,v=m.priorityLevel;var oe=G(m.expirationTime<=K);K=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(d)&&i(d),C(K)}else i(d);m=n(d)}if(m!==null)var be=!0;else{var fe=n(p);fe!==null&&ln(N,fe.startTime-K),be=!1}return be}finally{m=null,v=M,T=!1}}var F=!1,B=null,U=-1,he=5,Q=-1;function me(){return!(t.unstable_now()-Q<he)}function Be(){if(B!==null){var x=t.unstable_now();Q=x;var K=!0;try{K=B(!0,x)}finally{K?_i():(F=!1,B=null)}}else F=!1}var _i;if(typeof w=="function")_i=function(){w(Be)};else if(typeof MessageChannel<"u"){var Pt=new MessageChannel,ou=Pt.port2;Pt.port1.onmessage=Be,_i=function(){ou.postMessage(null)}}else _i=function(){V(Be,0)};function Ge(x){B=x,F||(F=!0,_i())}function ln(x,K){U=V(function(){x(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,Ge(b))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(x){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var M=v;v=K;try{return x()}finally{v=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,K){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var M=v;v=x;try{return K()}finally{v=M}},t.unstable_scheduleCallback=function(x,K,M){var G=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?G+M:G):M=G,x){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=M+oe,x={id:g++,callback:K,priorityLevel:x,startTime:M,expirationTime:oe,sortIndex:-1},M>G?(x.sortIndex=M,e(p,x),n(d)===null&&x===n(p)&&(P?(E(U),U=-1):P=!0,ln(N,M-G))):(x.sortIndex=oe,e(d,x),k||T||(k=!0,Ge(b))),x},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(x){var K=v;return function(){var M=v;v=K;try{return x.apply(this,arguments)}finally{v=M}}}})(vg);gg.exports=vg;var SC=gg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=re,St=SC;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yg=new Set,Hs={};function Zi(t,e){Rr(t,e),Rr(t+"Capture",e)}function Rr(t,e){for(Hs[t]=e,t=0;t<e.length;t++)yg.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=Object.prototype.hasOwnProperty,IC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gp={},Kp={};function kC(t){return Pc.call(Kp,t)?!0:Pc.call(Gp,t)?!1:IC.test(t)?Kp[t]=!0:(Gp[t]=!0,!1)}function PC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xC(t,e,n,i){if(e===null||typeof e>"u"||PC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,i,s,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function Gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,Gh);Qe[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,Gh);Qe[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,Gh);Qe[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kh(t,e,n,i){var s=Qe.hasOwnProperty(e)?Qe[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xC(e,n,s,i)&&(n=null),i||s===null?kC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Rn=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=Symbol.for("react.element"),sr=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),qh=Symbol.for("react.strict_mode"),xc=Symbol.for("react.profiler"),wg=Symbol.for("react.provider"),Eg=Symbol.for("react.context"),$h=Symbol.for("react.forward_ref"),Lc=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Cg=Symbol.for("react.offscreen"),qp=Symbol.iterator;function hs(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Hu;function Ss(t){if(Hu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hu=e&&e[1]||""}return`
`+Hu+t}var Vu=!1;function ju(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=i.stack.split(`
`),l=s.length-1,h=a.length-1;1<=l&&0<=h&&s[l]!==a[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==a[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==a[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ss(t):""}function LC(t){switch(t.tag){case 5:return Ss(t.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 2:case 15:return t=ju(t.type,!1),t;case 11:return t=ju(t.type.render,!1),t;case 1:return t=ju(t.type,!0),t;default:return""}}function Nc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case or:return"Fragment";case sr:return"Portal";case xc:return"Profiler";case qh:return"StrictMode";case Lc:return"Suspense";case Rc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Eg:return(t.displayName||"Context")+".Consumer";case wg:return(t._context.displayName||"Context")+".Provider";case $h:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yh:return e=t.displayName||null,e!==null?e:Nc(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return Nc(t(e))}catch{}}return null}function RC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nc(e);case 8:return e===qh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NC(t){var e=Sg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function na(t){t._valueTracker||(t._valueTracker=NC(t))}function Tg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Sg(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oc(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $p(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ig(t,e){e=e.checked,e!=null&&Kh(t,"checked",e,!1)}function Ac(t,e){Ig(t,e);var n=si(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mc(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mc(t,e,n){(e!=="number"||Fa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ts=Array.isArray;function yr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Ts(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function kg(t,e){var n=si(e.value),i=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Xp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ia,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OC=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(t){OC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ps[e]=Ps[t]})});function Lg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ps.hasOwnProperty(t)&&Ps[t]?(""+e).trim():e+"px"}function Rg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Lg(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var AC=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zc(t,e){if(e){if(AC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function Qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uc=null,wr=null,Er=null;function Jp(t){if(t=Eo(t)){if(typeof Uc!="function")throw Error(O(280));var e=t.stateNode;e&&(e=bl(e),Uc(t.stateNode,t.type,e))}}function Ng(t){wr?Er?Er.push(t):Er=[t]:wr=t}function Og(){if(wr){var t=wr,e=Er;if(Er=wr=null,Jp(t),e)for(t=0;t<e.length;t++)Jp(e[t])}}function Ag(t,e){return t(e)}function Mg(){}var Zu=!1;function bg(t,e,n){if(Zu)return t(e,n);Zu=!0;try{return Ag(t,e,n)}finally{Zu=!1,(wr!==null||Er!==null)&&(Mg(),Og())}}function js(t,e){var n=t.stateNode;if(n===null)return null;var i=bl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Wc=!1;if(Cn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Wc=!1}function MC(t,e,n,i,s,a,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(g){this.onError(g)}}var xs=!1,Ba=null,Ua=!1,Hc=null,bC={onError:function(t){xs=!0,Ba=t}};function DC(t,e,n,i,s,a,l,h,d){xs=!1,Ba=null,MC.apply(bC,arguments)}function zC(t,e,n,i,s,a,l,h,d){if(DC.apply(this,arguments),xs){if(xs){var p=Ba;xs=!1,Ba=null}else throw Error(O(198));Ua||(Ua=!0,Hc=p)}}function Gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e_(t){if(Gi(t)!==t)throw Error(O(188))}function FC(t){var e=t.alternate;if(!e){if(e=Gi(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return e_(s),t;if(a===i)return e_(s),e;a=a.sibling}throw Error(O(188))}if(n.return!==i.return)n=s,i=a;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=a;break}if(h===i){l=!0,i=s,n=a;break}h=h.sibling}if(!l){for(h=a.child;h;){if(h===n){l=!0,n=a,i=s;break}if(h===i){l=!0,i=a,n=s;break}h=h.sibling}if(!l)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function zg(t){return t=FC(t),t!==null?Fg(t):null}function Fg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fg(t);if(e!==null)return e;t=t.sibling}return null}var Bg=St.unstable_scheduleCallback,t_=St.unstable_cancelCallback,BC=St.unstable_shouldYield,UC=St.unstable_requestPaint,Ne=St.unstable_now,WC=St.unstable_getCurrentPriorityLevel,Xh=St.unstable_ImmediatePriority,Ug=St.unstable_UserBlockingPriority,Wa=St.unstable_NormalPriority,HC=St.unstable_LowPriority,Wg=St.unstable_IdlePriority,Nl=null,rn=null;function VC(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Nl,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:GC,jC=Math.log,ZC=Math.LN2;function GC(t){return t>>>=0,t===0?32:31-(jC(t)/ZC|0)|0}var ra=64,sa=4194304;function Is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ha(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Is(h):(a&=l,a!==0&&(i=Is(a)))}else l=n&~s,l!==0?i=Is(l):a!==0&&(i=Is(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Gt(e),s=1<<n,i|=t[n],e&=~s;return i}function KC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Gt(a),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=KC(h,e)):d<=e&&(t.expiredLanes|=h),a&=~h}}function Vc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hg(){var t=ra;return ra<<=1,!(ra&4194240)&&(ra=64),t}function Gu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function $C(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gt(n),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~a}}function Jh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Gt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var de=0;function Vg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jg,ed,Zg,Gg,Kg,jc=!1,oa=[],Kn=null,qn=null,$n=null,Zs=new Map,Gs=new Map,Bn=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n_(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Zs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(e.pointerId)}}function fs(t,e,n,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Eo(e),e!==null&&ed(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QC(t,e,n,i,s){switch(e){case"focusin":return Kn=fs(Kn,t,e,n,i,s),!0;case"dragenter":return qn=fs(qn,t,e,n,i,s),!0;case"mouseover":return $n=fs($n,t,e,n,i,s),!0;case"pointerover":var a=s.pointerId;return Zs.set(a,fs(Zs.get(a)||null,t,e,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Gs.set(a,fs(Gs.get(a)||null,t,e,n,i,s)),!0}return!1}function qg(t){var e=Ii(t.target);if(e!==null){var n=Gi(e);if(n!==null){if(e=n.tag,e===13){if(e=Dg(n),e!==null){t.blockedOn=e,Kg(t.priority,function(){Zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Bc=i,n.target.dispatchEvent(i),Bc=null}else return e=Eo(n),e!==null&&ed(e),t.blockedOn=n,!1;e.shift()}return!0}function i_(t,e,n){Sa(t)&&n.delete(e)}function XC(){jc=!1,Kn!==null&&Sa(Kn)&&(Kn=null),qn!==null&&Sa(qn)&&(qn=null),$n!==null&&Sa($n)&&($n=null),Zs.forEach(i_),Gs.forEach(i_)}function ps(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,XC)))}function Ks(t){function e(s){return ps(s,t)}if(0<oa.length){ps(oa[0],t);for(var n=1;n<oa.length;n++){var i=oa[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Kn!==null&&ps(Kn,t),qn!==null&&ps(qn,t),$n!==null&&ps($n,t),Zs.forEach(e),Gs.forEach(e),n=0;n<Bn.length;n++)i=Bn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)qg(n),n.blockedOn===null&&Bn.shift()}var Cr=Rn.ReactCurrentBatchConfig,Va=!0;function JC(t,e,n,i){var s=de,a=Cr.transition;Cr.transition=null;try{de=1,td(t,e,n,i)}finally{de=s,Cr.transition=a}}function eS(t,e,n,i){var s=de,a=Cr.transition;Cr.transition=null;try{de=4,td(t,e,n,i)}finally{de=s,Cr.transition=a}}function td(t,e,n,i){if(Va){var s=Zc(t,e,n,i);if(s===null)nc(t,e,i,ja,n),n_(t,i);else if(QC(s,t,e,n,i))i.stopPropagation();else if(n_(t,i),e&4&&-1<YC.indexOf(t)){for(;s!==null;){var a=Eo(s);if(a!==null&&jg(a),a=Zc(t,e,n,i),a===null&&nc(t,e,i,ja,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else nc(t,e,i,null,n)}}var ja=null;function Zc(t,e,n,i){if(ja=null,t=Qh(i),t=Ii(t),t!==null)if(e=Gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ja=t,null}function $g(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WC()){case Xh:return 1;case Ug:return 4;case Wa:case HC:return 16;case Wg:return 536870912;default:return 16}default:return 16}}var Zn=null,nd=null,Ta=null;function Yg(){if(Ta)return Ta;var t,e=nd,n=e.length,i,s="value"in Zn?Zn.value:Zn.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[a-i];i++);return Ta=s.slice(t,1<i?1-i:void 0)}function Ia(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function aa(){return!0}function r_(){return!1}function It(t){function e(n,i,s,a,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?aa:r_,this.isPropagationStopped=r_,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),e}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=It(Vr),wo=Pe({},Vr,{view:0,detail:0}),tS=It(wo),Ku,qu,_s,Ol=Pe({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(Ku=t.screenX-_s.screenX,qu=t.screenY-_s.screenY):qu=Ku=0,_s=t),Ku)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),s_=It(Ol),nS=Pe({},Ol,{dataTransfer:0}),iS=It(nS),rS=Pe({},wo,{relatedTarget:0}),$u=It(rS),sS=Pe({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),oS=It(sS),aS=Pe({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lS=It(aS),uS=Pe({},Vr,{data:0}),o_=It(uS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dS[t])?!!e[t]:!1}function rd(){return fS}var pS=Pe({},wo,{key:function(t){if(t.key){var e=cS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rd,charCode:function(t){return t.type==="keypress"?Ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_S=It(pS),mS=Pe({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a_=It(mS),gS=Pe({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rd}),vS=It(gS),yS=Pe({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wS=It(yS),ES=Pe({},Ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CS=It(ES),SS=[9,13,27,32],sd=Cn&&"CompositionEvent"in window,Ls=null;Cn&&"documentMode"in document&&(Ls=document.documentMode);var TS=Cn&&"TextEvent"in window&&!Ls,Qg=Cn&&(!sd||Ls&&8<Ls&&11>=Ls),l_=" ",u_=!1;function Xg(t,e){switch(t){case"keyup":return SS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ar=!1;function IS(t,e){switch(t){case"compositionend":return Jg(e);case"keypress":return e.which!==32?null:(u_=!0,l_);case"textInput":return t=e.data,t===l_&&u_?null:t;default:return null}}function kS(t,e){if(ar)return t==="compositionend"||!sd&&Xg(t,e)?(t=Yg(),Ta=nd=Zn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qg&&e.locale!=="ko"?null:e.data;default:return null}}var PS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PS[t.type]:e==="textarea"}function ev(t,e,n,i){Ng(i),e=Za(e,"onChange"),0<e.length&&(n=new id("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Rs=null,qs=null;function xS(t){hv(t,0)}function Al(t){var e=cr(t);if(Tg(e))return t}function LS(t,e){if(t==="change")return e}var tv=!1;if(Cn){var Yu;if(Cn){var Qu="oninput"in document;if(!Qu){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),Qu=typeof h_.oninput=="function"}Yu=Qu}else Yu=!1;tv=Yu&&(!document.documentMode||9<document.documentMode)}function d_(){Rs&&(Rs.detachEvent("onpropertychange",nv),qs=Rs=null)}function nv(t){if(t.propertyName==="value"&&Al(qs)){var e=[];ev(e,qs,t,Qh(t)),bg(xS,e)}}function RS(t,e,n){t==="focusin"?(d_(),Rs=e,qs=n,Rs.attachEvent("onpropertychange",nv)):t==="focusout"&&d_()}function NS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(qs)}function OS(t,e){if(t==="click")return Al(e)}function AS(t,e){if(t==="input"||t==="change")return Al(e)}function MS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:MS;function $s(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Pc.call(e,s)||!$t(t[s],e[s]))return!1}return!0}function f_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p_(t,e){var n=f_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f_(n)}}function iv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rv(){for(var t=window,e=Fa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fa(t.document)}return e}function od(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bS(t){var e=rv(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iv(n.ownerDocument.documentElement,n)){if(i!==null&&od(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=p_(n,a);var l=p_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DS=Cn&&"documentMode"in document&&11>=document.documentMode,lr=null,Gc=null,Ns=null,Kc=!1;function __(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||lr==null||lr!==Fa(i)||(i=lr,"selectionStart"in i&&od(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ns&&$s(Ns,i)||(Ns=i,i=Za(Gc,"onSelect"),0<i.length&&(e=new id("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=lr)))}function la(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ur={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionend:la("Transition","TransitionEnd")},Xu={},sv={};Cn&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function Ml(t){if(Xu[t])return Xu[t];if(!ur[t])return t;var e=ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sv)return Xu[t]=e[n];return t}var ov=Ml("animationend"),av=Ml("animationiteration"),lv=Ml("animationstart"),uv=Ml("transitionend"),cv=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(t,e){cv.set(t,e),Zi(e,[t])}for(var Ju=0;Ju<m_.length;Ju++){var ec=m_[Ju],zS=ec.toLowerCase(),FS=ec[0].toUpperCase()+ec.slice(1);ci(zS,"on"+FS)}ci(ov,"onAnimationEnd");ci(av,"onAnimationIteration");ci(lv,"onAnimationStart");ci("dblclick","onDoubleClick");ci("focusin","onFocus");ci("focusout","onBlur");ci(uv,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function g_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,zC(i,e,void 0,t),t.currentTarget=null}function hv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==a&&s.isPropagationStopped())break e;g_(s,h,p),a=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==a&&s.isPropagationStopped())break e;g_(s,h,p),a=d}}}if(Ua)throw t=Hc,Ua=!1,Hc=null,t}function we(t,e){var n=e[Xc];n===void 0&&(n=e[Xc]=new Set);var i=t+"__bubble";n.has(i)||(dv(e,t,2,!1),n.add(i))}function tc(t,e,n){var i=0;e&&(i|=4),dv(n,t,i,e)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Ys(t){if(!t[ua]){t[ua]=!0,yg.forEach(function(n){n!=="selectionchange"&&(BS.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ua]||(e[ua]=!0,tc("selectionchange",!1,e))}}function dv(t,e,n,i){switch($g(e)){case 1:var s=JC;break;case 4:s=eS;break;default:s=td}n=s.bind(null,e,n,t),s=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nc(t,e,n,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Ii(h),l===null)return;if(d=l.tag,d===5||d===6){i=a=l;continue e}h=h.parentNode}}i=i.return}bg(function(){var p=a,g=Qh(n),m=[];e:{var v=cv.get(t);if(v!==void 0){var T=id,k=t;switch(t){case"keypress":if(Ia(n)===0)break e;case"keydown":case"keyup":T=_S;break;case"focusin":k="focus",T=$u;break;case"focusout":k="blur",T=$u;break;case"beforeblur":case"afterblur":T=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=s_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=iS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=vS;break;case ov:case av:case lv:T=oS;break;case uv:T=wS;break;case"scroll":T=tS;break;case"wheel":T=CS;break;case"copy":case"cut":case"paste":T=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=a_}var P=(e&4)!==0,V=!P&&t==="scroll",E=P?v!==null?v+"Capture":null:v;P=[];for(var w=p,C;w!==null;){C=w;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,E!==null&&(N=js(w,E),N!=null&&P.push(Qs(w,N,C)))),V)break;w=w.return}0<P.length&&(v=new T(v,k,null,n,g),m.push({event:v,listeners:P}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==Bc&&(k=n.relatedTarget||n.fromElement)&&(Ii(k)||k[Sn]))break e;if((T||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=p,k=k?Ii(k):null,k!==null&&(V=Gi(k),k!==V||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=p),T!==k)){if(P=s_,N="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=a_,N="onPointerLeave",E="onPointerEnter",w="pointer"),V=T==null?v:cr(T),C=k==null?v:cr(k),v=new P(N,w+"leave",T,n,g),v.target=V,v.relatedTarget=C,N=null,Ii(g)===p&&(P=new P(E,w+"enter",k,n,g),P.target=C,P.relatedTarget=V,N=P),V=N,T&&k)t:{for(P=T,E=k,w=0,C=P;C;C=ir(C))w++;for(C=0,N=E;N;N=ir(N))C++;for(;0<w-C;)P=ir(P),w--;for(;0<C-w;)E=ir(E),C--;for(;w--;){if(P===E||E!==null&&P===E.alternate)break t;P=ir(P),E=ir(E)}P=null}else P=null;T!==null&&v_(m,v,T,P,!1),k!==null&&V!==null&&v_(m,V,k,P,!0)}}e:{if(v=p?cr(p):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var b=LS;else if(c_(v))if(tv)b=AS;else{b=NS;var F=RS}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(b=OS);if(b&&(b=b(t,p))){ev(m,b,n,g);break e}F&&F(t,v,p),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&Mc(v,"number",v.value)}switch(F=p?cr(p):window,t){case"focusin":(c_(F)||F.contentEditable==="true")&&(lr=F,Gc=p,Ns=null);break;case"focusout":Ns=Gc=lr=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,__(m,n,g);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":__(m,n,g)}var B;if(sd)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ar?Xg(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(Qg&&n.locale!=="ko"&&(ar||U!=="onCompositionStart"?U==="onCompositionEnd"&&ar&&(B=Yg()):(Zn=g,nd="value"in Zn?Zn.value:Zn.textContent,ar=!0)),F=Za(p,U),0<F.length&&(U=new o_(U,t,null,n,g),m.push({event:U,listeners:F}),B?U.data=B:(B=Jg(n),B!==null&&(U.data=B)))),(B=TS?IS(t,n):kS(t,n))&&(p=Za(p,"onBeforeInput"),0<p.length&&(g=new o_("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:p}),g.data=B))}hv(m,e)})}function Qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Za(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=js(t,n),a!=null&&i.unshift(Qs(t,a,s)),a=js(t,e),a!=null&&i.push(Qs(t,a,s))),t=t.return}return i}function ir(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v_(t,e,n,i,s){for(var a=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=js(n,a),d!=null&&l.unshift(Qs(n,d,h))):s||(d=js(n,a),d!=null&&l.push(Qs(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var US=/\r\n?/g,WS=/\u0000|\uFFFD/g;function y_(t){return(typeof t=="string"?t:""+t).replace(US,`
`).replace(WS,"")}function ca(t,e,n){if(e=y_(e),y_(t)!==e&&n)throw Error(O(425))}function Ga(){}var qc=null,$c=null;function Yc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(jS)}:Qc;function jS(t){setTimeout(function(){throw t})}function ic(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ks(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ks(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jr=Math.random().toString(36).slice(2),nn="__reactFiber$"+jr,Xs="__reactProps$"+jr,Sn="__reactContainer$"+jr,Xc="__reactEvents$"+jr,ZS="__reactListeners$"+jr,GS="__reactHandles$"+jr;function Ii(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E_(t);t!==null;){if(n=t[nn])return n;t=E_(t)}return e}t=n,n=t.parentNode}return null}function Eo(t){return t=t[nn]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function bl(t){return t[Xs]||null}var Jc=[],hr=-1;function hi(t){return{current:t}}function Ce(t){0>hr||(t.current=Jc[hr],Jc[hr]=null,hr--)}function ye(t,e){hr++,Jc[hr]=t.current,t.current=e}var oi={},nt=hi(oi),_t=hi(!1),Ai=oi;function Nr(t,e){var n=t.type.contextTypes;if(!n)return oi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mt(t){return t=t.childContextTypes,t!=null}function Ka(){Ce(_t),Ce(nt)}function C_(t,e,n){if(nt.current!==oi)throw Error(O(168));ye(nt,e),ye(_t,n)}function fv(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(O(108,RC(t)||"Unknown",s));return Pe({},n,i)}function qa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,Ai=nt.current,ye(nt,t),ye(_t,_t.current),!0}function S_(t,e,n){var i=t.stateNode;if(!i)throw Error(O(169));n?(t=fv(t,e,Ai),i.__reactInternalMemoizedMergedChildContext=t,Ce(_t),Ce(nt),ye(nt,t)):Ce(_t),ye(_t,n)}var pn=null,Dl=!1,rc=!1;function pv(t){pn===null?pn=[t]:pn.push(t)}function KS(t){Dl=!0,pv(t)}function di(){if(!rc&&pn!==null){rc=!0;var t=0,e=de;try{var n=pn;for(de=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pn=null,Dl=!1}catch(s){throw pn!==null&&(pn=pn.slice(t+1)),Bg(Xh,di),s}finally{de=e,rc=!1}}return null}var dr=[],fr=0,$a=null,Ya=0,Nt=[],Ot=0,Mi=null,_n=1,mn="";function Ei(t,e){dr[fr++]=Ya,dr[fr++]=$a,$a=t,Ya=e}function _v(t,e,n){Nt[Ot++]=_n,Nt[Ot++]=mn,Nt[Ot++]=Mi,Mi=t;var i=_n;t=mn;var s=32-Gt(i)-1;i&=~(1<<s),n+=1;var a=32-Gt(e)+s;if(30<a){var l=s-s%5;a=(i&(1<<l)-1).toString(32),i>>=l,s-=l,_n=1<<32-Gt(e)+s|n<<s|i,mn=a+t}else _n=1<<a|n<<s|i,mn=t}function ad(t){t.return!==null&&(Ei(t,1),_v(t,1,0))}function ld(t){for(;t===$a;)$a=dr[--fr],dr[fr]=null,Ya=dr[--fr],dr[fr]=null;for(;t===Mi;)Mi=Nt[--Ot],Nt[Ot]=null,mn=Nt[--Ot],Nt[Ot]=null,_n=Nt[--Ot],Nt[Ot]=null}var Ct=null,Et=null,Se=!1,Ht=null;function mv(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,Et=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:_n,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,Et=null,!0):!1;default:return!1}}function eh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function th(t){if(Se){var e=Et;if(e){var n=e;if(!T_(t,e)){if(eh(t))throw Error(O(418));e=Yn(n.nextSibling);var i=Ct;e&&T_(t,e)?mv(i,n):(t.flags=t.flags&-4097|2,Se=!1,Ct=t)}}else{if(eh(t))throw Error(O(418));t.flags=t.flags&-4097|2,Se=!1,Ct=t}}}function I_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function ha(t){if(t!==Ct)return!1;if(!Se)return I_(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yc(t.type,t.memoizedProps)),e&&(e=Et)){if(eh(t))throw gv(),Error(O(418));for(;e;)mv(t,e),e=Yn(e.nextSibling)}if(I_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Ct?Yn(t.stateNode.nextSibling):null;return!0}function gv(){for(var t=Et;t;)t=Yn(t.nextSibling)}function Or(){Et=Ct=null,Se=!1}function ud(t){Ht===null?Ht=[t]:Ht.push(t)}var qS=Rn.ReactCurrentBatchConfig;function ms(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var i=n.stateNode}if(!i)throw Error(O(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var h=s.refs;l===null?delete h[a]:h[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function da(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function k_(t){var e=t._init;return e(t._payload)}function vv(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function i(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=ei(E,w),E.index=0,E.sibling=null,E}function a(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function l(E){return t&&E.alternate===null&&(E.flags|=2),E}function h(E,w,C,N){return w===null||w.tag!==6?(w=hc(C,E.mode,N),w.return=E,w):(w=s(w,C),w.return=E,w)}function d(E,w,C,N){var b=C.type;return b===or?g(E,w,C.props.children,N,C.key):w!==null&&(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===zn&&k_(b)===w.type)?(N=s(w,C.props),N.ref=ms(E,w,C),N.return=E,N):(N=Oa(C.type,C.key,C.props,null,E.mode,N),N.ref=ms(E,w,C),N.return=E,N)}function p(E,w,C,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=dc(C,E.mode,N),w.return=E,w):(w=s(w,C.children||[]),w.return=E,w)}function g(E,w,C,N,b){return w===null||w.tag!==7?(w=Ni(C,E.mode,N,b),w.return=E,w):(w=s(w,C),w.return=E,w)}function m(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hc(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ta:return C=Oa(w.type,w.key,w.props,null,E.mode,C),C.ref=ms(E,null,w),C.return=E,C;case sr:return w=dc(w,E.mode,C),w.return=E,w;case zn:var N=w._init;return m(E,N(w._payload),C)}if(Ts(w)||hs(w))return w=Ni(w,E.mode,C,null),w.return=E,w;da(E,w)}return null}function v(E,w,C,N){var b=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return b!==null?null:h(E,w,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ta:return C.key===b?d(E,w,C,N):null;case sr:return C.key===b?p(E,w,C,N):null;case zn:return b=C._init,v(E,w,b(C._payload),N)}if(Ts(C)||hs(C))return b!==null?null:g(E,w,C,N,null);da(E,C)}return null}function T(E,w,C,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(C)||null,h(w,E,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ta:return E=E.get(N.key===null?C:N.key)||null,d(w,E,N,b);case sr:return E=E.get(N.key===null?C:N.key)||null,p(w,E,N,b);case zn:var F=N._init;return T(E,w,C,F(N._payload),b)}if(Ts(N)||hs(N))return E=E.get(C)||null,g(w,E,N,b,null);da(w,N)}return null}function k(E,w,C,N){for(var b=null,F=null,B=w,U=w=0,he=null;B!==null&&U<C.length;U++){B.index>U?(he=B,B=null):he=B.sibling;var Q=v(E,B,C[U],N);if(Q===null){B===null&&(B=he);break}t&&B&&Q.alternate===null&&e(E,B),w=a(Q,w,U),F===null?b=Q:F.sibling=Q,F=Q,B=he}if(U===C.length)return n(E,B),Se&&Ei(E,U),b;if(B===null){for(;U<C.length;U++)B=m(E,C[U],N),B!==null&&(w=a(B,w,U),F===null?b=B:F.sibling=B,F=B);return Se&&Ei(E,U),b}for(B=i(E,B);U<C.length;U++)he=T(B,E,U,C[U],N),he!==null&&(t&&he.alternate!==null&&B.delete(he.key===null?U:he.key),w=a(he,w,U),F===null?b=he:F.sibling=he,F=he);return t&&B.forEach(function(me){return e(E,me)}),Se&&Ei(E,U),b}function P(E,w,C,N){var b=hs(C);if(typeof b!="function")throw Error(O(150));if(C=b.call(C),C==null)throw Error(O(151));for(var F=b=null,B=w,U=w=0,he=null,Q=C.next();B!==null&&!Q.done;U++,Q=C.next()){B.index>U?(he=B,B=null):he=B.sibling;var me=v(E,B,Q.value,N);if(me===null){B===null&&(B=he);break}t&&B&&me.alternate===null&&e(E,B),w=a(me,w,U),F===null?b=me:F.sibling=me,F=me,B=he}if(Q.done)return n(E,B),Se&&Ei(E,U),b;if(B===null){for(;!Q.done;U++,Q=C.next())Q=m(E,Q.value,N),Q!==null&&(w=a(Q,w,U),F===null?b=Q:F.sibling=Q,F=Q);return Se&&Ei(E,U),b}for(B=i(E,B);!Q.done;U++,Q=C.next())Q=T(B,E,U,Q.value,N),Q!==null&&(t&&Q.alternate!==null&&B.delete(Q.key===null?U:Q.key),w=a(Q,w,U),F===null?b=Q:F.sibling=Q,F=Q);return t&&B.forEach(function(Be){return e(E,Be)}),Se&&Ei(E,U),b}function V(E,w,C,N){if(typeof C=="object"&&C!==null&&C.type===or&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ta:e:{for(var b=C.key,F=w;F!==null;){if(F.key===b){if(b=C.type,b===or){if(F.tag===7){n(E,F.sibling),w=s(F,C.props.children),w.return=E,E=w;break e}}else if(F.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===zn&&k_(b)===F.type){n(E,F.sibling),w=s(F,C.props),w.ref=ms(E,F,C),w.return=E,E=w;break e}n(E,F);break}else e(E,F);F=F.sibling}C.type===or?(w=Ni(C.props.children,E.mode,N,C.key),w.return=E,E=w):(N=Oa(C.type,C.key,C.props,null,E.mode,N),N.ref=ms(E,w,C),N.return=E,E=N)}return l(E);case sr:e:{for(F=C.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(E,w.sibling),w=s(w,C.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=dc(C,E.mode,N),w.return=E,E=w}return l(E);case zn:return F=C._init,V(E,w,F(C._payload),N)}if(Ts(C))return k(E,w,C,N);if(hs(C))return P(E,w,C,N);da(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,C),w.return=E,E=w):(n(E,w),w=hc(C,E.mode,N),w.return=E,E=w),l(E)):n(E,w)}return V}var Ar=vv(!0),yv=vv(!1),Qa=hi(null),Xa=null,pr=null,cd=null;function hd(){cd=pr=Xa=null}function dd(t){var e=Qa.current;Ce(Qa),t._currentValue=e}function nh(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Sr(t,e){Xa=t,cd=pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(cd!==t)if(t={context:t,memoizedValue:e,next:null},pr===null){if(Xa===null)throw Error(O(308));pr=t,Xa.dependencies={lanes:0,firstContext:t}}else pr=pr.next=t;return e}var ki=null;function fd(t){ki===null?ki=[t]:ki.push(t)}function wv(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,fd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,i)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ev(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ae&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Tn(t,n)}return s=i.interleaved,s===null?(e.next=e,fd(i)):(e.next=s.next,s.next=e),i.interleaved=e,Tn(t,n)}function ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jh(t,n)}}function P_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,i){var s=t.updateQueue;Fn=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?a=p:l.next=p,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==l&&(h===null?g.firstBaseUpdate=p:h.next=p,g.lastBaseUpdate=d))}if(a!==null){var m=s.baseState;l=0,g=p=d=null,h=a;do{var v=h.lane,T=h.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:T,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var k=t,P=h;switch(v=e,T=n,P.tag){case 1:if(k=P.payload,typeof k=="function"){m=k.call(T,m,v);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=P.payload,v=typeof k=="function"?k.call(T,m,v):k,v==null)break e;m=Pe({},m,v);break e;case 2:Fn=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[h]:v.push(h))}else T={eventTime:T,lane:v,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(p=g=T,d=m):g=g.next=T,l|=v;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;v=h,h=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(g===null&&(d=m),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Di|=l,t.lanes=l,t.memoizedState=m}}function x_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(O(191,s));s.call(i)}}}var Co={},sn=hi(Co),Js=hi(Co),eo=hi(Co);function Pi(t){if(t===Co)throw Error(O(174));return t}function _d(t,e){switch(ye(eo,e),ye(Js,t),ye(sn,Co),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dc(e,t)}Ce(sn),ye(sn,e)}function Mr(){Ce(sn),Ce(Js),Ce(eo)}function Cv(t){Pi(eo.current);var e=Pi(sn.current),n=Dc(e,t.type);e!==n&&(ye(Js,t),ye(sn,n))}function md(t){Js.current===t&&(Ce(sn),Ce(Js))}var Ie=hi(0);function el(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sc=[];function gd(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var Pa=Rn.ReactCurrentDispatcher,oc=Rn.ReactCurrentBatchConfig,bi=0,ke=null,De=null,He=null,tl=!1,Os=!1,to=0,$S=0;function Xe(){throw Error(O(321))}function vd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function yd(t,e,n,i,s,a){if(bi=a,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pa.current=t===null||t.memoizedState===null?JS:eT,t=n(i,s),Os){a=0;do{if(Os=!1,to=0,25<=a)throw Error(O(301));a+=1,He=De=null,e.updateQueue=null,Pa.current=tT,t=n(i,s)}while(Os)}if(Pa.current=nl,e=De!==null&&De.next!==null,bi=0,He=De=ke=null,tl=!1,e)throw Error(O(300));return t}function wd(){var t=to!==0;return to=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?ke.memoizedState=He=t:He=He.next=t,He}function Dt(){if(De===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=He===null?ke.memoizedState:He.next;if(e!==null)He=e,De=t;else{if(t===null)throw Error(O(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},He===null?ke.memoizedState=He=t:He=He.next=t}return He}function no(t,e){return typeof e=="function"?e(t):e}function ac(t){var e=Dt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=De,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var h=l=null,d=null,p=a;do{var g=p.lane;if((bi&g)===g)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var m={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=m,l=i):d=d.next=m,ke.lanes|=g,Di|=g}p=p.next}while(p!==null&&p!==a);d===null?l=i:d.next=h,$t(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do a=s.lane,ke.lanes|=a,Di|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lc(t){var e=Dt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=t(a,l.action),l=l.next;while(l!==s);$t(a,e.memoizedState)||(dt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function Sv(){}function Tv(t,e){var n=ke,i=Dt(),s=e(),a=!$t(i.memoizedState,s);if(a&&(i.memoizedState=s,dt=!0),i=i.queue,Ed(Pv.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,io(9,kv.bind(null,n,i,s,e),void 0,null),Ze===null)throw Error(O(349));bi&30||Iv(n,e,s)}return s}function Iv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kv(t,e,n,i){e.value=n,e.getSnapshot=i,xv(e)&&Lv(t)}function Pv(t,e,n){return n(function(){xv(e)&&Lv(t)})}function xv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Lv(t){var e=Tn(t,1);e!==null&&Kt(e,t,1,-1)}function L_(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=XS.bind(null,ke,t),[e.memoizedState,t]}function io(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Rv(){return Dt().memoizedState}function xa(t,e,n,i){var s=tn();ke.flags|=t,s.memoizedState=io(1|e,n,void 0,i===void 0?null:i)}function zl(t,e,n,i){var s=Dt();i=i===void 0?null:i;var a=void 0;if(De!==null){var l=De.memoizedState;if(a=l.destroy,i!==null&&vd(i,l.deps)){s.memoizedState=io(e,n,a,i);return}}ke.flags|=t,s.memoizedState=io(1|e,n,a,i)}function R_(t,e){return xa(8390656,8,t,e)}function Ed(t,e){return zl(2048,8,t,e)}function Nv(t,e){return zl(4,2,t,e)}function Ov(t,e){return zl(4,4,t,e)}function Av(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mv(t,e,n){return n=n!=null?n.concat([t]):null,zl(4,4,Av.bind(null,e,t),n)}function Cd(){}function bv(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&vd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Dv(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&vd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function zv(t,e,n){return bi&21?($t(n,e)||(n=Hg(),ke.lanes|=n,Di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function YS(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var i=oc.transition;oc.transition={};try{t(!1),e()}finally{de=n,oc.transition=i}}function Fv(){return Dt().memoizedState}function QS(t,e,n){var i=Jn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Bv(t))Uv(e,n);else if(n=wv(t,e,n,i),n!==null){var s=ot();Kt(n,t,i,s),Wv(n,e,i)}}function XS(t,e,n){var i=Jn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bv(t))Uv(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,h=a(l,n);if(s.hasEagerState=!0,s.eagerState=h,$t(h,l)){var d=e.interleaved;d===null?(s.next=s,fd(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=wv(t,e,s,i),n!==null&&(s=ot(),Kt(n,t,i,s),Wv(n,e,i))}}function Bv(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function Uv(t,e){Os=tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wv(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jh(t,n)}}var nl={readContext:bt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},JS={readContext:bt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:R_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xa(4194308,4,Av.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4194308,4,t,e)},useInsertionEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=tn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=QS.bind(null,ke,t),[i.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:L_,useDebugValue:Cd,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=L_(!1),e=t[0];return t=YS.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ke,s=tn();if(Se){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Ze===null)throw Error(O(349));bi&30||Iv(i,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,R_(Pv.bind(null,i,a,t),[t]),i.flags|=2048,io(9,kv.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=tn(),e=Ze.identifierPrefix;if(Se){var n=mn,i=_n;n=(i&~(1<<32-Gt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$S++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eT={readContext:bt,useCallback:bv,useContext:bt,useEffect:Ed,useImperativeHandle:Mv,useInsertionEffect:Nv,useLayoutEffect:Ov,useMemo:Dv,useReducer:ac,useRef:Rv,useState:function(){return ac(no)},useDebugValue:Cd,useDeferredValue:function(t){var e=Dt();return zv(e,De.memoizedState,t)},useTransition:function(){var t=ac(no)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Sv,useSyncExternalStore:Tv,useId:Fv,unstable_isNewReconciler:!1},tT={readContext:bt,useCallback:bv,useContext:bt,useEffect:Ed,useImperativeHandle:Mv,useInsertionEffect:Nv,useLayoutEffect:Ov,useMemo:Dv,useReducer:lc,useRef:Rv,useState:function(){return lc(no)},useDebugValue:Cd,useDeferredValue:function(t){var e=Dt();return De===null?e.memoizedState=t:zv(e,De.memoizedState,t)},useTransition:function(){var t=lc(no)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Sv,useSyncExternalStore:Tv,useId:Fv,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ih(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fl={isMounted:function(t){return(t=t._reactInternals)?Gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ot(),s=Jn(t),a=wn(i,s);a.payload=e,n!=null&&(a.callback=n),e=Qn(t,a,s),e!==null&&(Kt(e,t,s,i),ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ot(),s=Jn(t),a=wn(i,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Qn(t,a,s),e!==null&&(Kt(e,t,s,i),ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),i=Jn(t),s=wn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,i),e!==null&&(Kt(e,t,i,n),ka(e,t,i))}};function N_(t,e,n,i,s,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,l):e.prototype&&e.prototype.isPureReactComponent?!$s(n,i)||!$s(s,a):!0}function Hv(t,e,n){var i=!1,s=oi,a=e.contextType;return typeof a=="object"&&a!==null?a=bt(a):(s=mt(e)?Ai:nt.current,i=e.contextTypes,a=(i=i!=null)?Nr(t,s):oi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fl,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function O_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Fl.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pd(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=bt(a):(a=mt(e)?Ai:nt.current,s.context=Nr(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ih(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fl.enqueueReplaceState(s,s.state,null),Ja(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var n="",i=e;do n+=LC(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nT=typeof WeakMap=="function"?WeakMap:Map;function Vv(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){rl||(rl=!0,_h=i),sh(t,e)},n}function jv(t,e,n){n=wn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){sh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){sh(t,e),typeof i!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function A_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new nT;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=mT.bind(null,t,e,n),e.then(t,t))}function M_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var iT=Rn.ReactCurrentOwner,dt=!1;function st(t,e,n,i){e.child=t===null?yv(e,null,n,i):Ar(e,t.child,n,i)}function D_(t,e,n,i,s){n=n.render;var a=e.ref;return Sr(e,s),i=yd(t,e,n,i,a,s),n=wd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Se&&n&&ad(e),e.flags|=1,st(t,e,i,s),e.child)}function z_(t,e,n,i,s){if(t===null){var a=n.type;return typeof a=="function"&&!Rd(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Zv(t,e,a,i,s)):(t=Oa(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(l,i)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=ei(a,i),t.ref=e.ref,t.return=e,e.child=t}function Zv(t,e,n,i,s){if(t!==null){var a=t.memoizedProps;if($s(a,i)&&t.ref===e.ref)if(dt=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,In(t,e,s)}return oh(t,e,n,i,s)}function Gv(t,e,n){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(mr,wt),wt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(mr,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,ye(mr,wt),wt|=i}else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,ye(mr,wt),wt|=i;return st(t,e,s,n),e.child}function Kv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oh(t,e,n,i,s){var a=mt(n)?Ai:nt.current;return a=Nr(e,a),Sr(e,s),n=yd(t,e,n,i,a,s),i=wd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(Se&&i&&ad(e),e.flags|=1,st(t,e,n,s),e.child)}function F_(t,e,n,i,s){if(mt(n)){var a=!0;qa(e)}else a=!1;if(Sr(e,s),e.stateNode===null)La(t,e),Hv(e,n,i),rh(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=bt(p):(p=mt(n)?Ai:nt.current,p=Nr(e,p));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&O_(e,l,i,p),Fn=!1;var v=e.memoizedState;l.state=v,Ja(e,i,l,s),d=e.memoizedState,h!==i||v!==d||_t.current||Fn?(typeof g=="function"&&(ih(e,n,g,i),d=e.memoizedState),(h=Fn||N_(e,n,h,i,v,d,p))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Ev(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Ut(e.type,h),l.props=p,m=e.pendingProps,v=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=bt(d):(d=mt(n)?Ai:nt.current,d=Nr(e,d));var T=n.getDerivedStateFromProps;(g=typeof T=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==m||v!==d)&&O_(e,l,i,d),Fn=!1,v=e.memoizedState,l.state=v,Ja(e,i,l,s);var k=e.memoizedState;h!==m||v!==k||_t.current||Fn?(typeof T=="function"&&(ih(e,n,T,i),k=e.memoizedState),(p=Fn||N_(e,n,p,i,v,k,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,k,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,k,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),l.props=i,l.state=k,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return ah(t,e,n,i,a,s)}function ah(t,e,n,i,s,a){Kv(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&S_(e,n,!1),In(t,e,a);i=e.stateNode,iT.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Ar(e,t.child,null,a),e.child=Ar(e,null,h,a)):st(t,e,h,a),e.memoizedState=i.state,s&&S_(e,n,!0),e.child}function qv(t){var e=t.stateNode;e.pendingContext?C_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C_(t,e.context,!1),_d(t,e.containerInfo)}function B_(t,e,n,i,s){return Or(),ud(s),e.flags|=256,st(t,e,n,i),e.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function uh(t){return{baseLanes:t,cachePool:null,transitions:null}}function $v(t,e,n){var i=e.pendingProps,s=Ie.current,a=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ie,s&1),t===null)return th(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Wl(l,i,0,null),t=Ni(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=uh(n),e.memoizedState=lh,t):Sd(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return rT(t,e,l,i,h,s,n);if(a){a=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=ei(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=ei(h,a):(a=Ni(a,l,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=t.child.memoizedState,l=l===null?uh(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=lh,i}return a=t.child,t=a.sibling,i=ei(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Sd(t,e){return e=Wl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fa(t,e,n,i){return i!==null&&ud(i),Ar(e,t.child,null,n),t=Sd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rT(t,e,n,i,s,a,l){if(n)return e.flags&256?(e.flags&=-257,i=uc(Error(O(422))),fa(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=Wl({mode:"visible",children:i.children},s,0,null),a=Ni(a,s,l,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&Ar(e,t.child,null,l),e.child.memoizedState=uh(l),e.memoizedState=lh,a);if(!(e.mode&1))return fa(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,a=Error(O(419)),i=uc(a,i,void 0),fa(t,e,l,i)}if(h=(l&t.childLanes)!==0,dt||h){if(i=Ze,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Tn(t,s),Kt(i,t,s,-1))}return Ld(),i=uc(Error(O(421))),fa(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gT.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Et=Yn(s.nextSibling),Ct=e,Se=!0,Ht=null,t!==null&&(Nt[Ot++]=_n,Nt[Ot++]=mn,Nt[Ot++]=Mi,_n=t.id,mn=t.overflow,Mi=e),e=Sd(e,i.children),e.flags|=4096,e)}function U_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),nh(t.return,e,n)}function cc(t,e,n,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function Yv(t,e,n){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(st(t,e,i.children,n),i=Ie.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,n,e);else if(t.tag===19)U_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ye(Ie,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&el(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cc(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&el(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cc(e,!0,n,null,a);break;case"together":cc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function La(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sT(t,e,n){switch(e.tag){case 3:qv(e),Or();break;case 5:Cv(e);break;case 1:mt(e.type)&&qa(e);break;case 4:_d(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ye(Qa,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ye(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?$v(t,e,n):(ye(Ie,Ie.current&1),t=In(t,e,n),t!==null?t.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Yv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ie,Ie.current),i)break;return null;case 22:case 23:return e.lanes=0,Gv(t,e,n)}return In(t,e,n)}var Qv,ch,Xv,Jv;Qv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ch=function(){};Xv=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Pi(sn.current);var a=null;switch(n){case"input":s=Oc(t,s),i=Oc(t,i),a=[];break;case"select":s=Pe({},s,{value:void 0}),i=Pe({},i,{value:void 0}),a=[];break;case"textarea":s=bc(t,s),i=bc(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ga)}zc(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Hs.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(a=a||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&we("scroll",t),a||h===d||(a=[])):(a=a||[]).push(p,d))}n&&(a=a||[]).push("style",n);var p=a;(e.updateQueue=p)&&(e.flags|=4)}};Jv=function(t,e,n,i){n!==i&&(e.flags|=4)};function gs(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oT(t,e,n){var i=e.pendingProps;switch(ld(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return mt(e.type)&&Ka(),Je(e),null;case 3:return i=e.stateNode,Mr(),Ce(_t),Ce(nt),gd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(vh(Ht),Ht=null))),ch(t,e),Je(e),null;case 5:md(e);var s=Pi(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Xv(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(O(166));return Je(e),null}if(t=Pi(sn.current),ha(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[nn]=e,i[Xs]=a,t=(e.mode&1)!==0,n){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(s=0;s<ks.length;s++)we(ks[s],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":$p(i,a),we("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},we("invalid",i);break;case"textarea":Qp(i,a),we("invalid",i)}zc(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var h=a[l];l==="children"?typeof h=="string"?i.textContent!==h&&(a.suppressHydrationWarning!==!0&&ca(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&ca(i.textContent,h,t),s=["children",""+h]):Hs.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&we("scroll",i)}switch(n){case"input":na(i),Yp(i,a,!0);break;case"textarea":na(i),Xp(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Ga)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[nn]=e,t[Xs]=i,Qv(t,e,!1,!1),e.stateNode=t;e:{switch(l=Fc(n,i),n){case"dialog":we("cancel",t),we("close",t),s=i;break;case"iframe":case"object":case"embed":we("load",t),s=i;break;case"video":case"audio":for(s=0;s<ks.length;s++)we(ks[s],t);s=i;break;case"source":we("error",t),s=i;break;case"img":case"image":case"link":we("error",t),we("load",t),s=i;break;case"details":we("toggle",t),s=i;break;case"input":$p(t,i),s=Oc(t,i),we("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Pe({},i,{value:void 0}),we("invalid",t);break;case"textarea":Qp(t,i),s=bc(t,i),we("invalid",t);break;default:s=i}zc(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var d=h[a];a==="style"?Rg(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&xg(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Vs(t,d):typeof d=="number"&&Vs(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Hs.hasOwnProperty(a)?d!=null&&a==="onScroll"&&we("scroll",t):d!=null&&Kh(t,a,d,l))}switch(n){case"input":na(t),Yp(t,i,!1);break;case"textarea":na(t),Xp(t);break;case"option":i.value!=null&&t.setAttribute("value",""+si(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?yr(t,!!i.multiple,a,!1):i.defaultValue!=null&&yr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ga)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)Jv(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(O(166));if(n=Pi(eo.current),Pi(sn.current),ha(e)){if(i=e.stateNode,n=e.memoizedProps,i[nn]=e,(a=i.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:ca(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ca(i.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[nn]=e,e.stateNode=i}return Je(e),null;case 13:if(Ce(Ie),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Et!==null&&e.mode&1&&!(e.flags&128))gv(),Or(),e.flags|=98560,a=!1;else if(a=ha(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(O(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[nn]=e}else Or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),a=!1}else Ht!==null&&(vh(Ht),Ht=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Fe===0&&(Fe=3):Ld())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Mr(),ch(t,e),t===null&&Ys(e.stateNode.containerInfo),Je(e),null;case 10:return dd(e.type._context),Je(e),null;case 17:return mt(e.type)&&Ka(),Je(e),null;case 19:if(Ce(Ie),a=e.memoizedState,a===null)return Je(e),null;if(i=(e.flags&128)!==0,l=a.rendering,l===null)if(i)gs(a,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=el(t),l!==null){for(e.flags|=128,gs(a,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)a=n,t=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ie,Ie.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ne()>Dr&&(e.flags|=128,i=!0,gs(a,!1),e.lanes=4194304)}else{if(!i)if(t=el(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Se)return Je(e),null}else 2*Ne()-a.renderingStartTime>Dr&&n!==1073741824&&(e.flags|=128,i=!0,gs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ne(),e.sibling=null,n=Ie.current,ye(Ie,i?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return xd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function aT(t,e){switch(ld(e),e.tag){case 1:return mt(e.type)&&Ka(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mr(),Ce(_t),Ce(nt),gd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return md(e),null;case 13:if(Ce(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ie),null;case 4:return Mr(),null;case 10:return dd(e.type._context),null;case 22:case 23:return xd(),null;case 24:return null;default:return null}}var pa=!1,et=!1,lT=typeof WeakSet=="function"?WeakSet:Set,z=null;function _r(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){xe(t,e,i)}else n.current=null}function hh(t,e,n){try{n()}catch(i){xe(t,e,i)}}var W_=!1;function uT(t,e){if(qc=Va,t=rv(),od(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,g=0,m=t,v=null;t:for(;;){for(var T;m!==n||s!==0&&m.nodeType!==3||(h=l+s),m!==a||i!==0&&m.nodeType!==3||(d=l+i),m.nodeType===3&&(l+=m.nodeValue.length),(T=m.firstChild)!==null;)v=m,m=T;for(;;){if(m===t)break t;if(v===n&&++p===s&&(h=l),v===a&&++g===i&&(d=l),(T=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=T}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for($c={focusedElem:t,selectionRange:n},Va=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var P=k.memoizedProps,V=k.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ut(e.type,P),V);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(N){xe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return k=W_,W_=!1,k}function As(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&hh(e,n,a)}s=s.next}while(s!==i)}}function Bl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ey(t){var e=t.alternate;e!==null&&(t.alternate=null,ey(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[Xs],delete e[Xc],delete e[ZS],delete e[GS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ty(t){return t.tag===5||t.tag===3||t.tag===4}function H_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ty(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ga));else if(i!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}function ph(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ph(t,e,n),t=t.sibling;t!==null;)ph(t,e,n),t=t.sibling}var qe=null,Wt=!1;function bn(t,e,n){for(n=n.child;n!==null;)ny(t,e,n),n=n.sibling}function ny(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Nl,n)}catch{}switch(n.tag){case 5:et||_r(n,e);case 6:var i=qe,s=Wt;qe=null,bn(t,e,n),qe=i,Wt=s,qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Wt?(t=qe,n=n.stateNode,t.nodeType===8?ic(t.parentNode,n):t.nodeType===1&&ic(t,n),Ks(t)):ic(qe,n.stateNode));break;case 4:i=qe,s=Wt,qe=n.stateNode.containerInfo,Wt=!0,bn(t,e,n),qe=i,Wt=s;break;case 0:case 11:case 14:case 15:if(!et&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&hh(n,e,l),s=s.next}while(s!==i)}bn(t,e,n);break;case 1:if(!et&&(_r(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){xe(n,e,h)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(et=(i=et)||n.memoizedState!==null,bn(t,e,n),et=i):bn(t,e,n);break;default:bn(t,e,n)}}function V_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lT),e.forEach(function(i){var s=vT.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:qe=h.stateNode,Wt=!1;break e;case 3:qe=h.stateNode.containerInfo,Wt=!0;break e;case 4:qe=h.stateNode.containerInfo,Wt=!0;break e}h=h.return}if(qe===null)throw Error(O(160));ny(a,l,s),qe=null,Wt=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){xe(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iy(e,t),e=e.sibling}function iy(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),en(t),i&4){try{As(3,t,t.return),Bl(3,t)}catch(P){xe(t,t.return,P)}try{As(5,t,t.return)}catch(P){xe(t,t.return,P)}}break;case 1:Bt(e,t),en(t),i&512&&n!==null&&_r(n,n.return);break;case 5:if(Bt(e,t),en(t),i&512&&n!==null&&_r(n,n.return),t.flags&32){var s=t.stateNode;try{Vs(s,"")}catch(P){xe(t,t.return,P)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&Ig(s,a),Fc(h,l);var p=Fc(h,a);for(l=0;l<d.length;l+=2){var g=d[l],m=d[l+1];g==="style"?Rg(s,m):g==="dangerouslySetInnerHTML"?xg(s,m):g==="children"?Vs(s,m):Kh(s,g,m,p)}switch(h){case"input":Ac(s,a);break;case"textarea":kg(s,a);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var T=a.value;T!=null?yr(s,!!a.multiple,T,!1):v!==!!a.multiple&&(a.defaultValue!=null?yr(s,!!a.multiple,a.defaultValue,!0):yr(s,!!a.multiple,a.multiple?[]:"",!1))}s[Xs]=a}catch(P){xe(t,t.return,P)}}break;case 6:if(Bt(e,t),en(t),i&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(P){xe(t,t.return,P)}}break;case 3:if(Bt(e,t),en(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ks(e.containerInfo)}catch(P){xe(t,t.return,P)}break;case 4:Bt(e,t),en(t);break;case 13:Bt(e,t),en(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(kd=Ne())),i&4&&V_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(et=(p=et)||g,Bt(e,t),et=p):Bt(e,t),en(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!g&&t.mode&1)for(z=t,g=t.child;g!==null;){for(m=z=g;z!==null;){switch(v=z,T=v.child,v.tag){case 0:case 11:case 14:case 15:As(4,v,v.return);break;case 1:_r(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(P){xe(i,n,P)}}break;case 5:_r(v,v.return);break;case 22:if(v.memoizedState!==null){Z_(m);continue}}T!==null?(T.return=v,z=T):Z_(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{s=m.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Lg("display",l))}catch(P){xe(t,t.return,P)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=p?"":m.memoizedProps}catch(P){xe(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Bt(e,t),en(t),i&4&&V_(t);break;case 21:break;default:Bt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ty(n)){var i=n;break e}n=n.return}throw Error(O(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Vs(s,""),i.flags&=-33);var a=H_(t);ph(t,a,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=H_(t);fh(t,h,l);break;default:throw Error(O(161))}}catch(d){xe(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cT(t,e,n){z=t,ry(t)}function ry(t,e,n){for(var i=(t.mode&1)!==0;z!==null;){var s=z,a=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||pa;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||et;h=pa;var p=et;if(pa=l,(et=d)&&!p)for(z=s;z!==null;)l=z,d=l.child,l.tag===22&&l.memoizedState!==null?G_(s):d!==null?(d.return=l,z=d):G_(s);for(;a!==null;)z=a,ry(a),a=a.sibling;z=s,pa=h,et=p}j_(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,z=a):j_(t)}}function j_(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||Bl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!et)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&x_(e,a,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Ks(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}et||e.flags&512&&dh(e)}catch(v){xe(e,e.return,v)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Z_(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function G_(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bl(4,e)}catch(d){xe(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){xe(e,s,d)}}var a=e.return;try{dh(e)}catch(d){xe(e,a,d)}break;case 5:var l=e.return;try{dh(e)}catch(d){xe(e,l,d)}}}catch(d){xe(e,e.return,d)}if(e===t){z=null;break}var h=e.sibling;if(h!==null){h.return=e.return,z=h;break}z=e.return}}var hT=Math.ceil,il=Rn.ReactCurrentDispatcher,Td=Rn.ReactCurrentOwner,Mt=Rn.ReactCurrentBatchConfig,ae=0,Ze=null,Me=null,Ye=0,wt=0,mr=hi(0),Fe=0,ro=null,Di=0,Ul=0,Id=0,Ms=null,ht=null,kd=0,Dr=1/0,fn=null,rl=!1,_h=null,Xn=null,_a=!1,Gn=null,sl=0,bs=0,mh=null,Ra=-1,Na=0;function ot(){return ae&6?Ne():Ra!==-1?Ra:Ra=Ne()}function Jn(t){return t.mode&1?ae&2&&Ye!==0?Ye&-Ye:qS.transition!==null?(Na===0&&(Na=Hg()),Na):(t=de,t!==0||(t=window.event,t=t===void 0?16:$g(t.type)),t):1}function Kt(t,e,n,i){if(50<bs)throw bs=0,mh=null,Error(O(185));yo(t,n,i),(!(ae&2)||t!==Ze)&&(t===Ze&&(!(ae&2)&&(Ul|=n),Fe===4&&Un(t,Ye)),gt(t,i),n===1&&ae===0&&!(e.mode&1)&&(Dr=Ne()+500,Dl&&di()))}function gt(t,e){var n=t.callbackNode;qC(t,e);var i=Ha(t,t===Ze?Ye:0);if(i===0)n!==null&&t_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&t_(n),e===1)t.tag===0?KS(K_.bind(null,t)):pv(K_.bind(null,t)),VS(function(){!(ae&6)&&di()}),n=null;else{switch(Vg(i)){case 1:n=Xh;break;case 4:n=Ug;break;case 16:n=Wa;break;case 536870912:n=Wg;break;default:n=Wa}n=dy(n,sy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sy(t,e){if(Ra=-1,Na=0,ae&6)throw Error(O(327));var n=t.callbackNode;if(Tr()&&t.callbackNode!==n)return null;var i=Ha(t,t===Ze?Ye:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ol(t,i);else{e=i;var s=ae;ae|=2;var a=ay();(Ze!==t||Ye!==e)&&(fn=null,Dr=Ne()+500,Ri(t,e));do try{pT();break}catch(h){oy(t,h)}while(!0);hd(),il.current=a,ae=s,Me!==null?e=0:(Ze=null,Ye=0,e=Fe)}if(e!==0){if(e===2&&(s=Vc(t),s!==0&&(i=s,e=gh(t,s))),e===1)throw n=ro,Ri(t,0),Un(t,i),gt(t,Ne()),n;if(e===6)Un(t,i);else{if(s=t.current.alternate,!(i&30)&&!dT(s)&&(e=ol(t,i),e===2&&(a=Vc(t),a!==0&&(i=a,e=gh(t,a))),e===1))throw n=ro,Ri(t,0),Un(t,i),gt(t,Ne()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(O(345));case 2:Ci(t,ht,fn);break;case 3:if(Un(t,i),(i&130023424)===i&&(e=kd+500-Ne(),10<e)){if(Ha(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qc(Ci.bind(null,t,ht,fn),e);break}Ci(t,ht,fn);break;case 4:if(Un(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Gt(i);a=1<<l,l=e[l],l>s&&(s=l),i&=~a}if(i=s,i=Ne()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hT(i/1960))-i,10<i){t.timeoutHandle=Qc(Ci.bind(null,t,ht,fn),i);break}Ci(t,ht,fn);break;case 5:Ci(t,ht,fn);break;default:throw Error(O(329))}}}return gt(t,Ne()),t.callbackNode===n?sy.bind(null,t):null}function gh(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=ol(t,e),t!==2&&(e=ht,ht=n,e!==null&&vh(e)),t}function vh(t){ht===null?ht=t:ht.push.apply(ht,t)}function dT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!$t(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~Id,e&=~Ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),i=1<<n;t[n]=-1,e&=~i}}function K_(t){if(ae&6)throw Error(O(327));Tr();var e=Ha(t,0);if(!(e&1))return gt(t,Ne()),null;var n=ol(t,e);if(t.tag!==0&&n===2){var i=Vc(t);i!==0&&(e=i,n=gh(t,i))}if(n===1)throw n=ro,Ri(t,0),Un(t,e),gt(t,Ne()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,ht,fn),gt(t,Ne()),null}function Pd(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Dr=Ne()+500,Dl&&di())}}function zi(t){Gn!==null&&Gn.tag===0&&!(ae&6)&&Tr();var e=ae;ae|=1;var n=Mt.transition,i=de;try{if(Mt.transition=null,de=1,t)return t()}finally{de=i,Mt.transition=n,ae=e,!(ae&6)&&di()}}function xd(){wt=mr.current,Ce(mr)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,HS(n)),Me!==null)for(n=Me.return;n!==null;){var i=n;switch(ld(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ka();break;case 3:Mr(),Ce(_t),Ce(nt),gd();break;case 5:md(i);break;case 4:Mr();break;case 13:Ce(Ie);break;case 19:Ce(Ie);break;case 10:dd(i.type._context);break;case 22:case 23:xd()}n=n.return}if(Ze=t,Me=t=ei(t.current,null),Ye=wt=e,Fe=0,ro=null,Id=Ul=Di=0,ht=Ms=null,ki!==null){for(e=0;e<ki.length;e++)if(n=ki[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,i.next=l}n.pending=i}ki=null}return t}function oy(t,e){do{var n=Me;try{if(hd(),Pa.current=nl,tl){for(var i=ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}tl=!1}if(bi=0,He=De=ke=null,Os=!1,to=0,Td.current=null,n===null||n.return===null){Fe=1,ro=e,Me=null;break}e:{var a=t,l=n.return,h=n,d=e;if(e=Ye,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,g=h,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var T=M_(l);if(T!==null){T.flags&=-257,b_(T,l,h,a,e),T.mode&1&&A_(a,p,e),e=T,d=p;var k=e.updateQueue;if(k===null){var P=new Set;P.add(d),e.updateQueue=P}else k.add(d);break e}else{if(!(e&1)){A_(a,p,e),Ld();break e}d=Error(O(426))}}else if(Se&&h.mode&1){var V=M_(l);if(V!==null){!(V.flags&65536)&&(V.flags|=256),b_(V,l,h,a,e),ud(br(d,h));break e}}a=d=br(d,h),Fe!==4&&(Fe=2),Ms===null?Ms=[a]:Ms.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var E=Vv(a,d,e);P_(a,E);break e;case 1:h=d;var w=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Xn===null||!Xn.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=jv(a,h,e);P_(a,N);break e}}a=a.return}while(a!==null)}uy(n)}catch(b){e=b,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function ay(){var t=il.current;return il.current=nl,t===null?nl:t}function Ld(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),Ze===null||!(Di&268435455)&&!(Ul&268435455)||Un(Ze,Ye)}function ol(t,e){var n=ae;ae|=2;var i=ay();(Ze!==t||Ye!==e)&&(fn=null,Ri(t,e));do try{fT();break}catch(s){oy(t,s)}while(!0);if(hd(),ae=n,il.current=i,Me!==null)throw Error(O(261));return Ze=null,Ye=0,Fe}function fT(){for(;Me!==null;)ly(Me)}function pT(){for(;Me!==null&&!BC();)ly(Me)}function ly(t){var e=hy(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?uy(t):Me=e,Td.current=null}function uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aT(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Me=null;return}}else if(n=oT(n,e,wt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Fe===0&&(Fe=5)}function Ci(t,e,n){var i=de,s=Mt.transition;try{Mt.transition=null,de=1,_T(t,e,n,i)}finally{Mt.transition=s,de=i}return null}function _T(t,e,n,i){do Tr();while(Gn!==null);if(ae&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if($C(t,a),t===Ze&&(Me=Ze=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_a||(_a=!0,dy(Wa,function(){return Tr(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Mt.transition,Mt.transition=null;var l=de;de=1;var h=ae;ae|=4,Td.current=null,uT(t,n),iy(n,t),bS($c),Va=!!qc,$c=qc=null,t.current=n,cT(n),UC(),ae=h,de=l,Mt.transition=a}else t.current=n;if(_a&&(_a=!1,Gn=t,sl=s),a=t.pendingLanes,a===0&&(Xn=null),VC(n.stateNode),gt(t,Ne()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(rl)throw rl=!1,t=_h,_h=null,t;return sl&1&&t.tag!==0&&Tr(),a=t.pendingLanes,a&1?t===mh?bs++:(bs=0,mh=t):bs=0,di(),null}function Tr(){if(Gn!==null){var t=Vg(sl),e=Mt.transition,n=de;try{if(Mt.transition=null,de=16>t?16:t,Gn===null)var i=!1;else{if(t=Gn,Gn=null,sl=0,ae&6)throw Error(O(331));var s=ae;for(ae|=4,z=t.current;z!==null;){var a=z,l=a.child;if(z.flags&16){var h=a.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(z=p;z!==null;){var g=z;switch(g.tag){case 0:case 11:case 15:As(8,g,a)}var m=g.child;if(m!==null)m.return=g,z=m;else for(;z!==null;){g=z;var v=g.sibling,T=g.return;if(ey(g),g===p){z=null;break}if(v!==null){v.return=T,z=v;break}z=T}}}var k=a.alternate;if(k!==null){var P=k.child;if(P!==null){k.child=null;do{var V=P.sibling;P.sibling=null,P=V}while(P!==null)}}z=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,z=l;else e:for(;z!==null;){if(a=z,a.flags&2048)switch(a.tag){case 0:case 11:case 15:As(9,a,a.return)}var E=a.sibling;if(E!==null){E.return=a.return,z=E;break e}z=a.return}}var w=t.current;for(z=w;z!==null;){l=z;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,z=C;else e:for(l=w;z!==null;){if(h=z,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Bl(9,h)}}catch(b){xe(h,h.return,b)}if(h===l){z=null;break e}var N=h.sibling;if(N!==null){N.return=h.return,z=N;break e}z=h.return}}if(ae=s,di(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Nl,t)}catch{}i=!0}return i}finally{de=n,Mt.transition=e}}return!1}function q_(t,e,n){e=br(n,e),e=Vv(t,e,1),t=Qn(t,e,1),e=ot(),t!==null&&(yo(t,1,e),gt(t,e))}function xe(t,e,n){if(t.tag===3)q_(t,t,n);else for(;e!==null;){if(e.tag===3){q_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xn===null||!Xn.has(i))){t=br(n,t),t=jv(e,t,1),e=Qn(e,t,1),t=ot(),e!==null&&(yo(e,1,t),gt(e,t));break}}e=e.return}}function mT(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(Ye&n)===n&&(Fe===4||Fe===3&&(Ye&130023424)===Ye&&500>Ne()-kd?Ri(t,0):Id|=n),gt(t,e)}function cy(t,e){e===0&&(t.mode&1?(e=sa,sa<<=1,!(sa&130023424)&&(sa=4194304)):e=1);var n=ot();t=Tn(t,e),t!==null&&(yo(t,e,n),gt(t,n))}function gT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cy(t,n)}function vT(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(O(314))}i!==null&&i.delete(e),cy(t,n)}var hy;hy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_t.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,sT(t,e,n);dt=!!(t.flags&131072)}else dt=!1,Se&&e.flags&1048576&&_v(e,Ya,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;La(t,e),t=e.pendingProps;var s=Nr(e,nt.current);Sr(e,n),s=yd(null,e,i,t,s,n);var a=wd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(i)?(a=!0,qa(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pd(e),s.updater=Fl,e.stateNode=s,s._reactInternals=e,rh(e,i,t,n),e=ah(null,e,i,!0,a,n)):(e.tag=0,Se&&a&&ad(e),st(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(La(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wT(i),t=Ut(i,t),s){case 0:e=oh(null,e,i,t,n);break e;case 1:e=F_(null,e,i,t,n);break e;case 11:e=D_(null,e,i,t,n);break e;case 14:e=z_(null,e,i,Ut(i.type,t),n);break e}throw Error(O(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),oh(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),F_(t,e,i,s,n);case 3:e:{if(qv(e),t===null)throw Error(O(387));i=e.pendingProps,a=e.memoizedState,s=a.element,Ev(t,e),Ja(e,i,null,n);var l=e.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=br(Error(O(423)),e),e=B_(t,e,i,n,s);break e}else if(i!==s){s=br(Error(O(424)),e),e=B_(t,e,i,n,s);break e}else for(Et=Yn(e.stateNode.containerInfo.firstChild),Ct=e,Se=!0,Ht=null,n=yv(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),i===s){e=In(t,e,n);break e}st(t,e,i,n)}e=e.child}return e;case 5:return Cv(e),t===null&&th(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,l=s.children,Yc(i,s)?l=null:a!==null&&Yc(i,a)&&(e.flags|=32),Kv(t,e),st(t,e,l,n),e.child;case 6:return t===null&&th(e),null;case 13:return $v(t,e,n);case 4:return _d(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ar(e,null,i,n):st(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),D_(t,e,i,s,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,l=s.value,ye(Qa,i._currentValue),i._currentValue=l,a!==null)if($t(a.value,l)){if(a.children===s.children&&!_t.current){e=In(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var h=a.dependencies;if(h!==null){l=a.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(a.tag===1){d=wn(-1,n&-n),d.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?d.next=d:(d.next=g.next,g.next=d),p.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),nh(a.return,n,e),h.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(O(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),nh(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}st(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Sr(e,n),s=bt(s),i=i(s),e.flags|=1,st(t,e,i,n),e.child;case 14:return i=e.type,s=Ut(i,e.pendingProps),s=Ut(i.type,s),z_(t,e,i,s,n);case 15:return Zv(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),La(t,e),e.tag=1,mt(i)?(t=!0,qa(e)):t=!1,Sr(e,n),Hv(e,i,s),rh(e,i,s,n),ah(null,e,i,!0,t,n);case 19:return Yv(t,e,n);case 22:return Gv(t,e,n)}throw Error(O(156,e.tag))};function dy(t,e){return Bg(t,e)}function yT(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,i){return new yT(t,e,n,i)}function Rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wT(t){if(typeof t=="function")return Rd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$h)return 11;if(t===Yh)return 14}return 2}function ei(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oa(t,e,n,i,s,a){var l=2;if(i=t,typeof t=="function")Rd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case or:return Ni(n.children,s,a,e);case qh:l=8,s|=8;break;case xc:return t=At(12,n,e,s|2),t.elementType=xc,t.lanes=a,t;case Lc:return t=At(13,n,e,s),t.elementType=Lc,t.lanes=a,t;case Rc:return t=At(19,n,e,s),t.elementType=Rc,t.lanes=a,t;case Cg:return Wl(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wg:l=10;break e;case Eg:l=9;break e;case $h:l=11;break e;case Yh:l=14;break e;case zn:l=16,i=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=At(l,n,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Ni(t,e,n,i){return t=At(7,t,i,e),t.lanes=n,t}function Wl(t,e,n,i){return t=At(22,t,i,e),t.elementType=Cg,t.lanes=n,t.stateNode={isHidden:!1},t}function hc(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function dc(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ET(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gu(0),this.expirationTimes=Gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gu(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nd(t,e,n,i,s,a,l,h,d){return t=new ET(t,e,n,h,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=At(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(a),t}function CT(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function fy(t){if(!t)return oi;t=t._reactInternals;e:{if(Gi(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(mt(n))return fv(t,n,e)}return e}function py(t,e,n,i,s,a,l,h,d){return t=Nd(n,i,!0,t,s,a,l,h,d),t.context=fy(null),n=t.current,i=ot(),s=Jn(n),a=wn(i,s),a.callback=e??null,Qn(n,a,s),t.current.lanes=s,yo(t,s,i),gt(t,i),t}function Hl(t,e,n,i){var s=e.current,a=ot(),l=Jn(s);return n=fy(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(a,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qn(s,e,l),t!==null&&(Kt(t,s,l,a),ka(t,s,l)),l}function al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Od(t,e){$_(t,e),(t=t.alternate)&&$_(t,e)}function ST(){return null}var _y=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ad(t){this._internalRoot=t}Vl.prototype.render=Ad.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Hl(t,e,null,null)};Vl.prototype.unmount=Ad.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){Hl(null,t,null,null)}),e[Sn]=null}};function Vl(t){this._internalRoot=t}Vl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&qg(t)}};function Md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y_(){}function TT(t,e,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var p=al(l);a.call(p)}}var l=py(e,i,t,0,null,!1,!1,"",Y_);return t._reactRootContainer=l,t[Sn]=l.current,Ys(t.nodeType===8?t.parentNode:t),zi(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=al(d);h.call(p)}}var d=Nd(t,0,!1,null,null,!1,!1,"",Y_);return t._reactRootContainer=d,t[Sn]=d.current,Ys(t.nodeType===8?t.parentNode:t),zi(function(){Hl(e,d,n,i)}),d}function Zl(t,e,n,i,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var h=s;s=function(){var d=al(l);h.call(d)}}Hl(e,l,t,s)}else l=TT(n,e,t,s,i);return al(l)}jg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Is(e.pendingLanes);n!==0&&(Jh(e,n|1),gt(e,Ne()),!(ae&6)&&(Dr=Ne()+500,di()))}break;case 13:zi(function(){var i=Tn(t,1);if(i!==null){var s=ot();Kt(i,t,1,s)}}),Od(t,1)}};ed=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=ot();Kt(e,t,134217728,n)}Od(t,134217728)}};Zg=function(t){if(t.tag===13){var e=Jn(t),n=Tn(t,e);if(n!==null){var i=ot();Kt(n,t,e,i)}Od(t,e)}};Gg=function(){return de};Kg=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Uc=function(t,e,n){switch(e){case"input":if(Ac(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=bl(i);if(!s)throw Error(O(90));Tg(i),Ac(i,s)}}}break;case"textarea":kg(t,n);break;case"select":e=n.value,e!=null&&yr(t,!!n.multiple,e,!1)}};Ag=Pd;Mg=zi;var IT={usingClientEntryPoint:!1,Events:[Eo,cr,bl,Ng,Og,Pd]},vs={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kT={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zg(t),t===null?null:t.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||ST,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{Nl=ma.inject(kT),rn=ma}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IT;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(e))throw Error(O(200));return CT(t,e,null,n)};Tt.createRoot=function(t,e){if(!Md(t))throw Error(O(299));var n=!1,i="",s=_y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nd(t,1,!1,null,null,n,!1,i,s),t[Sn]=e.current,Ys(t.nodeType===8?t.parentNode:t),new Ad(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=zg(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return zi(t)};Tt.hydrate=function(t,e,n){if(!jl(e))throw Error(O(200));return Zl(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!Md(t))throw Error(O(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",l=_y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=py(e,null,t,1,n??null,s,!1,a,l),t[Sn]=e.current,Ys(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vl(e)};Tt.render=function(t,e,n){if(!jl(e))throw Error(O(200));return Zl(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!jl(t))throw Error(O(40));return t._reactRootContainer?(zi(function(){Zl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Pd;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!jl(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Zl(t,e,n,!1,i)};Tt.version="18.3.1-next-f1338f8080-20240426";function my(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(my)}catch(t){console.error(t)}}my(),mg.exports=Tt;var gy=mg.exports,vy,Q_=gy;vy=Q_.createRoot,Q_.hydrateRoot;function yy(t,e){const n=re.useRef(e);re.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const PT=1;function xT(t){return Object.freeze({__version:PT,map:t})}function LT(t,e){return Object.freeze({...t,...e})}const wy=re.createContext(null),Ey=wy.Provider;function Cy(){const t=re.useContext(wy);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function RT(t){function e(n,i){const{instance:s,context:a}=t(n).current;return re.useImperativeHandle(i,()=>s),n.children==null?null:W.createElement(Ey,{value:a},n.children)}return re.forwardRef(e)}function NT(t){function e(n,i){const[s,a]=re.useState(!1),{instance:l}=t(n,a).current;re.useImperativeHandle(i,()=>l),re.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?gy.createPortal(n.children,h):null}return re.forwardRef(e)}function OT(t){function e(n,i){const{instance:s}=t(n).current;return re.useImperativeHandle(i,()=>s),null}return re.forwardRef(e)}function Sy(t,e){const n=re.useRef();re.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function bd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function AT(t,e){return function(i,s){const a=Cy(),l=t(bd(i,a),a);return yy(a.map,i.attribution),Sy(l.current,i.eventHandlers),e(l.current,a,i,s),l}}var yh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(aC,function(n){var i="1.9.4";function s(r){var o,u,c,f;for(u=1,c=arguments.length;u<c;u++){f=arguments[u];for(o in f)r[o]=f[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function l(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var c=u.call(arguments,2);return function(){return r.apply(o,c.length?c.concat(u.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,o,u){var c,f,_,y;return y=function(){c=!1,f&&(_.apply(u,f),f=!1)},_=function(){c?f=arguments:(r.apply(u,arguments),setTimeout(y,o),c=!0)},_}function g(r,o,u){var c=o[1],f=o[0],_=c-f;return r===c&&u?r:((r-f)%_+_)%_+f}function m(){return!1}function v(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function T(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return T(r).split(/\s+/)}function P(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function V(r,o,u){var c=[];for(var f in r)c.push(encodeURIComponent(u?f.toUpperCase():f)+"="+encodeURIComponent(r[f]));return(!o||o.indexOf("?")===-1?"?":"&")+c.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function w(r,o){return r.replace(E,function(u,c){var f=o[c];if(f===void 0)throw new Error("No value provided for variable "+u);return typeof f=="function"&&(f=f(o)),f})}var C=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function N(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var B=0;function U(r){var o=+new Date,u=Math.max(0,16-(o-B));return B=o+u,window.setTimeout(r,u)}var he=window.requestAnimationFrame||F("RequestAnimationFrame")||U,Q=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function me(r,o,u){if(u&&he===U)r.call(o);else return he.call(window,l(r,o))}function Be(r){r&&Q.call(window,r)}var _i={__proto__:null,extend:s,create:a,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:g,falseFn:m,formatNum:v,trim:T,splitWords:k,setOptions:P,getParamString:V,template:w,isArray:C,indexOf:N,emptyImageUrl:b,requestFn:he,cancelFn:Q,requestAnimFrame:me,cancelAnimFrame:Be};function Pt(){}Pt.extend=function(r){var o=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,c=a(u);c.constructor=o,o.prototype=c;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(o[f]=this[f]);return r.statics&&s(o,r.statics),r.includes&&(ou(r.includes),s.apply(null,[c].concat(r.includes))),s(c,r),delete c.statics,delete c.includes,c.options&&(c.options=u.options?a(u.options):{},s(c.options,r.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,y=c._initHooks.length;_<y;_++)c._initHooks[_].call(this)}},o},Pt.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},Pt.mergeOptions=function(r){return s(this.prototype.options,r),this},Pt.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ou(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=C(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ge={on:function(r,o,u){if(typeof r=="object")for(var c in r)this._on(c,r[c],o);else{r=k(r);for(var f=0,_=r.length;f<_;f++)this._on(r[f],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var c in r)this._off(c,r[c],o);else{r=k(r);for(var f=arguments.length===1,_=0,y=r.length;_<y;_++)f?this._off(r[_]):this._off(r[_],o,u)}return this},_on:function(r,o,u,c){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var f={fn:o,ctx:u};c&&(f.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(f)}},_off:function(r,o,u){var c,f,_;if(this._events&&(c=this._events[r],!!c)){if(arguments.length===1){if(this._firingCount)for(f=0,_=c.length;f<_;f++)c[f].fn=m;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var y=this._listens(r,o,u);if(y!==!1){var S=c[y];this._firingCount&&(S.fn=m,this._events[r]=c=c.slice()),c.splice(y,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var c=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var f=this._events[r];if(f){this._firingCount=this._firingCount+1||1;for(var _=0,y=f.length;_<y;_++){var S=f[_],I=S.fn;S.once&&this.off(r,I,S.ctx),I.call(S.ctx||this,c)}this._firingCount--}}return u&&this._propagateEvent(c),this},listens:function(r,o,u,c){typeof r!="string"&&console.warn('"string" type argument expected');var f=o;typeof o!="function"&&(c=!!o,f=void 0,u=void 0);var _=this._events&&this._events[r];if(_&&_.length&&this._listens(r,f,u)!==!1)return!0;if(c){for(var y in this._eventParents)if(this._eventParents[y].listens(r,o,u,c))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var c=this._events[r]||[];if(!o)return!!c.length;u===this&&(u=void 0);for(var f=0,_=c.length;f<_;f++)if(c[f].fn===o&&c[f].ctx===u)return f;return!1},once:function(r,o,u){if(typeof r=="object")for(var c in r)this._on(c,r[c],o,!0);else{r=k(r);for(var f=0,_=r.length;f<_;f++)this._on(r[f],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Ge.addEventListener=Ge.on,Ge.removeEventListener=Ge.clearAllEventListeners=Ge.off,Ge.addOneTimeEventListener=Ge.once,Ge.fireEvent=Ge.fire,Ge.hasEventListeners=Ge.listens;var ln=Pt.extend(Ge);function x(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var K=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(r){return this.clone()._add(M(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(M(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new x(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new x(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(r){r=M(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=M(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=M(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function M(r,o,u){return r instanceof x?r:C(r)?new x(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new x(r.x,r.y):new x(r,o,u)}function G(r,o){if(r)for(var u=o?[r,o]:r,c=0,f=u.length;c<f;c++)this.extend(u[c])}G.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof x||typeof r[0]=="number"||"x"in r)o=u=M(r);else if(r=oe(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof x?r=M(r):r=oe(r),r instanceof G?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=oe(r);var o=this.min,u=this.max,c=r.min,f=r.max,_=f.x>=o.x&&c.x<=u.x,y=f.y>=o.y&&c.y<=u.y;return _&&y},overlaps:function(r){r=oe(r);var o=this.min,u=this.max,c=r.min,f=r.max,_=f.x>o.x&&c.x<u.x,y=f.y>o.y&&c.y<u.y;return _&&y},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,c=Math.abs(o.x-u.x)*r,f=Math.abs(o.y-u.y)*r;return oe(M(o.x-c,o.y-f),M(u.x+c,u.y+f))},equals:function(r){return r?(r=oe(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function oe(r,o){return!r||r instanceof G?r:new G(r,o)}function be(r,o){if(r)for(var u=o?[r,o]:r,c=0,f=u.length;c<f;c++)this.extend(u[c])}be.prototype={extend:function(r){var o=this._southWest,u=this._northEast,c,f;if(r instanceof le)c=r,f=r;else if(r instanceof be){if(c=r._southWest,f=r._northEast,!c||!f)return this}else return r?this.extend($(r)||fe(r)):this;return!o&&!u?(this._southWest=new le(c.lat,c.lng),this._northEast=new le(f.lat,f.lng)):(o.lat=Math.min(c.lat,o.lat),o.lng=Math.min(c.lng,o.lng),u.lat=Math.max(f.lat,u.lat),u.lng=Math.max(f.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,c=Math.abs(o.lat-u.lat)*r,f=Math.abs(o.lng-u.lng)*r;return new be(new le(o.lat-c,o.lng-f),new le(u.lat+c,u.lng+f))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof le||"lat"in r?r=$(r):r=fe(r);var o=this._southWest,u=this._northEast,c,f;return r instanceof be?(c=r.getSouthWest(),f=r.getNorthEast()):c=f=r,c.lat>=o.lat&&f.lat<=u.lat&&c.lng>=o.lng&&f.lng<=u.lng},intersects:function(r){r=fe(r);var o=this._southWest,u=this._northEast,c=r.getSouthWest(),f=r.getNorthEast(),_=f.lat>=o.lat&&c.lat<=u.lat,y=f.lng>=o.lng&&c.lng<=u.lng;return _&&y},overlaps:function(r){r=fe(r);var o=this._southWest,u=this._northEast,c=r.getSouthWest(),f=r.getNorthEast(),_=f.lat>o.lat&&c.lat<u.lat,y=f.lng>o.lng&&c.lng<u.lng;return _&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=fe(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(r,o){return r instanceof be?r:new be(r,o)}function le(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}le.prototype={equals:function(r,o){if(!r)return!1;r=$(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+v(this.lat,r)+", "+v(this.lng,r)+")"},distanceTo:function(r){return On.distance(this,$(r))},wrap:function(){return On.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return fe([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function $(r,o,u){return r instanceof le?r:C(r)&&typeof r[0]!="object"?r.length===3?new le(r[0],r[1],r[2]):r.length===2?new le(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new le(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new le(r,o,u)}var ut={latLngToPoint:function(r,o){var u=this.projection.project(r),c=this.scale(o);return this.transformation._transform(u,c)},pointToLatLng:function(r,o){var u=this.scale(o),c=this.transformation.untransform(r,u);return this.projection.unproject(c)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),c=this.transformation.transform(o.min,u),f=this.transformation.transform(o.max,u);return new G(c,f)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?g(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?g(r.lat,this.wrapLat,!0):r.lat,c=r.alt;return new le(u,o,c)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),c=o.lat-u.lat,f=o.lng-u.lng;if(c===0&&f===0)return r;var _=r.getSouthWest(),y=r.getNorthEast(),S=new le(_.lat-c,_.lng-f),I=new le(y.lat-c,y.lng-f);return new be(S,I)}},On=s({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,c=r.lat*u,f=o.lat*u,_=Math.sin((o.lat-r.lat)*u/2),y=Math.sin((o.lng-r.lng)*u/2),S=_*_+Math.cos(c)*Math.cos(f)*y*y,I=2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S));return this.R*I}}),Af=6378137,au={R:Af,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,c=Math.max(Math.min(u,r.lat),-u),f=Math.sin(c*o);return new x(this.R*r.lng*o,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(r){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=Af*Math.PI;return new G([-r,-r],[r,r])}()};function lu(r,o,u,c){if(C(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=c}lu.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new x((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function Qr(r,o,u,c){return new lu(r,o,u,c)}var uu=s({},On,{code:"EPSG:3857",projection:au,transformation:function(){var r=.5/(Math.PI*au.R);return Qr(r,.5,-r,.5)}()}),z0=s({},uu,{code:"EPSG:900913"});function Mf(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function bf(r,o){var u="",c,f,_,y,S,I;for(c=0,_=r.length;c<_;c++){for(S=r[c],f=0,y=S.length;f<y;f++)I=S[f],u+=(f?"L":"M")+I.x+" "+I.y;u+=o?H.svg?"z":"x":""}return u||"M0 0"}var cu=document.documentElement.style,bo="ActiveXObject"in window,F0=bo&&!document.addEventListener,Df="msLaunchUri"in navigator&&!("documentMode"in document),hu=Yt("webkit"),zf=Yt("android"),Ff=Yt("android 2")||Yt("android 3"),B0=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),U0=zf&&Yt("Google")&&B0<537&&!("AudioNode"in window),du=!!window.opera,Bf=!Df&&Yt("chrome"),Uf=Yt("gecko")&&!hu&&!du&&!bo,W0=!Bf&&Yt("safari"),Wf=Yt("phantom"),Hf="OTransition"in cu,H0=navigator.platform.indexOf("Win")===0,Vf=bo&&"transition"in cu,fu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ff,jf="MozPerspective"in cu,V0=!window.L_DISABLE_3D&&(Vf||fu||jf)&&!Hf&&!Wf,Xr=typeof orientation<"u"||Yt("mobile"),j0=Xr&&hu,Z0=Xr&&fu,Zf=!window.PointerEvent&&window.MSPointerEvent,Gf=!!(window.PointerEvent||Zf),Kf="ontouchstart"in window||!!window.TouchEvent,G0=!window.L_NO_TOUCH&&(Kf||Gf),K0=Xr&&du,q0=Xr&&Uf,$0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Y0=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",m,o),window.removeEventListener("testPassiveEventSupport",m,o)}catch{}return r}(),Q0=function(){return!!document.createElement("canvas").getContext}(),pu=!!(document.createElementNS&&Mf("svg").createSVGRect),X0=!!pu&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),J0=!pu&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),eE=navigator.platform.indexOf("Mac")===0,tE=navigator.platform.indexOf("Linux")===0;function Yt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var H={ie:bo,ielt9:F0,edge:Df,webkit:hu,android:zf,android23:Ff,androidStock:U0,opera:du,chrome:Bf,gecko:Uf,safari:W0,phantom:Wf,opera12:Hf,win:H0,ie3d:Vf,webkit3d:fu,gecko3d:jf,any3d:V0,mobile:Xr,mobileWebkit:j0,mobileWebkit3d:Z0,msPointer:Zf,pointer:Gf,touch:G0,touchNative:Kf,mobileOpera:K0,mobileGecko:q0,retina:$0,passiveEvents:Y0,canvas:Q0,svg:pu,vml:J0,inlineSvg:X0,mac:eE,linux:tE},qf=H.msPointer?"MSPointerDown":"pointerdown",$f=H.msPointer?"MSPointerMove":"pointermove",Yf=H.msPointer?"MSPointerUp":"pointerup",Qf=H.msPointer?"MSPointerCancel":"pointercancel",_u={touchstart:qf,touchmove:$f,touchend:Yf,touchcancel:Qf},Xf={touchstart:aE,touchmove:Do,touchend:Do,touchcancel:Do},qi={},Jf=!1;function nE(r,o,u){return o==="touchstart"&&oE(),Xf[o]?(u=Xf[o].bind(this,u),r.addEventListener(_u[o],u,!1),u):(console.warn("wrong event specified:",o),m)}function iE(r,o,u){if(!_u[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(_u[o],u,!1)}function rE(r){qi[r.pointerId]=r}function sE(r){qi[r.pointerId]&&(qi[r.pointerId]=r)}function ep(r){delete qi[r.pointerId]}function oE(){Jf||(document.addEventListener(qf,rE,!0),document.addEventListener($f,sE,!0),document.addEventListener(Yf,ep,!0),document.addEventListener(Qf,ep,!0),Jf=!0)}function Do(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in qi)o.touches.push(qi[u]);o.changedTouches=[o],r(o)}}function aE(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ke(o),Do(r,o)}function lE(r){var o={},u,c;for(c in r)u=r[c],o[c]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var uE=200;function cE(r,o){r.addEventListener("dblclick",o);var u=0,c;function f(_){if(_.detail!==1){c=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var y=sp(_);if(!(y.some(function(I){return I instanceof HTMLLabelElement&&I.attributes.for})&&!y.some(function(I){return I instanceof HTMLInputElement||I instanceof HTMLSelectElement}))){var S=Date.now();S-u<=uE?(c++,c===2&&o(lE(_))):c=1,u=S}}}return r.addEventListener("click",f),{dblclick:o,simDblclick:f}}function hE(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var mu=Bo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jr=Bo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tp=Jr==="webkitTransition"||Jr==="OTransition"?Jr+"End":"transitionend";function np(r){return typeof r=="string"?document.getElementById(r):r}function es(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(r,null);u=c?c[o]:null}return u==="auto"?null:u}function ue(r,o,u){var c=document.createElement(r);return c.className=o||"",u&&u.appendChild(c),c}function Te(r){var o=r.parentNode;o&&o.removeChild(r)}function zo(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function $i(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Yi(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function gu(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=Fo(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function X(r,o){if(r.classList!==void 0)for(var u=k(o),c=0,f=u.length;c<f;c++)r.classList.add(u[c]);else if(!gu(r,o)){var _=Fo(r);vu(r,(_?_+" ":"")+o)}}function Re(r,o){r.classList!==void 0?r.classList.remove(o):vu(r,T((" "+Fo(r)+" ").replace(" "+o+" "," ")))}function vu(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Fo(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function xt(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&dE(r,o)}function dE(r,o){var u=!1,c="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(c)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+c+"(opacity="+o+")"}function Bo(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function mi(r,o,u){var c=o||new x(0,0);r.style[mu]=(H.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(u?" scale("+u+")":"")}function Oe(r,o){r._leaflet_pos=o,H.any3d?mi(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function gi(r){return r._leaflet_pos||new x(0,0)}var ts,ns,yu;if("onselectstart"in document)ts=function(){Y(window,"selectstart",Ke)},ns=function(){ge(window,"selectstart",Ke)};else{var is=Bo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ts=function(){if(is){var r=document.documentElement.style;yu=r[is],r[is]="none"}},ns=function(){is&&(document.documentElement.style[is]=yu,yu=void 0)}}function wu(){Y(window,"dragstart",Ke)}function Eu(){ge(window,"dragstart",Ke)}var Uo,Cu;function Su(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Wo(),Uo=r,Cu=r.style.outlineStyle,r.style.outlineStyle="none",Y(window,"keydown",Wo))}function Wo(){Uo&&(Uo.style.outlineStyle=Cu,Uo=void 0,Cu=void 0,ge(window,"keydown",Wo))}function ip(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Tu(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var fE={__proto__:null,TRANSFORM:mu,TRANSITION:Jr,TRANSITION_END:tp,get:np,getStyle:es,create:ue,remove:Te,empty:zo,toFront:$i,toBack:Yi,hasClass:gu,addClass:X,removeClass:Re,setClass:vu,getClass:Fo,setOpacity:xt,testProp:Bo,setTransform:mi,setPosition:Oe,getPosition:gi,get disableTextSelection(){return ts},get enableTextSelection(){return ns},disableImageDrag:wu,enableImageDrag:Eu,preventOutline:Su,restoreOutline:Wo,getSizedParentNode:ip,getScale:Tu};function Y(r,o,u,c){if(o&&typeof o=="object")for(var f in o)ku(r,f,o[f],u);else{o=k(o);for(var _=0,y=o.length;_<y;_++)ku(r,o[_],u,c)}return this}var Qt="_leaflet_events";function ge(r,o,u,c){if(arguments.length===1)rp(r),delete r[Qt];else if(o&&typeof o=="object")for(var f in o)Pu(r,f,o[f],u);else if(o=k(o),arguments.length===2)rp(r,function(S){return N(o,S)!==-1});else for(var _=0,y=o.length;_<y;_++)Pu(r,o[_],u,c);return this}function rp(r,o){for(var u in r[Qt]){var c=u.split(/\d/)[0];(!o||o(c))&&Pu(r,c,null,null,u)}}var Iu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ku(r,o,u,c){var f=o+d(u)+(c?"_"+d(c):"");if(r[Qt]&&r[Qt][f])return this;var _=function(S){return u.call(c||r,S||window.event)},y=_;!H.touchNative&&H.pointer&&o.indexOf("touch")===0?_=nE(r,o,_):H.touch&&o==="dblclick"?_=cE(r,_):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(Iu[o]||o,_,H.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(_=function(S){S=S||window.event,Lu(r,S)&&y(S)},r.addEventListener(Iu[o],_,!1)):r.addEventListener(o,y,!1):r.attachEvent("on"+o,_),r[Qt]=r[Qt]||{},r[Qt][f]=_}function Pu(r,o,u,c,f){f=f||o+d(u)+(c?"_"+d(c):"");var _=r[Qt]&&r[Qt][f];if(!_)return this;!H.touchNative&&H.pointer&&o.indexOf("touch")===0?iE(r,o,_):H.touch&&o==="dblclick"?hE(r,_):"removeEventListener"in r?r.removeEventListener(Iu[o]||o,_,!1):r.detachEvent("on"+o,_),r[Qt][f]=null}function vi(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function xu(r){return ku(r,"wheel",vi),this}function rs(r){return Y(r,"mousedown touchstart dblclick contextmenu",vi),r._leaflet_disable_click=!0,this}function Ke(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function yi(r){return Ke(r),vi(r),this}function sp(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function op(r,o){if(!o)return new x(r.clientX,r.clientY);var u=Tu(o),c=u.boundingClientRect;return new x((r.clientX-c.left)/u.x-o.clientLeft,(r.clientY-c.top)/u.y-o.clientTop)}var pE=H.linux&&H.chrome?window.devicePixelRatio:H.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ap(r){return H.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/pE:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Lu(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var _E={__proto__:null,on:Y,off:ge,stopPropagation:vi,disableScrollPropagation:xu,disableClickPropagation:rs,preventDefault:Ke,stop:yi,getPropagationPath:sp,getMousePosition:op,getWheelDelta:ap,isExternalTarget:Lu,addListener:Y,removeListener:ge},lp=ln.extend({run:function(r,o,u,c){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=gi(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),Oe(this._el,u),this.fire("step")},_complete:function(){Be(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),se=ln.extend({options:{crs:uu,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=P(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView($(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jr&&H.any3d&&!H.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Y(this._proxy,tp,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter($(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var c=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var c=this.getZoomScale(o),f=this.getSize().divideBy(2),_=r instanceof x?r:this.latLngToContainerPoint(r),y=_.subtract(f).multiplyBy(1-1/c),S=this.containerPointToLatLng(f.add(y));return this.setView(S,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():fe(r);var u=M(o.paddingTopLeft||o.padding||[0,0]),c=M(o.paddingBottomRight||o.padding||[0,0]),f=this.getBoundsZoom(r,!1,u.add(c));if(f=typeof o.maxZoom=="number"?Math.min(o.maxZoom,f):f,f===1/0)return{center:r.getCenter(),zoom:f};var _=c.subtract(u).divideBy(2),y=this.project(r.getSouthWest(),f),S=this.project(r.getNorthEast(),f),I=this.unproject(y.add(S).divideBy(2).add(_),f);return{center:I,zoom:f}},fitBounds:function(r,o){if(r=fe(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=M(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lp,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){X(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!H.any3d)return this.setView(r,o,u);this._stop();var c=this.project(this.getCenter()),f=this.project(r),_=this.getSize(),y=this._zoom;r=$(r),o=o===void 0?y:o;var S=Math.max(_.x,_.y),I=S*this.getZoomScale(y,o),R=f.distanceTo(c)||1,D=1.42,j=D*D;function J(Ae){var Jo=Ae?-1:1,iC=Ae?I:S,rC=I*I-S*S+Jo*j*j*R*R,sC=2*iC*j*R,Uu=rC/sC,Hp=Math.sqrt(Uu*Uu+1)-Uu,oC=Hp<1e-9?-18:Math.log(Hp);return oC}function rt(Ae){return(Math.exp(Ae)-Math.exp(-Ae))/2}function Ue(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}function Rt(Ae){return rt(Ae)/Ue(Ae)}var ct=J(0);function nr(Ae){return S*(Ue(ct)/Ue(ct+D*Ae))}function JE(Ae){return S*(Ue(ct)*Rt(ct+D*Ae)-rt(ct))/j}function eC(Ae){return 1-Math.pow(1-Ae,1.5)}var tC=Date.now(),Up=(J(1)-ct)/D,nC=u.duration?1e3*u.duration:1e3*Up*.8;function Wp(){var Ae=(Date.now()-tC)/nC,Jo=eC(Ae)*Up;Ae<=1?(this._flyToFrame=me(Wp,this),this._move(this.unproject(c.add(f.subtract(c).multiplyBy(JE(Jo)/R)),y),this.getScaleZoom(S/nr(Jo),y),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Wp.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=fe(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),c=this._limitCenter(u,this._zoom,fe(r));return u.equals(c)||this.panTo(c,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=M(o.paddingTopLeft||o.padding||[0,0]),c=M(o.paddingBottomRight||o.padding||[0,0]),f=this.project(this.getCenter()),_=this.project(r),y=this.getPixelBounds(),S=oe([y.min.add(u),y.max.subtract(c)]),I=S.getSize();if(!S.contains(_)){this._enforcingBounds=!0;var R=_.subtract(S.getCenter()),D=S.extend(_).getSize().subtract(I);f.x+=R.x<0?-D.x:D.x,f.y+=R.y<0?-D.y:D.y,this.panTo(this.unproject(f),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),c=o.divideBy(2).round(),f=u.divideBy(2).round(),_=c.subtract(f);return!_.x&&!_.y?this:(r.animate&&r.pan?this.panBy(_):(r.pan&&this._rawPanBy(_),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,c=new le(o,u),f=c.toBounds(r.coords.accuracy*2),_=this._locateOptions;if(_.setView){var y=this.getBoundsZoom(f);this.setView(c,_.maxZoom?Math.min(y,_.maxZoom):y)}var S={latlng:c,bounds:f,timestamp:r.timestamp};for(var I in r.coords)typeof r.coords[I]=="number"&&(S[I]=r.coords[I]);this.fire("locationfound",S)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Te(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Be(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Te(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),c=ue("div",u,o||this._mapPane);return r&&(this._panes[r]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new be(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=fe(r),u=M(u||[0,0]);var c=this.getZoom()||0,f=this.getMinZoom(),_=this.getMaxZoom(),y=r.getNorthWest(),S=r.getSouthEast(),I=this.getSize().subtract(u),R=oe(this.project(S,c),this.project(y,c)).getSize(),D=H.any3d?this.options.zoomSnap:1,j=I.x/R.x,J=I.y/R.y,rt=o?Math.max(j,J):Math.min(j,J);return c=this.getScaleZoom(rt,c),D&&(c=Math.round(c/(D/100))*(D/100),c=o?Math.ceil(c/D)*D:Math.floor(c/D)*D),Math.max(f,Math.min(_,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new G(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var c=u.zoom(r*u.scale(o));return isNaN(c)?1/0:c},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint($(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(M(r),o)},layerPointToLatLng:function(r){var o=M(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project($(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng($(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(fe(r))},distance:function(r,o){return this.options.crs.distance($(r),$(o))},containerPointToLayerPoint:function(r){return M(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return M(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(M(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(r)))},mouseEventToContainerPoint:function(r){return op(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=np(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Y(o,"scroll",this._onScroll,this),this._containerId=d(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&H.any3d,X(r,"leaflet-container"+(H.touch?" leaflet-touch":"")+(H.retina?" leaflet-retina":"")+(H.ielt9?" leaflet-oldie":"")+(H.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=es(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Oe(this._mapPane,new x(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(X(r.markerPane,"leaflet-zoom-hide"),X(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){Oe(this._mapPane,new x(0,0));var c=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var f=this._zoom!==o;this._moveStart(f,u)._move(r,o)._moveEnd(f),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,c){o===void 0&&(o=this._zoom);var f=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),c?u&&u.pinch&&this.fire("zoom",u):((f||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Be(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Oe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var o=r?ge:Y;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),H.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Be(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],c,f=o==="mouseout"||o==="mouseover",_=r.target||r.srcElement,y=!1;_;){if(c=this._targets[d(_)],c&&(o==="click"||o==="preclick")&&this._draggableMoved(c)){y=!0;break}if(c&&c.listens(o,!0)&&(f&&!Lu(_,r)||(u.push(c),f))||_===this._container)break;_=_.parentNode}return!u.length&&!y&&!f&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&Su(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var c=s({},r);c.type="preclick",this._fireDOMEvent(c,c.type,u)}var f=this._findEventTargets(r,o);if(u){for(var _=[],y=0;y<u.length;y++)u[y].listens(o,!0)&&_.push(u[y]);f=_.concat(f)}if(f.length){o==="contextmenu"&&Ke(r);var S=f[0],I={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var R=S.getLatLng&&(!S._radius||S._radius<=10);I.containerPoint=R?this.latLngToContainerPoint(S.getLatLng()):this.mouseEventToContainerPoint(r),I.layerPoint=this.containerPointToLayerPoint(I.containerPoint),I.latlng=R?S.getLatLng():this.layerPointToLatLng(I.layerPoint)}for(y=0;y<f.length;y++)if(f[y].fire(o,I,!0),I.originalEvent._stopped||f[y].options.bubblingMouseEvents===!1&&N(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return gi(this._mapPane)||new x(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var c=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(c)},_latLngBoundsToNewLayerBounds:function(r,o,u){var c=this._getNewPixelOrigin(u,o);return oe([this.project(r.getSouthWest(),o)._subtract(c),this.project(r.getNorthWest(),o)._subtract(c),this.project(r.getSouthEast(),o)._subtract(c),this.project(r.getNorthEast(),o)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var c=this.project(r,o),f=this.getSize().divideBy(2),_=new G(c.subtract(f),c.add(f)),y=this._getBoundsOffset(_,u,o);return Math.abs(y.x)<=1&&Math.abs(y.y)<=1?r:this.unproject(c.add(y),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),c=new G(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(c,o))},_getBoundsOffset:function(r,o,u){var c=oe(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),f=c.min.subtract(r.min),_=c.max.subtract(r.max),y=this._rebound(f.x,-_.x),S=this._rebound(f.y,-_.y);return new x(y,S)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),c=H.any3d?this.options.zoomSnap:1;return c&&(r=Math.round(r/c)*c),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=mu,c=this._proxy.style[u];mi(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),c===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Te(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();mi(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(o),f=this._getCenterOffset(r)._divideBy(1-1/c);return u.animate!==!0&&!this.getSize().contains(f)?!1:(me(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,c){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,X(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mE(r,o){return new se(r,o)}var zt=Pt.extend({options:{position:"topright"},initialize:function(r){P(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),c=r._controlCorners[u];return X(o,"leaflet-control"),u.indexOf("bottom")!==-1?c.insertBefore(o,c.firstChild):c.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Te(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ss=function(r){return new zt(r)};se.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=ue("div",o+"control-container",this._container);function c(f,_){var y=o+f+" "+o+_;r[f+_]=ue("div",y,u)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Te(this._controlCorners[r]);Te(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var up=zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,c){return u<c?-1:c<u?1:0}},initialize:function(r,o,u){P(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in r)this._addLayer(r[c],c);for(c in o)this._addLayer(o[c],c,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return zt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(d(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){X(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(X(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=ue("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),rs(o),xu(o);var c=this._section=ue("section",r+"-list");u&&(this._map.on("click",this.collapse,this),Y(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=ue("a",r+"-toggle",o);f.href="#",f.title="Layers",f.setAttribute("role","button"),Y(f,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){Ke(_),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=ue("div",r+"-base",c),this._separator=ue("div",r+"-separator",c),this._overlaysList=ue("div",r+"-overlays",c),o.appendChild(c)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&d(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(c,f){return this.options.sortFunction(c.layer,f.layer,c.name,f.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zo(this._baseLayersList),zo(this._overlaysList),this._layerControlInputs=[];var r,o,u,c,f=0;for(u=0;u<this._layers.length;u++)c=this._layers[u],this._addItem(c),o=o||c.overlay,r=r||!c.overlay,f+=c.overlay?0:1;return this.options.hideSingleBase&&(r=r&&f>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(d(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=u,c.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),c;r.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=u):c=this._createRadioElement("leaflet-base-layers_"+d(this),u),this._layerControlInputs.push(c),c.layerId=d(r.layer),Y(c,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+r.name;var _=document.createElement("span");o.appendChild(_),_.appendChild(c),_.appendChild(f);var y=r.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,c=[],f=[];this._handlingClick=!0;for(var _=r.length-1;_>=0;_--)o=r[_],u=this._getLayer(o.layerId).layer,o.checked?c.push(u):o.checked||f.push(u);for(_=0;_<f.length;_++)this._map.hasLayer(f[_])&&this._map.removeLayer(f[_]);for(_=0;_<c.length;_++)this._map.hasLayer(c[_])||this._map.addLayer(c[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,c=this._map.getZoom(),f=r.length-1;f>=0;f--)o=r[f],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&c<u.options.minZoom||u.options.maxZoom!==void 0&&c>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Y(r,"click",Ke),this.expand();var o=this;setTimeout(function(){ge(r,"click",Ke),o._preventClick=!1})}}),gE=function(r,o,u){return new up(r,o,u)},Ru=zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=ue("div",o+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,c,f){var _=ue("a",u,c);return _.innerHTML=r,_.href="#",_.title=o,_.setAttribute("role","button"),_.setAttribute("aria-label",o),rs(_),Y(_,"click",yi),Y(_,"click",f,this),Y(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Re(this._zoomInButton,o),Re(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(X(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(X(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});se.mergeOptions({zoomControl:!0}),se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ru,this.addControl(this.zoomControl))});var vE=function(r){return new Ru(r)},cp=zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=ue("div",o),c=this.options;return this._addScales(c,o+"-line",u),r.on(c.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=ue("div",o,u)),r.imperial&&(this._iScale=ue("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,c,f;o>5280?(u=o/5280,c=this._getRoundNum(u),this._updateScale(this._iScale,c+" mi",c/u)):(f=this._getRoundNum(o),this._updateScale(this._iScale,f+" ft",f/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),yE=function(r){return new cp(r)},wE='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nu=zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(H.inlineSvg?wE+" ":"")+"Leaflet</a>"},initialize:function(r){P(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),rs(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});se.mergeOptions({attributionControl:!0}),se.addInitHook(function(){this.options.attributionControl&&new Nu().addTo(this)});var EE=function(r){return new Nu(r)};zt.Layers=up,zt.Zoom=Ru,zt.Scale=cp,zt.Attribution=Nu,ss.layers=gE,ss.zoom=vE,ss.scale=yE,ss.attribution=EE;var Xt=Pt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xt.addTo=function(r,o){return r.addHandler(o,this),this};var CE={Events:Ge},hp=H.touch?"touchstart mousedown":"mousedown",An=ln.extend({options:{clickTolerance:3},initialize:function(r,o,u,c){P(this,c),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(Y(this._dragStartTarget,hp,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(An._dragging===this&&this.finishDrag(!0),ge(this._dragStartTarget,hp,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!gu(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){An._dragging===this&&this.finishDrag();return}if(!(An._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(An._dragging=this,this._preventOutline&&Su(this._element),wu(),ts(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=ip(this._element);this._startPoint=new x(o.clientX,o.clientY),this._startPos=gi(this._element),this._parentScale=Tu(u);var c=r.type==="mousedown";Y(document,c?"mousemove":"touchmove",this._onMove,this),Y(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new x(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Ke(r),this._moved||(this.fire("dragstart"),this._moved=!0,X(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),X(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Oe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Re(document.body,"leaflet-dragging"),this._lastTarget&&(Re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ge(document,"mousemove touchmove",this._onMove,this),ge(document,"mouseup touchend touchcancel",this._onUp,this),Eu(),ns();var o=this._moved&&this._moving;this._moving=!1,An._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function dp(r,o,u){var c,f=[1,4,2,8],_,y,S,I,R,D,j,J;for(_=0,D=r.length;_<D;_++)r[_]._code=wi(r[_],o);for(S=0;S<4;S++){for(j=f[S],c=[],_=0,D=r.length,y=D-1;_<D;y=_++)I=r[_],R=r[y],I._code&j?R._code&j||(J=Ho(R,I,j,o,u),J._code=wi(J,o),c.push(J)):(R._code&j&&(J=Ho(R,I,j,o,u),J._code=wi(J,o),c.push(J)),c.push(I));r=c}return r}function fp(r,o){var u,c,f,_,y,S,I,R,D;if(!r||r.length===0)throw new Error("latlngs not passed");Lt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var j=$([0,0]),J=fe(r),rt=J.getNorthWest().distanceTo(J.getSouthWest())*J.getNorthEast().distanceTo(J.getNorthWest());rt<1700&&(j=Ou(r));var Ue=r.length,Rt=[];for(u=0;u<Ue;u++){var ct=$(r[u]);Rt.push(o.project($([ct.lat-j.lat,ct.lng-j.lng])))}for(S=I=R=0,u=0,c=Ue-1;u<Ue;c=u++)f=Rt[u],_=Rt[c],y=f.y*_.x-_.y*f.x,I+=(f.x+_.x)*y,R+=(f.y+_.y)*y,S+=y*3;S===0?D=Rt[0]:D=[I/S,R/S];var nr=o.unproject(M(D));return $([nr.lat+j.lat,nr.lng+j.lng])}function Ou(r){for(var o=0,u=0,c=0,f=0;f<r.length;f++){var _=$(r[f]);o+=_.lat,u+=_.lng,c++}return $([o/c,u/c])}var SE={__proto__:null,clipPolygon:dp,polygonCenter:fp,centroid:Ou};function pp(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=kE(r,u),r=IE(r,u),r}function _p(r,o,u){return Math.sqrt(os(r,o,u,!0))}function TE(r,o,u){return os(r,o,u)}function IE(r,o){var u=r.length,c=typeof Uint8Array<"u"?Uint8Array:Array,f=new c(u);f[0]=f[u-1]=1,Au(r,f,o,0,u-1);var _,y=[];for(_=0;_<u;_++)f[_]&&y.push(r[_]);return y}function Au(r,o,u,c,f){var _=0,y,S,I;for(S=c+1;S<=f-1;S++)I=os(r[S],r[c],r[f],!0),I>_&&(y=S,_=I);_>u&&(o[y]=1,Au(r,o,u,c,y),Au(r,o,u,y,f))}function kE(r,o){for(var u=[r[0]],c=1,f=0,_=r.length;c<_;c++)PE(r[c],r[f])>o&&(u.push(r[c]),f=c);return f<_-1&&u.push(r[_-1]),u}var mp;function gp(r,o,u,c,f){var _=c?mp:wi(r,u),y=wi(o,u),S,I,R;for(mp=y;;){if(!(_|y))return[r,o];if(_&y)return!1;S=_||y,I=Ho(r,o,S,u,f),R=wi(I,u),S===_?(r=I,_=R):(o=I,y=R)}}function Ho(r,o,u,c,f){var _=o.x-r.x,y=o.y-r.y,S=c.min,I=c.max,R,D;return u&8?(R=r.x+_*(I.y-r.y)/y,D=I.y):u&4?(R=r.x+_*(S.y-r.y)/y,D=S.y):u&2?(R=I.x,D=r.y+y*(I.x-r.x)/_):u&1&&(R=S.x,D=r.y+y*(S.x-r.x)/_),new x(R,D,f)}function wi(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function PE(r,o){var u=o.x-r.x,c=o.y-r.y;return u*u+c*c}function os(r,o,u,c){var f=o.x,_=o.y,y=u.x-f,S=u.y-_,I=y*y+S*S,R;return I>0&&(R=((r.x-f)*y+(r.y-_)*S)/I,R>1?(f=u.x,_=u.y):R>0&&(f+=y*R,_+=S*R)),y=r.x-f,S=r.y-_,c?y*y+S*S:new x(f,_)}function Lt(r){return!C(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function vp(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Lt(r)}function yp(r,o){var u,c,f,_,y,S,I,R;if(!r||r.length===0)throw new Error("latlngs not passed");Lt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var D=$([0,0]),j=fe(r),J=j.getNorthWest().distanceTo(j.getSouthWest())*j.getNorthEast().distanceTo(j.getNorthWest());J<1700&&(D=Ou(r));var rt=r.length,Ue=[];for(u=0;u<rt;u++){var Rt=$(r[u]);Ue.push(o.project($([Rt.lat-D.lat,Rt.lng-D.lng])))}for(u=0,c=0;u<rt-1;u++)c+=Ue[u].distanceTo(Ue[u+1])/2;if(c===0)R=Ue[0];else for(u=0,_=0;u<rt-1;u++)if(y=Ue[u],S=Ue[u+1],f=y.distanceTo(S),_+=f,_>c){I=(_-c)/f,R=[S.x-I*(S.x-y.x),S.y-I*(S.y-y.y)];break}var ct=o.unproject(M(R));return $([ct.lat+D.lat,ct.lng+D.lng])}var xE={__proto__:null,simplify:pp,pointToSegmentDistance:_p,closestPointOnSegment:TE,clipSegment:gp,_getEdgeIntersection:Ho,_getBitCode:wi,_sqClosestPointOnSegment:os,isFlat:Lt,_flat:vp,polylineCenter:yp},Mu={project:function(r){return new x(r.lng,r.lat)},unproject:function(r){return new le(r.y,r.x)},bounds:new G([-180,-90],[180,90])},bu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,c=r.lat*o,f=this.R_MINOR/u,_=Math.sqrt(1-f*f),y=_*Math.sin(c),S=Math.tan(Math.PI/4-c/2)/Math.pow((1-y)/(1+y),_/2);return c=-u*Math.log(Math.max(S,1e-10)),new x(r.lng*o*u,c)},unproject:function(r){for(var o=180/Math.PI,u=this.R,c=this.R_MINOR/u,f=Math.sqrt(1-c*c),_=Math.exp(-r.y/u),y=Math.PI/2-2*Math.atan(_),S=0,I=.1,R;S<15&&Math.abs(I)>1e-7;S++)R=f*Math.sin(y),R=Math.pow((1-R)/(1+R),f/2),I=Math.PI/2-2*Math.atan(_*R)-y,y+=I;return new le(y*o,r.x*o/u)}},LE={__proto__:null,LonLat:Mu,Mercator:bu,SphericalMercator:au},RE=s({},On,{code:"EPSG:3395",projection:bu,transformation:function(){var r=.5/(Math.PI*bu.R);return Qr(r,.5,-r,.5)}()}),wp=s({},On,{code:"EPSG:4326",projection:Mu,transformation:Qr(1/180,1,-1/180,.5)}),NE=s({},ut,{projection:Mu,transformation:Qr(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,c=o.lat-r.lat;return Math.sqrt(u*u+c*c)},infinite:!0});ut.Earth=On,ut.EPSG3395=RE,ut.EPSG3857=uu,ut.EPSG900913=z0,ut.EPSG4326=wp,ut.Simple=NE;var Ft=ln.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});se.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=d(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=d(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?C(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=d(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var c in this._zoomBoundLayers){var f=this._zoomBoundLayers[c].options;r=f.minZoom===void 0?r:Math.min(r,f.minZoom),o=f.maxZoom===void 0?o:Math.max(o,f.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qi=Ft.extend({initialize:function(r,o){P(this,o),this._layers={};var u,c;if(r)for(u=0,c=r.length;u<c;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,c;for(u in this._layers)c=this._layers[u],c[r]&&c[r].apply(c,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),OE=function(r,o){return new Qi(r,o)},un=Qi.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Qi.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Qi.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new be;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),AE=function(r,o){return new un(r,o)},Xi=Pt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){P(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(c,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(r,o){var u=this.options,c=u[o+"Size"];typeof c=="number"&&(c=[c,c]);var f=M(c),_=M(o==="shadow"&&u.shadowAnchor||u.iconAnchor||f&&f.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),_&&(r.style.marginLeft=-_.x+"px",r.style.marginTop=-_.y+"px"),f&&(r.style.width=f.x+"px",r.style.height=f.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return H.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function ME(r){return new Xi(r)}var as=Xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof as.imagePath!="string"&&(as.imagePath=this._detectIconPath()),(this.options.imagePath||as.imagePath)+Xi.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,c,f){var _=c.exec(u);return _&&_[f]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ue("div","leaflet-default-icon-path",document.body),o=es(r,"background-image")||es(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ep=Xt.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new An(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),X(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,c=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,_=gi(o._icon),y=u.getPixelBounds(),S=u.getPixelOrigin(),I=oe(y.min._subtract(S).add(f),y.max._subtract(S).subtract(f));if(!I.contains(_)){var R=M((Math.max(I.max.x,_.x)-I.max.x)/(y.max.x-I.max.x)-(Math.min(I.min.x,_.x)-I.min.x)/(y.min.x-I.min.x),(Math.max(I.max.y,_.y)-I.max.y)/(y.max.y-I.max.y)-(Math.min(I.min.y,_.y)-I.min.y)/(y.min.y-I.min.y)).multiplyBy(c);u.panBy(R,{animate:!1}),this._draggable._newPos._add(R),this._draggable._startPos._add(R),Oe(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=me(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Be(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,c=gi(o._icon),f=o._map.layerPointToLatLng(c);u&&Oe(u,c),o._latlng=f,r.latlng=f,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Be(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Vo=Ft.extend({options:{icon:new as,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){P(this,o),this._latlng=$(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=$(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),c=!1;u!==this._icon&&(this._icon&&this._removeIcon(),c=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),X(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(u,"focus",this._panOnFocus,this);var f=r.icon.createShadow(this._shadow),_=!1;f!==this._shadow&&(this._removeShadow(),_=!0),f&&(X(f,o),f.alt=""),this._shadow=f,r.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&_&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(this._icon,"focus",this._panOnFocus,this),Te(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Te(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Oe(this._icon,r),this._shadow&&Oe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(X(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ep)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ep(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&xt(this._icon,r),this._shadow&&xt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?M(o.iconSize):M(0,0),c=o.iconAnchor?M(o.iconAnchor):M(0,0);r.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:u.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bE(r,o){return new Vo(r,o)}var Mn=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return P(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jo=Mn.extend({options:{fill:!0,radius:10},initialize:function(r,o){P(this,o),this._latlng=$(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=$(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Mn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),c=[r+u,o+u];this._pxBounds=new G(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function DE(r,o){return new jo(r,o)}var Du=jo.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),P(this,o),this._latlng=$(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new be(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Mn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,c=u.options.crs;if(c.distance===On.distance){var f=Math.PI/180,_=this._mRadius/On.R/f,y=u.project([o+_,r]),S=u.project([o-_,r]),I=y.add(S).divideBy(2),R=u.unproject(I).lat,D=Math.acos((Math.cos(_*f)-Math.sin(o*f)*Math.sin(R*f))/(Math.cos(o*f)*Math.cos(R*f)))/f;(isNaN(D)||D===0)&&(D=_/Math.cos(Math.PI/180*o)),this._point=I.subtract(u.getPixelOrigin()),this._radius=isNaN(D)?0:I.x-u.project([R,r-D]).x,this._radiusY=I.y-y.y}else{var j=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(j).x}this._updateBounds()}});function zE(r,o,u){return new Du(r,o,u)}var cn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){P(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,c=os,f,_,y=0,S=this._parts.length;y<S;y++)for(var I=this._parts[y],R=1,D=I.length;R<D;R++){f=I[R-1],_=I[R];var j=c(r,f,_,!0);j<o&&(o=j,u=c(r,f,_))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yp(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=$(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new be,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Lt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=Lt(r),c=0,f=r.length;c<f;c++)u?(o[c]=$(r[c]),this._bounds.extend(o[c])):o[c]=this._convertLatLngs(r[c]);return o},_project:function(){var r=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new x(r,r);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var c=r[0]instanceof le,f=r.length,_,y;if(c){for(y=[],_=0;_<f;_++)y[_]=this._map.latLngToLayerPoint(r[_]),u.extend(y[_]);o.push(y)}else for(_=0;_<f;_++)this._projectLatlngs(r[_],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,c,f,_,y,S,I;for(u=0,f=0,_=this._rings.length;u<_;u++)for(I=this._rings[u],c=0,y=I.length;c<y-1;c++)S=gp(I[c],I[c+1],r,c,!0),S&&(o[f]=o[f]||[],o[f].push(S[0]),(S[1]!==I[c+1]||c===y-2)&&(o[f].push(S[1]),f++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,c=r.length;u<c;u++)r[u]=pp(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,c,f,_,y,S,I=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,_=this._parts.length;u<_;u++)for(S=this._parts[u],c=0,y=S.length,f=y-1;c<y;f=c++)if(!(!o&&c===0)&&_p(r,S[f],S[c])<=I)return!0;return!1}});function FE(r,o){return new cn(r,o)}cn._flat=vp;var Ji=cn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fp(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=cn.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof le&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){cn.prototype._setLatLngs.call(this,r),Lt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Lt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new x(o,o);if(r=new G(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,f=this._rings.length,_;c<f;c++)_=dp(this._rings[c],r,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,c,f,_,y,S,I,R;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(_=0,I=this._parts.length;_<I;_++)for(u=this._parts[_],y=0,R=u.length,S=R-1;y<R;S=y++)c=u[y],f=u[S],c.y>r.y!=f.y>r.y&&r.x<(f.x-c.x)*(r.y-c.y)/(f.y-c.y)+c.x&&(o=!o);return o||cn.prototype._containsPoint.call(this,r,!0)}});function BE(r,o){return new Ji(r,o)}var hn=un.extend({initialize:function(r,o){P(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=C(r)?r:r.features,u,c,f;if(o){for(u=0,c=o.length;u<c;u++)f=o[u],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var _=this.options;if(_.filter&&!_.filter(r))return this;var y=Zo(r,_);return y?(y.feature=qo(r),y.defaultOptions=y.options,this.resetStyle(y),_.onEachFeature&&_.onEachFeature(r,y),this.addLayer(y)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function Zo(r,o){var u=r.type==="Feature"?r.geometry:r,c=u?u.coordinates:null,f=[],_=o&&o.pointToLayer,y=o&&o.coordsToLatLng||zu,S,I,R,D;if(!c&&!u)return null;switch(u.type){case"Point":return S=y(c),Cp(_,r,S,o);case"MultiPoint":for(R=0,D=c.length;R<D;R++)S=y(c[R]),f.push(Cp(_,r,S,o));return new un(f);case"LineString":case"MultiLineString":return I=Go(c,u.type==="LineString"?0:1,y),new cn(I,o);case"Polygon":case"MultiPolygon":return I=Go(c,u.type==="Polygon"?1:2,y),new Ji(I,o);case"GeometryCollection":for(R=0,D=u.geometries.length;R<D;R++){var j=Zo({geometry:u.geometries[R],type:"Feature",properties:r.properties},o);j&&f.push(j)}return new un(f);case"FeatureCollection":for(R=0,D=u.features.length;R<D;R++){var J=Zo(u.features[R],o);J&&f.push(J)}return new un(f);default:throw new Error("Invalid GeoJSON object.")}}function Cp(r,o,u,c){return r?r(o,u):new Vo(u,c&&c.markersInheritOptions&&c)}function zu(r){return new le(r[1],r[0],r[2])}function Go(r,o,u){for(var c=[],f=0,_=r.length,y;f<_;f++)y=o?Go(r[f],o-1,u):(u||zu)(r[f]),c.push(y);return c}function Fu(r,o){return r=$(r),r.alt!==void 0?[v(r.lng,o),v(r.lat,o),v(r.alt,o)]:[v(r.lng,o),v(r.lat,o)]}function Ko(r,o,u,c){for(var f=[],_=0,y=r.length;_<y;_++)f.push(o?Ko(r[_],Lt(r[_])?0:o-1,u,c):Fu(r[_],c));return!o&&u&&f.length>0&&f.push(f[0].slice()),f}function er(r,o){return r.feature?s({},r.feature,{geometry:o}):qo(o)}function qo(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Bu={toGeoJSON:function(r){return er(this,{type:"Point",coordinates:Fu(this.getLatLng(),r)})}};Vo.include(Bu),Du.include(Bu),jo.include(Bu),cn.include({toGeoJSON:function(r){var o=!Lt(this._latlngs),u=Ko(this._latlngs,o?1:0,!1,r);return er(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),Ji.include({toGeoJSON:function(r){var o=!Lt(this._latlngs),u=o&&!Lt(this._latlngs[0]),c=Ko(this._latlngs,u?2:o?1:0,!0,r);return o||(c=[c]),er(this,{type:(u?"Multi":"")+"Polygon",coordinates:c})}}),Qi.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),er(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",c=[];return this.eachLayer(function(f){if(f.toGeoJSON){var _=f.toGeoJSON(r);if(u)c.push(_.geometry);else{var y=qo(_);y.type==="FeatureCollection"?c.push.apply(c,y.features):c.push(y)}}}),u?er(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Sp(r,o){return new hn(r,o)}var UE=Sp,$o=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=fe(o),P(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(X(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Te(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&$i(this._image),this},bringToBack:function(){return this._map&&Yi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=fe(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:ue("img");if(X(o,"leaflet-image-layer"),this._zoomAnimated&&X(o,"leaflet-zoom-animated"),this.options.className&&X(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;mi(this._image,u,o)},_reset:function(){var r=this._image,o=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Oe(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),WE=function(r,o,u){return new $o(r,o,u)},Tp=$o.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:ue("video");if(X(o,"leaflet-image-layer"),this._zoomAnimated&&X(o,"leaflet-zoom-animated"),this.options.className&&X(o,this.options.className),o.onselectstart=m,o.onmousemove=m,o.onloadeddata=l(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),c=[],f=0;f<u.length;f++)c.push(u[f].src);this._url=u.length>0?c:[o.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var y=ue("source");y.src=this._url[_],o.appendChild(y)}}});function HE(r,o,u){return new Tp(r,o,u)}var Ip=$o.extend({_initImage:function(){var r=this._image=this._url;X(r,"leaflet-image-layer"),this._zoomAnimated&&X(r,"leaflet-zoom-animated"),this.options.className&&X(r,this.options.className),r.onselectstart=m,r.onmousemove=m}});function VE(r,o,u){return new Ip(r,o,u)}var Jt=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof le||C(r))?(this._latlng=$(r),P(this,o)):(P(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&xt(this._container,1),this.bringToFront(),this.options.interactive&&(X(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(l(Te,void 0,this._container),200)):Te(this._container),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=$(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&$i(this._container),this},bringToBack:function(){return this._map&&Yi(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof un){o=null;var u=this._source._layers;for(var c in u)if(u[c]._map){o=u[c];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=M(this.options.offset),u=this._getAnchor();this._zoomAnimated?Oe(this._container,r.add(u)):o=o.add(r).add(u);var c=this._containerBottom=-o.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=c+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});se.include({_initOverlay:function(r,o,u,c){var f=o;return f instanceof r||(f=new r(c).setContent(o)),u&&f.setLatLng(u),f}}),Ft.include({_initOverlay:function(r,o,u,c){var f=u;return f instanceof r?(P(f,c),f._source=this):(f=o&&!c?o:new r(c,this),f.setContent(u)),f}});var Yo=Jt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Jt.prototype.openOn.call(this,r)},onAdd:function(r){Jt.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",vi))},onRemove:function(r){Jt.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",vi))},getEvents:function(){var r=Jt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=ue("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ue("div",r+"-content-wrapper",o);if(this._contentNode=ue("div",r+"-content",u),rs(o),xu(this._contentNode),Y(o,"contextmenu",vi),this._tipContainer=ue("div",r+"-tip-container",o),this._tip=ue("div",r+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=ue("a",r+"-close-button",o);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Y(c,"click",function(f){Ke(f),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var c=r.offsetHeight,f=this.options.maxHeight,_="leaflet-popup-scrolled";f&&c>f?(o.height=f+"px",X(r,_)):Re(r,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();Oe(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(es(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,c=this._containerWidth,f=new x(this._containerLeft,-u-this._containerBottom);f._add(gi(this._container));var _=r.layerPointToContainerPoint(f),y=M(this.options.autoPanPadding),S=M(this.options.autoPanPaddingTopLeft||y),I=M(this.options.autoPanPaddingBottomRight||y),R=r.getSize(),D=0,j=0;_.x+c+I.x>R.x&&(D=_.x+c-R.x+I.x),_.x-D-S.x<0&&(D=_.x-S.x),_.y+u+I.y>R.y&&(j=_.y+u-R.y+I.y),_.y-j-S.y<0&&(j=_.y-S.y),(D||j)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([D,j]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jE=function(r,o){return new Yo(r,o)};se.mergeOptions({closePopupOnClick:!0}),se.include({openPopup:function(r,o,u){return this._initOverlay(Yo,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Ft.include({bindPopup:function(r,o){return this._popup=this._initOverlay(Yo,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof un||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){yi(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Mn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Qo=Jt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Jt.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Jt.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Jt.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,c=this._map,f=this._container,_=c.latLngToContainerPoint(c.getCenter()),y=c.layerPointToContainerPoint(r),S=this.options.direction,I=f.offsetWidth,R=f.offsetHeight,D=M(this.options.offset),j=this._getAnchor();S==="top"?(o=I/2,u=R):S==="bottom"?(o=I/2,u=0):S==="center"?(o=I/2,u=R/2):S==="right"?(o=0,u=R/2):S==="left"?(o=I,u=R/2):y.x<_.x?(S="right",o=0,u=R/2):(S="left",o=I+(D.x+j.x)*2,u=R/2),r=r.subtract(M(o,u,!0)).add(D).add(j),Re(f,"leaflet-tooltip-right"),Re(f,"leaflet-tooltip-left"),Re(f,"leaflet-tooltip-top"),Re(f,"leaflet-tooltip-bottom"),X(f,"leaflet-tooltip-"+S),Oe(f,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&xt(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ZE=function(r,o){return new Qo(r,o)};se.include({openTooltip:function(r,o,u){return this._initOverlay(Qo,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Ft.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qo,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof un||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(Y(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Y(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,c;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),c=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(o)}});var kp=Xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(zo(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var c=M(u.bgPos);o.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function GE(r){return new kp(r)}Xi.Default=as;var ls=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:H.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){P(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Te(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&($i(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof x?r:new x(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),c=0,f=o.length,_;c<f;c++)_=o[c].style.zIndex,o[c]!==this._container&&_&&(u=r(u,+_));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!H.ielt9){xt(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var c in this._tiles){var f=this._tiles[c];if(!(!f.current||!f.loaded)){var _=Math.min(1,(r-f.loaded)/200);xt(f.el,_),_<1?o=!0:(f.active?u=!0:this._onOpaqueTile(f),f.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(Be(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(Te(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var c=this._levels[r],f=this._map;return c||(c=this._levels[r]={},c.el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=o,c.origin=f.project(f.unproject(f.getPixelOrigin()),r).round(),c.zoom=r,this._setZoomTransform(c,f.getCenter(),f.getZoom()),m(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var c=o.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Te(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,c){var f=Math.floor(r/2),_=Math.floor(o/2),y=u-1,S=new x(+f,+_);S.z=+y;var I=this._tileCoordsToKey(S),R=this._tiles[I];return R&&R.active?(R.retain=!0,!0):(R&&R.loaded&&(R.retain=!0),y>c?this._retainParent(f,_,y,c):!1)},_retainChildren:function(r,o,u,c){for(var f=2*r;f<2*r+2;f++)for(var _=2*o;_<2*o+2;_++){var y=new x(f,_);y.z=u+1;var S=this._tileCoordsToKey(y),I=this._tiles[S];if(I&&I.active){I.retain=!0;continue}else I&&I.loaded&&(I.retain=!0);u+1<c&&this._retainChildren(f,_,u+1,c)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,c){var f=Math.round(o);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var _=this.options.updateWhenZooming&&f!==this._tileZoom;(!c||_)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var c=this._map.getZoomScale(u,r.zoom),f=r.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(o,u)).round();H.any3d?mi(r.el,f,c):Oe(r.el,f)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),c=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],c).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],c).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],c).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],c).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),c=o.getZoomScale(u,this._tileZoom),f=o.project(r,this._tileZoom).floor(),_=o.getSize().divideBy(c*2);return new G(f.subtract(_),f.add(_))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(r),f=this._pxBoundsToTileRange(c),_=f.getCenter(),y=[],S=this.options.keepBuffer,I=new G(f.getBottomLeft().subtract([S,-S]),f.getTopRight().add([S,-S]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var R in this._tiles){var D=this._tiles[R].coords;(D.z!==this._tileZoom||!I.contains(new x(D.x,D.y)))&&(this._tiles[R].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var j=f.min.y;j<=f.max.y;j++)for(var J=f.min.x;J<=f.max.x;J++){var rt=new x(J,j);if(rt.z=this._tileZoom,!!this._isValidTile(rt)){var Ue=this._tiles[this._tileCoordsToKey(rt)];Ue?Ue.current=!0:y.push(rt)}}if(y.sort(function(ct,nr){return ct.distanceTo(_)-nr.distanceTo(_)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Rt=document.createDocumentFragment();for(J=0;J<y.length;J++)this._addTile(y[J],Rt);this._level.el.appendChild(Rt)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(r);return fe(this.options.bounds).overlaps(c)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),c=r.scaleBy(u),f=c.add(u),_=o.unproject(c,r.z),y=o.unproject(f,r.z);return[_,y]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new be(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new x(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(Te(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){X(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=m,r.onmousemove=m,H.ielt9&&this.options.opacity<1&&xt(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),c=this._tileCoordsToKey(r),f=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(f),this.createTile.length<2&&me(l(this._tileReady,this,r,null,f)),Oe(f,u),this._tiles[c]={el:f,coords:r,current:!0},o.appendChild(f),this.fire("tileloadstart",{tile:f,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var c=this._tileCoordsToKey(r);u=this._tiles[c],u&&(u.loaded=+new Date,this._map._fadeAnimated?(xt(u.el,0),Be(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(X(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),H.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new x(this._wrapX?g(r.x,this._wrapX):r.x,this._wrapY?g(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new G(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function KE(r){return new ls(r)}var tr=ls.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=P(this,o),o.detectRetina&&H.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return Y(u,"load",l(this._tileOnLoad,this,o,u)),Y(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:H.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return w(this._url,s(o,this.options))},_tileOnLoad:function(r,o){H.ielt9?setTimeout(l(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var c=this.options.errorTileUrl;c&&o.getAttribute("src")!==c&&(o.src=c),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,c=this.options.zoomOffset;return u&&(r=o-r),r+c},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=m,o.onerror=m,!o.complete)){o.src=b;var u=this._tiles[r].coords;Te(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",b),ls.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===b))return ls.prototype._tileReady.call(this,r,o,u)}});function Pp(r,o){return new tr(r,o)}var xp=tr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=s({},this.defaultWmsParams);for(var c in o)c in this.options||(u[c]=o[c]);o=P(this,o);var f=o.detectRetina&&H.retina?2:1,_=this.getTileSize();u.width=_.x*f,u.height=_.y*f,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,tr.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,c=oe(u.project(o[0]),u.project(o[1])),f=c.min,_=c.max,y=(this._wmsVersion>=1.3&&this._crs===wp?[f.y,f.x,_.y,_.x]:[f.x,f.y,_.x,_.y]).join(","),S=tr.prototype.getTileUrl.call(this,r);return S+V(this.wmsParams,S,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function qE(r,o){return new xp(r,o)}tr.WMS=xp,Pp.wms=qE;var dn=Ft.extend({options:{padding:.1},initialize:function(r){P(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),X(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,o),_=c.multiplyBy(-u).add(f).subtract(this._map._getNewPixelOrigin(r,o));H.any3d?mi(this._container,_,u):Oe(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new G(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lp=dn.extend({options:{tolerance:0},getEvents:function(){var r=dn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Y(r,"mousemove",this._onMouseMove,this),Y(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Y(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Be(this._redrawRequest),delete this._ctx,Te(this._container),ge(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dn.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),c=H.retina?2:1;Oe(o,r.min),o.width=c*u.x,o.height=c*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",H.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){dn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,c=o.prev;u?u.prev=c:this._drawLast=c,c?c.next=u:this._drawFirst=u,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],c,f;for(f=0;f<o.length;f++){if(c=Number(o[f]),isNaN(c))return;u.push(c)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)r=c.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,c,f,_,y=r._parts,S=y.length,I=this._ctx;if(S){for(I.beginPath(),u=0;u<S;u++){for(c=0,f=y[u].length;c<f;c++)_=y[u][c],I[c?"lineTo":"moveTo"](_.x,_.y);o&&I.closePath()}this._fillStroke(I,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,c=Math.max(Math.round(r._radius),1),f=(Math.max(Math.round(r._radiusY),1)||c)/c;f!==1&&(u.save(),u.scale(1,f)),u.beginPath(),u.arc(o.x,o.y/f,c,0,Math.PI*2,!1),f!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,c,f=this._drawFirst;f;f=f.next)u=f.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(c=u);this._fireEvent(c?[c]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Re(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,c,f=this._drawFirst;f;f=f.next)u=f.layer,u.options.interactive&&u._containsPoint(o)&&(c=u);c!==this._hoveredLayer&&(this._handleMouseOut(r),c&&(X(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,c=o.prev;if(u)u.prev=c;else return;c?c.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,c=o.prev;if(c)c.next=u;else return;u?u.prev=c:c&&(this._drawLast=c),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function Rp(r){return H.canvas?new Lp(r):null}var us=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$E={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=us("shape");X(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=us("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;Te(o),r.removeInteractiveTarget(o),delete this._layers[d(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,c=r.options,f=r._container;f.stroked=!!c.stroke,f.filled=!!c.fill,c.stroke?(o||(o=r._stroke=us("stroke")),f.appendChild(o),o.weight=c.weight+"px",o.color=c.color,o.opacity=c.opacity,c.dashArray?o.dashStyle=C(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=c.lineCap.replace("butt","flat"),o.joinstyle=c.lineJoin):o&&(f.removeChild(o),r._stroke=null),c.fill?(u||(u=r._fill=us("fill")),f.appendChild(u),u.color=c.fillColor||c.color,u.opacity=c.fillOpacity):u&&(f.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),c=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+c+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){$i(r._container)},_bringToBack:function(r){Yi(r._container)}},Xo=H.vml?us:Mf,cs=dn.extend({_initContainer:function(){this._container=Xo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Te(this._container),ge(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dn.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Oe(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=Xo("path");r.options.className&&X(o,r.options.className),r.options.interactive&&X(o,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Te(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,bf(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),c=Math.max(Math.round(r._radiusY),1)||u,f="a"+u+","+c+" 0 1,0 ",_=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+f+u*2+",0 "+f+-u*2+",0 ";this._setPath(r,_)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){$i(r._path)},_bringToBack:function(r){Yi(r._path)}});H.vml&&cs.include($E);function Np(r){return H.svg||H.vml?new cs(r):null}se.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&Rp(r)||Np(r)}});var Op=Ji.extend({initialize:function(r,o){Ji.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=fe(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function YE(r,o){return new Op(r,o)}cs.create=Xo,cs.pointsToPath=bf,hn.geometryToLayer=Zo,hn.coordsToLatLng=zu,hn.coordsToLatLngs=Go,hn.latLngToCoords=Fu,hn.latLngsToCoords=Ko,hn.getFeature=er,hn.asFeature=qo,se.mergeOptions({boxZoom:!0});var Ap=Xt.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Te(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ts(),wu(),this._startPoint=this._map.mouseEventToContainerPoint(r),Y(document,{contextmenu:yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),X(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new G(this._point,this._startPoint),u=o.getSize();Oe(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Te(this._box),Re(this._container,"leaflet-crosshair")),ns(),Eu(),ge(document,{contextmenu:yi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});se.addInitHook("addHandler","boxZoom",Ap),se.mergeOptions({doubleClickZoom:!0});var Mp=Xt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),c=o.options.zoomDelta,f=r.originalEvent.shiftKey?u-c:u+c;o.options.doubleClickZoom==="center"?o.setZoom(f):o.setZoomAround(r.containerPoint,f)}});se.addInitHook("addHandler","doubleClickZoom",Mp),se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bp=Xt.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new An(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}X(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Re(this._map._container,"leaflet-grab"),Re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=fe(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,c=this._draggable._newPos.x,f=(c-o+u)%r+o-u,_=(c+o+u)%r-o-u,y=Math.abs(f+u)<Math.abs(_+u)?f:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(r){var o=this._map,u=o.options,c=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),c)o.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,y=u.easeLinearity,S=f.multiplyBy(y/_),I=S.distanceTo([0,0]),R=Math.min(u.inertiaMaxSpeed,I),D=S.multiplyBy(R/I),j=R/(u.inertiaDeceleration*y),J=D.multiplyBy(-j/2).round();!J.x&&!J.y?o.fire("moveend"):(J=o._limitOffset(J,o.options.maxBounds),me(function(){o.panBy(J,{duration:j,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});se.addInitHook("addHandler","dragging",bp),se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Dp=Xt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Y(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ge(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,c=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(c,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,c,f;for(c=0,f=u.left.length;c<f;c++)o[u.left[c]]=[-1*r,0];for(c=0,f=u.right.length;c<f;c++)o[u.right[c]]=[r,0];for(c=0,f=u.down.length;c<f;c++)o[u.down[c]]=[0,r];for(c=0,f=u.up.length;c<f;c++)o[u.up[c]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,c,f;for(c=0,f=u.zoomIn.length;c<f;c++)o[u.zoomIn[c]]=r;for(c=0,f=u.zoomOut.length;c<f;c++)o[u.zoomOut[c]]=-r},_addHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,c;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(c=this._panKeys[o],r.shiftKey&&(c=M(c).multiplyBy(3)),u.options.maxBounds&&(c=u._limitOffset(M(c),u.options.maxBounds)),u.options.worldCopyJump){var f=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(c)));u.panTo(f)}else u.panBy(c)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;yi(r)}}});se.addInitHook("addHandler","keyboard",Dp),se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var zp=Xt.extend({addHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=ap(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var c=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),c),yi(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,_=u?Math.ceil(f/u)*u:f,y=r._limitZoom(o+(this._delta>0?_:-_))-o;this._delta=0,this._startTime=null,y&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+y):r.setZoomAround(this._lastMousePos,o+y))}});se.addInitHook("addHandler","scrollWheelZoom",zp);var QE=600;se.mergeOptions({tapHold:H.touchNative&&H.safari&&H.mobile,tapTolerance:15});var Fp=Xt.extend({addHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new x(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Y(document,"touchend",Ke),Y(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),QE),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ge(document,"touchend",Ke),ge(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new x(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});se.addInitHook("addHandler","tapHold",Fp),se.mergeOptions({touchZoom:H.touch,bounceAtZoomLimits:!0});var Bp=Xt.extend({addHooks:function(){X(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),c=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(c)._divideBy(2))),this._startDist=u.distanceTo(c),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),Ke(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),c=o.mouseEventToContainerPoint(r.touches[1]),f=u.distanceTo(c)/this._startDist;if(this._zoom=o.getScaleZoom(f,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&f<1||this._zoom>o.getMaxZoom()&&f>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var _=u._add(c)._divideBy(2)._subtract(this._centerPoint);if(f===1&&_.x===0&&_.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Be(this._animRequest);var y=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(y,this,!0),Ke(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Be(this._animRequest),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});se.addInitHook("addHandler","touchZoom",Bp),se.BoxZoom=Ap,se.DoubleClickZoom=Mp,se.Drag=bp,se.Keyboard=Dp,se.ScrollWheelZoom=zp,se.TapHold=Fp,se.TouchZoom=Bp,n.Bounds=G,n.Browser=H,n.CRS=ut,n.Canvas=Lp,n.Circle=Du,n.CircleMarker=jo,n.Class=Pt,n.Control=zt,n.DivIcon=kp,n.DivOverlay=Jt,n.DomEvent=_E,n.DomUtil=fE,n.Draggable=An,n.Evented=ln,n.FeatureGroup=un,n.GeoJSON=hn,n.GridLayer=ls,n.Handler=Xt,n.Icon=Xi,n.ImageOverlay=$o,n.LatLng=le,n.LatLngBounds=be,n.Layer=Ft,n.LayerGroup=Qi,n.LineUtil=xE,n.Map=se,n.Marker=Vo,n.Mixin=CE,n.Path=Mn,n.Point=x,n.PolyUtil=SE,n.Polygon=Ji,n.Polyline=cn,n.Popup=Yo,n.PosAnimation=lp,n.Projection=LE,n.Rectangle=Op,n.Renderer=dn,n.SVG=cs,n.SVGOverlay=Ip,n.TileLayer=tr,n.Tooltip=Qo,n.Transformation=lu,n.Util=_i,n.VideoOverlay=Tp,n.bind=l,n.bounds=oe,n.canvas=Rp,n.circle=zE,n.circleMarker=DE,n.control=ss,n.divIcon=GE,n.extend=s,n.featureGroup=AE,n.geoJSON=Sp,n.geoJson=UE,n.gridLayer=KE,n.icon=ME,n.imageOverlay=WE,n.latLng=$,n.latLngBounds=fe,n.layerGroup=OE,n.map=mE,n.marker=bE,n.point=M,n.polygon=BE,n.polyline=FE,n.popup=jE,n.rectangle=YE,n.setOptions=P,n.stamp=d,n.svg=Np,n.svgOverlay=VE,n.tileLayer=Pp,n.tooltip=ZE,n.transformation=Qr,n.version=i,n.videoOverlay=HE;var XE=window.L;n.noConflict=function(){return window.L=XE,this},window.L=n})})(yh,yh.exports);var So=yh.exports;const Ty=og(So);function Dd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function zd(t,e){return e==null?function(i,s){const a=re.useRef();return a.current||(a.current=t(i,s)),a}:function(i,s){const a=re.useRef();a.current||(a.current=t(i,s));const l=re.useRef(i),{instance:h}=a.current;return re.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),a}}function MT(t,e){re.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Iy(t){return function(n){const i=Cy(),s=t(bd(n,i),i);return yy(i.map,n.attribution),Sy(s.current,n.eventHandlers),MT(s.current,i),s}}function bT(t,e){const n=zd(t,e),i=Iy(n);return RT(i)}function DT(t,e){const n=zd(t),i=AT(n,e);return NT(i)}function zT(t,e){const n=zd(t,e),i=Iy(n);return OT(i)}function FT(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function wh(){return wh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wh.apply(this,arguments)}function BT({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:a,placeholder:l,style:h,whenReady:d,zoom:p,...g},m){const[v]=re.useState({className:s,id:a,style:h}),[T,k]=re.useState(null);re.useImperativeHandle(m,()=>(T==null?void 0:T.map)??null,[T]);const P=re.useCallback(E=>{if(E!==null&&T===null){const w=new So.Map(E,g);n!=null&&p!=null?w.setView(n,p):t!=null&&w.fitBounds(t,e),d!=null&&w.whenReady(d),k(xT(w))}},[]);re.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const V=T?W.createElement(Ey,{value:T},i):l??null;return W.createElement("div",wh({},v,{ref:P}),V)}const UT=re.forwardRef(BT),WT=bT(function({position:e,...n},i){const s=new So.Marker(e,n);return Dd(s,LT(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),HT=DT(function(e,n){const i=new So.Popup(e,n.overlayContainer);return Dd(i,n)},function(e,n,{position:i},s){re.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var g;n.map.off({popupopen:h,popupclose:d}),(g=n.overlayContainer)==null||g.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),VT=zT(function({url:e,...n},i){const s=new So.TileLayer(e,bd(n,i));return Dd(s,i)},function(e,n,i){FT(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});var X_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=function(t,e){if(!t)throw Zr(e)},Zr=function(t){return new Error("Firebase Database ("+ky.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jT=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Fd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,g=a>>2,m=(a&3)<<4|h>>4;let v=(h&15)<<2|p>>6,T=p&63;d||(T=64,l||(v=64)),i.push(n[g],n[m],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Py(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||h==null||p==null||m==null)throw new ZT;const v=a<<2|h>>4;if(i.push(v),p!==64){const T=h<<4&240|p>>2;if(i.push(T),m!==64){const k=p<<6&192|m;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xy=function(t){const e=Py(t);return Fd.encodeByteArray(e,!0)},ll=function(t){return xy(t).replace(/\./g,"")},ul=function(t){try{return Fd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return Ly(void 0,t)}function Ly(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!KT(n)||(t[n]=Ly(t[n],e[n]));return t}function KT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=()=>qT().__FIREBASE_DEFAULTS__,YT=()=>{if(typeof process>"u"||typeof X_>"u")return;const t=X_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ul(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return $T()||YT()||QT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ry=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XT=t=>{const e=Ry(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ny=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},Oy=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ll(JSON.stringify(n)),ll(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ud(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function eI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ay(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tI(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nI(){return ky.NODE_ADMIN===!0}function iI(){try{return typeof indexedDB=="object"}catch{return!1}}function rI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="FirebaseError";class fi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=sI,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?oI(a,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new fi(s,h,i)}}function oI(t,e){return t.replace(aI,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const aI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return JSON.parse(t)}function je(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=function(t){let e={},n={},i={},s="";try{const a=t.split(".");e=so(ul(a[0])||""),n=so(ul(a[1])||""),s=a[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},lI=function(t){const e=My(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},uI=function(t){const e=My(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Eh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cl(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function hl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(J_(a)&&J_(l)){if(!hl(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function J_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)i[m]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)i[m]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let m=16;m<80;m++){const v=i[m-3]^i[m-8]^i[m-14]^i[m-16];i[m]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p,g;for(let m=0;m<80;m++){m<40?m<20?(p=h^a&(l^h),g=1518500249):(p=a^l^h,g=1859775393):m<60?(p=a&l|h&(a|l),g=2400959708):(p=a^l^h,g=3395469782);const v=(s<<5|s>>>27)+p+d+g+i[m]&4294967295;d=h,h=l,l=(a<<30|a>>>2)&4294967295,a=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<n;){if(l===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(a[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<n;)if(a[l]=e[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[s]>>a&255,++i;return e}}function hI(t,e){const n=new dI(t,e);return n.subscribe.bind(n)}class dI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");fI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=fc),s.error===void 0&&(s.error=fc),s.complete===void 0&&(s.complete=fc);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fc(){}function Wd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,A(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;s=65536+(a<<10)+l}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Kl=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Fi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Gl;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mI(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mI(t){return t===Si?void 0:t}function gI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _I(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const yI={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},wI=pe.INFO,EI={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},CI=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=EI[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hd{constructor(e){this.name=e,this._logLevel=wI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const SI=(t,e)=>e.some(n=>t instanceof n);let em,tm;function TI(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function II(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const by=new WeakMap,Ch=new WeakMap,Dy=new WeakMap,pc=new WeakMap,Vd=new WeakMap;function kI(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(ti(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&by.set(n,t)}).catch(()=>{}),Vd.set(e,t),e}function PI(t){if(Ch.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Ch.set(t,e)}let Sh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xI(t){Sh=t(Sh)}function LI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_c(this),e,...n);return Dy.set(i,e.sort?e.sort():[e]),ti(i)}:II().includes(t)?function(...e){return t.apply(_c(this),e),ti(by.get(this))}:function(...e){return ti(t.apply(_c(this),e))}}function RI(t){return typeof t=="function"?LI(t):(t instanceof IDBTransaction&&PI(t),SI(t,TI())?new Proxy(t,Sh):t)}function ti(t){if(t instanceof IDBRequest)return kI(t);if(pc.has(t))return pc.get(t);const e=RI(t);return e!==t&&(pc.set(t,e),Vd.set(e,t)),e}const _c=t=>Vd.get(t);function NI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),h=ti(l);return i&&l.addEventListener("upgradeneeded",d=>{i(ti(l.result),d.oldVersion,d.newVersion,ti(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const OI=["get","getKey","getAll","getAllKeys","count"],AI=["put","add","delete","clear"],mc=new Map;function nm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mc.get(e))return mc.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=AI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OI.includes(n)))return;const a=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return mc.set(e,a),a}xI(t=>({...t,get:(e,n,i)=>nm(e,n)||t.get(e,n,i),has:(e,n)=>!!nm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function bI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Th="@firebase/app",im="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Hd("@firebase/app"),DI="@firebase/app-compat",zI="@firebase/analytics-compat",FI="@firebase/analytics",BI="@firebase/app-check-compat",UI="@firebase/app-check",WI="@firebase/auth",HI="@firebase/auth-compat",VI="@firebase/database",jI="@firebase/database-compat",ZI="@firebase/functions",GI="@firebase/functions-compat",KI="@firebase/installations",qI="@firebase/installations-compat",$I="@firebase/messaging",YI="@firebase/messaging-compat",QI="@firebase/performance",XI="@firebase/performance-compat",JI="@firebase/remote-config",ek="@firebase/remote-config-compat",tk="@firebase/storage",nk="@firebase/storage-compat",ik="@firebase/firestore",rk="@firebase/firestore-compat",sk="firebase",ok="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="[DEFAULT]",ak={[Th]:"fire-core",[DI]:"fire-core-compat",[FI]:"fire-analytics",[zI]:"fire-analytics-compat",[UI]:"fire-app-check",[BI]:"fire-app-check-compat",[WI]:"fire-auth",[HI]:"fire-auth-compat",[VI]:"fire-rtdb",[jI]:"fire-rtdb-compat",[ZI]:"fire-fn",[GI]:"fire-fn-compat",[KI]:"fire-iid",[qI]:"fire-iid-compat",[$I]:"fire-fcm",[YI]:"fire-fcm-compat",[QI]:"fire-perf",[XI]:"fire-perf-compat",[JI]:"fire-rc",[ek]:"fire-rc-compat",[tk]:"fire-gcs",[nk]:"fire-gcs-compat",[ik]:"fire-fst",[rk]:"fire-fst-compat","fire-js":"fire-js",[sk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new Map,kh=new Map;function lk(t,e){try{t.container.addComponent(e)}catch(n){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fr(t){const e=t.name;if(kh.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;kh.set(e,t);for(const n of dl.values())lk(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ni=new To("app","Firebase",uk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=ok;function zy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ih,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ni.create("bad-app-name",{appName:String(s)});if(n||(n=Ny()),!n)throw ni.create("no-options");const a=dl.get(s);if(a){if(hl(n,a.options)&&hl(i,a.config))return a;throw ni.create("duplicate-app",{appName:s})}const l=new vI(s);for(const d of kh.values())l.addComponent(d);const h=new ck(n,i,l);return dl.set(s,h),h}function Fy(t=Ih){const e=dl.get(t);if(!e&&t===Ih&&Ny())return zy();if(!e)throw ni.create("no-app",{appName:t});return e}function ii(t,e,n){var i;let s=(i=ak[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(h.join(" "));return}Fr(new Fi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="firebase-heartbeat-database",dk=1,oo="firebase-heartbeat-store";let gc=null;function By(){return gc||(gc=NI(hk,dk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(oo)}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),gc}async function fk(t){try{return await(await By()).transaction(oo).objectStore(oo).get(Uy(t))}catch(e){if(e instanceof fi)Bi.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(n.message)}}}async function rm(t,e){try{const i=(await By()).transaction(oo,"readwrite");await i.objectStore(oo).put(e,Uy(t)),await i.done}catch(n){if(n instanceof fi)Bi.warn(n.message);else{const i=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bi.warn(i.message)}}}function Uy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=1024,_k=30*24*60*60*1e3;class mk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sm();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=_k}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sm(),{heartbeatsToSend:n,unsentEntries:i}=gk(this._heartbeatsCache.heartbeats),s=ll(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function sm(){return new Date().toISOString().substring(0,10)}function gk(t,e=pk){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),om(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),om(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iI()?rI().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fk(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function om(t){return ll(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){Fr(new Fi("platform-logger",e=>new MI(e),"PRIVATE")),Fr(new Fi("heartbeat",e=>new mk(e),"PRIVATE")),ii(Th,im,t),ii(Th,im,"esm2017"),ii("fire-js","")}yk("");var wk="firebase",Ek="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(wk,Ek,"app");function Zd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ck=Wy,Hy=new To("auth","Firebase",Wy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new Hd("@firebase/auth");function Sk(t,...e){fl.logLevel<=pe.WARN&&fl.warn(`Auth (${Kr}): ${t}`,...e)}function Aa(t,...e){fl.logLevel<=pe.ERROR&&fl.error(`Auth (${Kr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw Gd(t,...e)}function on(t,...e){return Gd(t,...e)}function Tk(t,e,n){const i=Object.assign(Object.assign({},Ck()),{[e]:n});return new To("auth","Firebase",i).create(e,{appName:t.name})}function Gd(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Hy.create(t,...e)}function q(t,e,...n){if(!t)throw Gd(e,...n)}function gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Aa(e),new Error(e)}function Pn(t,e){t||gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ik(){return am()==="http:"||am()==="https:"}function am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ik()||eI()||"connection"in navigator)?navigator.onLine:!0}function Pk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ud()||Ay()}get(){return kk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e){Pn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Io(3e4,6e4);function qd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,i,s={}){return jy(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const h=Gr(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),Vy.fetch()(Gy(t,t.config.apiHost,n,h),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},a))})}async function jy(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},xk),e);try{const s=new Rk(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ga(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ga(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw ga(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw ga(t,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Tk(t,g,p);kn(t,g)}}catch(s){if(s instanceof fi)throw s;kn(t,"network-request-failed",{message:String(s)})}}async function Zy(t,e,n,i,s={}){const a=await ko(t,e,n,i,s);return"mfaPendingCredential"in a&&kn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Gy(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Kd(t.config,s):`${t.config.apiScheme}://${s}`}class Rk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(on(this.auth,"network-request-failed")),Lk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ga(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=on(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function Ok(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ak(t,e=!1){const n=kt(t),i=await n.getIdToken(e),s=$d(i);q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Ds(vc(s.auth_time)),issuedAtTime:Ds(vc(s.iat)),expirationTime:Ds(vc(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vc(t){return Number(t)*1e3}function $d(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Aa("JWT malformed, contained fewer than 3 sections"),null;try{const s=ul(n);return s?JSON.parse(s):(Aa("Failed to decode base64 JWT payload"),null)}catch(s){return Aa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Mk(t){const e=$d(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof fi&&bk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ds(this.lastLoginAt),this.creationTime=Ds(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){var e;const n=t.auth,i=await t.getIdToken(),s=await ao(t,Ok(n,{idToken:i}));q(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Bk(a.providerUserInfo):[],h=Fk(t.providerData,l),d=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(h!=null&&h.length),g=d?p:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ky(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,m)}async function zk(t){const e=kt(t);await pl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fk(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Bk(t){return t.map(e=>{var{providerId:n}=e,i=Zd(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){const n=await jy(t,{},async()=>{const i=Gr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=Gy(t,s,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Vy.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await Uk(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new lo;return i&&(q(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(q(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(q(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Oi{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=Zd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ky(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ao(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ak(this,e)}reload(){return zk(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await pl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ao(this,Nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,h,d,p,g;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,T=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,k=(l=n.photoURL)!==null&&l!==void 0?l:void 0,P=(h=n.tenantId)!==null&&h!==void 0?h:void 0,V=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,E=(p=n.createdAt)!==null&&p!==void 0?p:void 0,w=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:N,isAnonymous:b,providerData:F,stsTokenManager:B}=n;q(C&&B,e,"internal-error");const U=lo.fromJSON(this.name,B);q(typeof C=="string",e,"internal-error"),Dn(m,e.name),Dn(v,e.name),q(typeof N=="boolean",e,"internal-error"),q(typeof b=="boolean",e,"internal-error"),Dn(T,e.name),Dn(k,e.name),Dn(P,e.name),Dn(V,e.name),Dn(E,e.name),Dn(w,e.name);const he=new Oi({uid:C,auth:e,email:v,emailVerified:N,displayName:m,isAnonymous:b,photoURL:k,phoneNumber:T,tenantId:P,stsTokenManager:U,createdAt:E,lastLoginAt:w});return F&&Array.isArray(F)&&(he.providerData=F.map(Q=>Object.assign({},Q))),V&&(he._redirectEventId=V),he}static async _fromIdTokenResponse(e,n,i=!1){const s=new lo;s.updateFromServerResponse(n);const a=new Oi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await pl(a),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new Map;function vn(t){Pn(t instanceof Function,"Expected a class definition");let e=lm.get(t);return e?(Pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qy.type="NONE";const um=qy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e,n){return`firebase:${t}:${e}:${n}`}class Ir{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Ma(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ma("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ir(vn(um),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||vn(um);const l=Ma(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const g=await p._get(l);if(g){const m=Oi._fromJSON(e,g);p!==a&&(h=m),a=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ir(a,e,i):(a=d[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ir(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($y(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jy(e))return"Blackberry";if(ew(e))return"Webos";if(Yd(e))return"Safari";if((e.includes("chrome/")||Yy(e))&&!e.includes("edge/"))return"Chrome";if(Xy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $y(t=it()){return/firefox\//i.test(t)}function Yd(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yy(t=it()){return/crios\//i.test(t)}function Qy(t=it()){return/iemobile/i.test(t)}function Xy(t=it()){return/android/i.test(t)}function Jy(t=it()){return/blackberry/i.test(t)}function ew(t=it()){return/webos/i.test(t)}function ql(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wk(t=it()){var e;return ql(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Hk(){return tI()&&document.documentMode===10}function tw(t=it()){return ql(t)||Xy(t)||ew(t)||Jy(t)||/windows phone/i.test(t)||Qy(t)}function Vk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t,e=[]){let n;switch(t){case"Browser":n=cm(it());break;case"Worker":n=`${cm(it())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kr}/${i}`}async function iw(t,e){return ko(t,"GET","/v2/recaptchaConfig",qd(t,e))}function hm(t){return t!==void 0&&t.enterprise!==void 0}class rw{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function sw(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=on("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",jk().appendChild(i)})}function Zk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Gk="https://www.google.com/recaptcha/enterprise.js?render=",Kk="recaptcha-enterprise",qk="NO_RECAPTCHA";class $k{constructor(e){this.type=Kk,this.auth=Po(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{iw(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new rw(d);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(a,l,h){const d=window.grecaptcha;hm(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(qk)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{i(this.auth).then(h=>{if(!n&&hm(window.grecaptcha))s(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}sw(Gk+h).then(()=>{s(h,a,l)}).catch(d=>{l(d)})}}).catch(h=>{l(h)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,h)=>{try{const d=e(a);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dm(this),this.idTokenSubscription=new dm(this),this.beforeStateQueue=new Yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Ir.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Pk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?kt(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}async initializeRecaptchaConfig(){const e=await iw(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new rw(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new $k(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Ir.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return q(l,this,"internal-error"),l.then(()=>a(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Sk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Po(t){return kt(t)}class dm{constructor(e){this.auth=e,this.observer=null,this.addObserver=hI(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e){const n=jd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(hl(a,e??{}))return s;kn(s,"already-initialized")}return n.initialize({options:e})}function Jk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function eP(t,e,n){const i=Po(t);q(i._canInitEmulator,i,"emulator-config-failed"),q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=ow(e),{host:l,port:h}=tP(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),nP()}function ow(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tP(t){const e=ow(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:fm(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:fm(l)}}}function fm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(e){return gn("not implemented")}_linkToIdToken(e,n){return gn("not implemented")}_getReauthenticationResolver(e){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,e){return Zy(t,"POST","/v1/accounts:signInWithIdp",qd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class Ui extends aw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=Zd(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new Ui(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return kr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,kr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kr(e,n)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends xo{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ui._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Hn.credential(n,i)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends xo{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vn.credential(e.oauthAccessToken)}catch{return null}}}Vn.GITHUB_SIGN_IN_METHOD="github.com";Vn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends xo{constructor(){super("twitter.com")}static credential(e,n){return Ui._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return jn.credential(n,i)}catch{return null}}}jn.TWITTER_SIGN_IN_METHOD="twitter.com";jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){return Zy(t,"POST","/v1/accounts:signUp",qd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await Oi._fromIdTokenResponse(e,i,s),l=pm(i);return new ai({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=pm(i);return new ai({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function pm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(t){var e;const n=Po(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ai({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await rP(n,{returnSecureToken:!0}),s=await ai._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends fi{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_l.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new _l(e,n,i,s)}}function uw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_l._fromErrorAndOperation(t,a,e,i):a})}async function oP(t,e,n=!1){const i=await ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const a=await ao(t,uw(i,s,e,t),n);q(a.idToken,i,"internal-error");const l=$d(a.idToken);q(l,i,"internal-error");const{sub:h}=l;return q(t.uid===h,i,"user-mismatch"),ai._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&kn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e,n=!1){const i="signIn",s=await uw(t,i,e),a=await ai._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}function uP(t,e,n,i){return kt(t).onIdTokenChanged(e,n,i)}function cP(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function hP(t){return kt(t).signOut()}const ml="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){const t=it();return Yd(t)||ql(t)}const fP=1e3,pP=10;class hw extends cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=dP()&&Vk(),this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);Hk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pP):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},fP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hw.type="LOCAL";const _P=hw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw extends cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dw.type="SESSION";const fw=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new $l(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,a)),d=await mP(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$l.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,d)=>{const p=Qd("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(v.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function vP(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function yP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function EP(){return pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",CP=1,gl="firebaseLocalStorage",mw="fbase_key";class Lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yl(t,e){return t.transaction([gl],e?"readwrite":"readonly").objectStore(gl)}function SP(){const t=indexedDB.deleteDatabase(_w);return new Lo(t).toPromise()}function xh(){const t=indexedDB.open(_w,CP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(gl,{keyPath:mw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(gl)?e(i):(i.close(),await SP(),e(await xh()))})})}async function _m(t,e,n){const i=Yl(t,!0).put({[mw]:e,value:n});return new Lo(i).toPromise()}async function TP(t,e){const n=Yl(t,!1).get(e),i=await new Lo(n).toPromise();return i===void 0?null:i.value}function mm(t,e){const n=Yl(t,!0).delete(e);return new Lo(n).toPromise()}const IP=800,kP=3;class gw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$l._getInstance(EP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await yP(),!this.activeServiceWorker)return;this.sender=new gP(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xh();return await _m(e,ml,"1"),await mm(e,ml),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_m(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>TP(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Yl(s,!1).getAll();return new Lo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gw.type="LOCAL";const PP=gw;new Io(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t,e){return e?vn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends aw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LP(t){return lP(t.auth,new Xd(t),t.bypassAuthState)}function RP(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),aP(n,new Xd(t),t.bypassAuthState)}async function NP(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),oP(n,new Xd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LP;case"linkViaPopup":case"linkViaRedirect":return NP;case"reauthViaPopup":case"reauthViaRedirect":return RP;default:kn(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Io(2e3,1e4);class gr extends vw{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,gr.currentPopupAction&&gr.currentPopupAction.cancel(),gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Pn(this.filter.length===1,"Popup operations only handle one event");const e=Qd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OP.get())};e()}}gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="pendingRedirect",ba=new Map;class MP extends vw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ba.get(this.auth._key());if(!e){try{const i=await bP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ba.set(this.auth._key(),e)}return this.bypassAuthState||ba.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bP(t,e){const n=FP(e),i=zP(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function DP(t,e){ba.set(t._key(),e)}function zP(t){return vn(t._redirectPersistence)}function FP(t){return Ma(AP,t.config.apiKey,t.name)}async function BP(t,e,n=!1){const i=Po(t),s=xP(i,e),l=await new MP(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=10*60*1e3;class WP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!yw(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UP&&this.cachedEventUids.clear(),this.cachedEventUids.has(gm(e))}saveEventToCache(e){this.cachedEventUids.add(gm(e)),this.lastProcessedEventTime=Date.now()}}function gm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZP=/^https?/;async function GP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VP(t);for(const n of e)try{if(KP(n))return}catch{}kn(t,"unauthorized-domain")}function KP(t){const e=Ph(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!ZP.test(n))return!1;if(jP.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new Io(3e4,6e4);function vm(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $P(t){return new Promise((e,n)=>{var i,s,a;function l(){vm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vm(),n(on(t,"network-request-failed"))},timeout:qP.get()})}if(!((s=(i=an().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=an().gapi)===null||a===void 0)&&a.load)l();else{const h=Zk("iframefcb");return an()[h]=()=>{gapi.load?l():n(on(t,"network-request-failed"))},sw(`https://apis.google.com/js/api.js?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Da=null,e})}let Da=null;function YP(t){return Da=Da||$P(t),Da}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Io(5e3,15e3),XP="__/auth/iframe",JP="emulator/auth/iframe",ex={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nx(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kd(e,JP):`https://${t.config.authDomain}/${XP}`,i={apiKey:e.apiKey,appName:t.name,v:Kr},s=tx.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Gr(i).slice(1)}`}async function ix(t){const e=await YP(t),n=an().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:nx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ex,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=on(t,"network-request-failed"),h=an().setTimeout(()=>{a(l)},QP.get());function d(){an().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sx=500,ox=600,ax="_blank",lx="http://localhost";class ym{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ux(t,e,n,i=sx,s=ox){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},rx),{width:i.toString(),height:s.toString(),top:a,left:l}),p=it().toLowerCase();n&&(h=Yy(p)?ax:n),$y(p)&&(e=e||lx,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[T,k])=>`${v}${T}=${k},`,"");if(Wk(p)&&h!=="_self")return cx(e||"",h),new ym(null);const m=window.open(e||"",h,g);q(m,t,"popup-blocked");try{m.focus()}catch{}return new ym(m)}function cx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="__/auth/handler",dx="emulator/auth/handler",fx=encodeURIComponent("fac");async function wm(t,e,n,i,s,a){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Kr,eventId:s};if(e instanceof lw){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Eh(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries({}))l[g]=m}if(e instanceof xo){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await t._getAppCheckToken(),p=d?`#${fx}=${encodeURIComponent(d)}`:"";return`${px(t)}?${Gr(h).slice(1)}${p}`}function px({config:t}){return t.emulator?Kd(t,dx):`https://${t.authDomain}/${hx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="webStorageSupport";class _x{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fw,this._completeRedirectFn=BP,this._overrideRedirectResult=DP}async _openPopup(e,n,i,s){var a;Pn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await wm(e,n,i,Ph(),s);return ux(e,l,Qd())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await wm(e,n,i,Ph(),s);return vP(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Pn(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ix(e),i=new WP(e);return n.register("authEvent",s=>(q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yc,{type:yc},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[yc];l!==void 0&&n(!!l),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tw()||Yd()||ql()}}const mx=_x;var Em="@firebase/auth",Cm="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function yx(t){Fr(new Fi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;q(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nw(t)},p=new Qk(i,s,a,d);return Jk(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Fr(new Fi("auth-internal",e=>{const n=Po(e.getProvider("auth").getImmediate());return(i=>new gx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(Em,Cm,vx(t)),ii(Em,Cm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=5*60,Ex=Oy("authIdTokenMaxAge")||wx;let Sm=null;const Cx=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ex)return;const s=n==null?void 0:n.token;Sm!==s&&(Sm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ql(t=Fy()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xk(t,{popupRedirectResolver:mx,persistence:[PP,_P,fw]}),i=Oy("authTokenSyncURL");if(i){const a=Cx(i);cP(n,a,()=>a(n.currentUser)),uP(n,l=>a(l))}const s=Ry("auth");return s&&eP(n,`http://${s}`),n}yx("Browser");var Tm={};const Im="@firebase/database",km="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ww="";function Sx(t){ww=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),je(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:so(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Tx(e)}}catch{}return new Ix},xi=Ew("localStorage"),kx=Ew("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Hd("@firebase/database"),Px=function(){let t=1;return function(){return t++}}(),Cw=function(t){const e=pI(t),n=new cI;n.update(e);const i=n.digest();return Fd.encodeByteArray(i)},Ro=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Ro.apply(null,i):typeof i=="object"?e+=je(i):e+=i,e+=" "}return e};let zs=null,Pm=!0;const xx=function(t,e){A(!0,"Can't turn on custom loggers persistently."),Pr.logLevel=pe.VERBOSE,zs=Pr.log.bind(Pr)},tt=function(...t){if(Pm===!0&&(Pm=!1,zs===null&&kx.get("logging_enabled")===!0&&xx()),zs){const e=Ro.apply(null,t);zs(e)}},No=function(t){return function(...e){tt(t,...e)}},Lh=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ro(...t);Pr.error(e)},xn=function(...t){const e=`FIREBASE FATAL ERROR: ${Ro(...t)}`;throw Pr.error(e),new Error(e)},vt=function(...t){const e="FIREBASE WARNING: "+Ro(...t);Pr.warn(e)},Lx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Sw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Rx=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Br="[MIN_NAME]",Wi="[MAX_NAME]",qr=function(t,e){if(t===e)return 0;if(t===Br||e===Wi)return-1;if(e===Br||t===Wi)return 1;{const n=xm(t),i=xm(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Nx=function(t,e){return t===e?0:t<e?-1:1},ys=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+je(e))},Jd=function(t){if(typeof t!="object"||t===null)return je(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=je(e[i]),n+=":",n+=Jd(t[e[i]]);return n+="}",n},Tw=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function yt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Iw=function(t){A(!Sw(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,a,l,h,d;t===0?(a=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),i),a=h+i,l=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,l=Math.round(t/Math.pow(2,1-i-n))));const p=[];for(d=n;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(s?1:0),p.reverse();const g=p.join("");let m="";for(d=0;d<64;d+=8){let v=parseInt(g.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),m=m+v}return m.toLowerCase()},Ox=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ax=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Mx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const bx=new RegExp("^-?(0*)\\d{1,10}$"),Dx=-2147483648,zx=2147483647,xm=function(t){if(bx.test(t)){const e=Number(t);if(e>=Dx&&e<=zx)return e}return null},$r=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Fx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(e)}}class za{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}za.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="5",kw="v",Pw="s",xw="r",Lw="f",Rw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Nw="ls",Ow="p",Rh="ac",Aw="websocket",Mw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,i,s,a=!1,l="",h=!1,d=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Wx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Dw(t,e,n){A(typeof e=="string","typeof type must == string"),A(typeof n=="object","typeof params must == object");let i;if(e===Aw)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Mw)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Wx(t)&&(n.ns=t.namespace);const s=[];return yt(n,(a,l)=>{s.push(a+"="+l)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.counters_={}}incrementCounter(e,n=1){Nn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return GT(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc={},Ec={};function tf(t){const e=t.toString();return wc[e]||(wc[e]=new Hx),wc[e]}function Vx(t,e){const n=t.toString();return Ec[n]||(Ec[n]=e()),Ec[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&$r(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="start",Zx="close",Gx="pLPCommand",Kx="pRTLPCB",zw="id",Fw="pw",Bw="ser",qx="cb",$x="seg",Yx="ts",Qx="d",Xx="dframe",Uw=1870,Ww=30,Jx=Uw-Ww,eL=25e3,tL=3e4;class vr{constructor(e,n,i,s,a,l,h){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=No(e),this.stats_=tf(n),this.urlFn=d=>(this.appCheckToken&&(d[Rh]=this.appCheckToken),Dw(n,Mw,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tL)),Rx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nf((...a)=>{const[l,h,d,p,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Lm)this.id=h,this.password=d;else if(l===Zx)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[Lm]="t",i[Bw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[qx]=this.scriptTagHolder.uniqueCallbackIdentifier),i[kw]=ef,this.transportSessionId&&(i[Pw]=this.transportSessionId),this.lastSessionId&&(i[Nw]=this.lastSessionId),this.applicationId&&(i[Ow]=this.applicationId),this.appCheckToken&&(i[Rh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Rw.test(location.hostname)&&(i[xw]=Lw);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vr.forceAllow_=!0}static forceDisallow(){vr.forceDisallow_=!0}static isAvailable(){return vr.forceAllow_?!0:!vr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ox()&&!Ax()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=xy(n),s=Tw(i,Jx);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Xx]="t",i[zw]=e,i[Fw]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=je(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nf{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Px(),window[Gx+this.uniqueCallbackIdentifier]=e,window[Kx+this.uniqueCallbackIdentifier]=n,this.myIFrame=nf.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){tt("frame writing exception"),h.stack&&tt(h.stack),tt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zw]=this.myID,e[Fw]=this.myPW,e[Bw]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ww+i.length<=Uw;){const l=this.pendingSegs.shift();i=i+"&"+$x+s+"="+l.seg+"&"+Yx+s+"="+l.ts+"&"+Qx+s+"="+l.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(eL)),a=()=>{clearTimeout(s),i()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=16384,iL=45e3;let vl=null;typeof MozWebSocket<"u"?vl=MozWebSocket:typeof WebSocket<"u"&&(vl=WebSocket);class Vt{constructor(e,n,i,s,a,l,h){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=No(this.connId),this.stats_=tf(n),this.connURL=Vt.connectionURL_(n,l,h,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,a){const l={};return l[kw]=ef,typeof location<"u"&&location.hostname&&Rw.test(location.hostname)&&(l[xw]=Lw),n&&(l[Pw]=n),i&&(l[Nw]=i),s&&(l[Rh]=s),a&&(l[Ow]=a),Dw(e,Aw,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xi.set("previous_websocket_failure",!0);try{let i;nI(),this.mySock=new vl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Vt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&vl!==null&&!Vt.forceDisallow_}static previouslyFailed(){return xi.isInMemoryStorage||xi.get("previous_websocket_failure")===!0}markConnectionHealthy(){xi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=so(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(A(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Tw(n,nL);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vt.responsesRequiredToBeHealthy=2;Vt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[vr,Vt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Vt&&Vt.isAvailable();let i=n&&!Vt.previouslyFailed();if(e.webSocketOnly&&(n||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vt];else{const s=this.transports_=[];for(const a of uo.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);uo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}uo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=6e4,sL=5e3,oL=10*1024,aL=100*1024,Cc="t",Rm="d",lL="s",Nm="r",uL="e",Om="o",Am="a",Mm="n",bm="p",cL="h";class hL{constructor(e,n,i,s,a,l,h,d,p,g){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=No("c:"+this.id+":"),this.transportManager_=new uo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Fs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>aL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>oL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cc in e){const n=e[Cc];n===Am?this.upgradeIfSecondaryHealthy_():n===Nm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Om&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ys("t",e),i=ys("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Am,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Mm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ys("t",e),i=ys("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ys(Cc,e);if(Rm in e){const i=e[Rm];if(n===cL){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Mm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===lL?this.onConnectionShutdown_(i):n===Nm?this.onReset_(i):n===uL?Lh("Server Error: "+i):n===Om?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ef!==i&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Fs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(rL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===n&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends Vw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ud()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yl}getInitialEvent(e){return A(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=32,zm=768;class _e{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ce(){return new _e("")}function ee(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function li(t){return t.pieces_.length-t.pieceNum_}function ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _e(t.pieces_,e)}function jw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Zw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Gw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new _e(e,0)}function ze(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof _e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new _e(n,0)}function ne(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const n=ee(t),i=ee(e);if(n===null)return e;if(n===i)return ft(ve(t),ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rf(t,e){if(li(t)!==li(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function jt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(li(t)>li(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class fL{constructor(e,n){this.errorPrefix_=n,this.parts_=Zw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Kl(this.parts_[i]);Kw(this)}}function pL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Kl(e),Kw(t)}function _L(t){const e=t.parts_.pop();t.byteLength_-=Kl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Kw(t){if(t.byteLength_>zm)throw new Error(t.errorPrefix_+"has a key path longer than "+zm+" bytes ("+t.byteLength_+").");if(t.parts_.length>Dm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Dm+") or object contains a cycle "+Ti(t))}function Ti(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Vw{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new sf}getInitialEvent(e){return A(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=1e3,mL=60*5*1e3,Fm=30*1e3,gL=1.3,vL=3e4,yL="server_kill",Bm=3;class En extends Hw{constructor(e,n,i,s,a,l,h,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=En.nextPersistentConnectionId_++,this.log_=No("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ws,this.maxReconnectDelay_=mL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,a={r:s,a:e,b:n};this.log_(je(a)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new Gl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const h=l.d;l.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,i,s){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(l).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},l="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,h=>{const d=h.d,p=h.s;En.warnOnListenWarnings_(d,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Nn(e,"w")){const i=zr(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Fm)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=lI(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const a=s.s,l=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const a={p:e},l="n";s&&(a.q=i,a.t=s),this.sendRequest(l,a)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const a={p:n,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,a){this.initConnection_();const l={p:n,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+je(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Lh("Unrecognized action received from server: "+je(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vL&&(this.reconnectDelay_=ws),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+En.nextConnectionId_++,a=this.lastSessionId;let l=!1,h=null;const d=function(){h?h.close():(l=!0,i())},p=function(m){A(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(m)};this.realtime_={close:d,sendRequest:p};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,h=new hL(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,T=>{vt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(yL)},a))}catch(m){this.log_("Failed to get token: "+m),l||(this.repoInfo_.nodeAdmin&&vt(m),d())}}}interrupt(e){tt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Eh(this.interruptReasons_)&&(this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(a=>Jd(a)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new _e(e).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(n),a.delete(n),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){tt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Bm&&(this.reconnectDelay_=Fm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){tt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Bm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ww.replace(/\./g,"-")]=1,Ud()?e["framework.cordova"]=1:Ay()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yl.getInstance().currentlyOnline();return Eh(this.interruptReasons_)&&e}}En.nextPersistentConnectionId_=0;En.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new te(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new te(Br,e),s=new te(Br,n);return this.compare(i,s)!==0}minPost(){return te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va;class qw extends Xl{static get __EMPTY_NODE(){return va}static set __EMPTY_NODE(e){va=e}compare(e,n){return qr(e.name,n.name)}isDefinedOn(e){throw Zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return te.MIN}maxPost(){return new te(Wi,va)}makePost(e,n){return A(typeof e=="string","KeyIndex indexValue must always be a string."),new te(e,va)}toString(){return".key"}}const xr=new qw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ve{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Ve.RED,this.left=s??pt.EMPTY_NODE,this.right=a??pt.EMPTY_NODE}copy(e,n,i,s,a){return new Ve(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ve.RED=!0;Ve.BLACK=!1;class wL{copy(e,n,i,s,a){return this}insert(e,n,i){return new Ve(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class pt{constructor(e,n=pt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new pt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ve.BLACK,null,null))}remove(e){return new pt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ve.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ya(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ya(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ya(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ya(this.root_,null,this.comparator_,!0,e)}}pt.EMPTY_NODE=new wL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t,e){return qr(t.name,e.name)}function of(t,e){return qr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;function CL(t){Nh=t}const $w=function(t){return typeof t=="number"?"number:"+Iw(t):"string:"+t},Yw=function(t){if(t.isLeafNode()){const e=t.val();A(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nn(e,".sv"),"Priority must be a string or number.")}else A(t===Nh||t.isEmpty(),"priority of unexpected type.");A(t===Nh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um;class We{constructor(e,n=We.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Yw(this.priorityNode_)}static set __childrenNodeConstructor(e){Um=e}static get __childrenNodeConstructor(){return Um}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new We(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ne(e)?this:ee(e)===".priority"?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:We.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=ee(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(A(i!==".priority"||li(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,We.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$w(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Iw(this.value_):e+=this.value_,this.lazyHash_=Cw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===We.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof We.__childrenNodeConstructor?-1:(A(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=We.VALUE_TYPE_ORDER.indexOf(n),a=We.VALUE_TYPE_ORDER.indexOf(i);return A(s>=0,"Unknown leaf type: "+n),A(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}We.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw,Xw;function SL(t){Qw=t}function TL(t){Xw=t}class IL extends Xl{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),a=i.compareTo(s);return a===0?qr(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return te.MIN}maxPost(){return new te(Wi,new We("[PRIORITY-POST]",Xw))}makePost(e,n){const i=Qw(e);return new te(n,new We("[PRIORITY-POST]",i))}toString(){return".priority"}}const Le=new IL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=Math.log(2);class PL{constructor(e){const n=a=>parseInt(Math.log(a)/kL,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wl=function(t,e,n,i){t.sort(e);const s=function(d,p){const g=p-d;let m,v;if(g===0)return null;if(g===1)return m=t[d],v=n?n(m):m,new Ve(v,m.node,Ve.BLACK,null,null);{const T=parseInt(g/2,10)+d,k=s(d,T),P=s(T+1,p);return m=t[T],v=n?n(m):m,new Ve(v,m.node,Ve.BLACK,k,P)}},a=function(d){let p=null,g=null,m=t.length;const v=function(k,P){const V=m-k,E=m;m-=k;const w=s(V+1,E),C=t[V],N=n?n(C):C;T(new Ve(N,C.node,P,null,w))},T=function(k){p?(p.left=k,p=k):(g=k,p=k)};for(let k=0;k<d.count;++k){const P=d.nextBitIsOne(),V=Math.pow(2,d.count-(k+1));P?v(V,Ve.BLACK):(v(V,Ve.BLACK),v(V,Ve.RED))}return g},l=new PL(t.length),h=a(l);return new pt(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc;const rr={};class yn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return A(rr&&Le,"ChildrenNode.ts has not been loaded"),Sc=Sc||new yn({".priority":rr},{".priority":Le}),Sc}get(e){const n=zr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pt?n:null}hasIndex(e){return Nn(this.indexSet_,e.toString())}addIndex(e,n){A(e!==xr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=n.getIterator(te.Wrap);let l=a.getNext();for(;l;)s=s||e.isDefinedOn(l.node),i.push(l),l=a.getNext();let h;s?h=wl(i,e.getCompare()):h=rr;const d=e.toString(),p=Object.assign({},this.indexSet_);p[d]=e;const g=Object.assign({},this.indexes_);return g[d]=h,new yn(g,p)}addToIndexes(e,n){const i=cl(this.indexes_,(s,a)=>{const l=zr(this.indexSet_,a);if(A(l,"Missing index implementation for "+a),s===rr)if(l.isDefinedOn(e.node)){const h=[],d=n.getIterator(te.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&h.push(p),p=d.getNext();return h.push(e),wl(h,l.getCompare())}else return rr;else{const h=n.get(e.name);let d=s;return h&&(d=d.remove(new te(e.name,h))),d.insert(e,e.node)}});return new yn(i,this.indexSet_)}removeFromIndexes(e,n){const i=cl(this.indexes_,s=>{if(s===rr)return s;{const a=n.get(e.name);return a?s.remove(new te(e.name,a)):s}});return new yn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es;class Z{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yw(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Es||(Es=new Z(new pt(of),null,yn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Es}updatePriority(e){return this.children_.isEmpty()?this:new Z(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Es:n}}getChild(e){const n=ee(e);return n===null?this:this.getImmediateChild(n).getChild(ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(A(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new te(e,n);let s,a;n.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?Es:this.priorityNode_;return new Z(s,l,a)}}updateChild(e,n){const i=ee(e);if(i===null)return n;{A(ee(e)!==".priority"||li(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ve(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,a=!0;if(this.forEachChild(Le,(l,h)=>{n[l]=h.val(e),i++,a&&Z.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!e&&a&&s<2*i){const l=[];for(const h in n)l[h]=n[h];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$w(this.getPriority().val())+":"),this.forEachChild(Le,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Cw(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new te(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new te(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new te(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,te.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,te.Wrap);let a=s.peek();for(;a!=null&&n.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Oo?-1:0}withIndex(e){if(e===xr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Z(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===xr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Le),s=n.getIterator(Le);let a=i.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===xr?null:this.indexMap_.get(e.toString())}}Z.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xL extends Z{constructor(){super(new pt(of),Z.EMPTY_NODE,yn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Z.EMPTY_NODE}isEmpty(){return!1}}const Oo=new xL;Object.defineProperties(te,{MIN:{value:new te(Br,Z.EMPTY_NODE)},MAX:{value:new te(Wi,Oo)}});qw.__EMPTY_NODE=Z.EMPTY_NODE;We.__childrenNodeConstructor=Z;CL(Oo);TL(Oo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=!0;function $e(t,e=null){if(t===null)return Z.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),A(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new We(n,$e(e))}if(!(t instanceof Array)&&LL){const n=[];let i=!1;if(yt(t,(l,h)=>{if(l.substring(0,1)!=="."){const d=$e(h);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),n.push(new te(l,d)))}}),n.length===0)return Z.EMPTY_NODE;const a=wl(n,EL,l=>l.name,of);if(i){const l=wl(n,Le.getCompare());return new Z(a,$e(e),new yn({".priority":l},{".priority":Le}))}else return new Z(a,$e(e),yn.Default)}else{let n=Z.EMPTY_NODE;return yt(t,(i,s)=>{if(Nn(t,i)&&i.substring(0,1)!=="."){const a=$e(s);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(i,a))}}),n.updatePriority($e(e))}}SL($e);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL extends Xl{constructor(e){super(),this.indexPath_=e,A(!ne(e)&&ee(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),a=i.compareTo(s);return a===0?qr(e.name,n.name):a}makePost(e,n){const i=$e(e),s=Z.EMPTY_NODE.updateChild(this.indexPath_,i);return new te(n,s)}maxPost(){const e=Z.EMPTY_NODE.updateChild(this.indexPath_,Oo);return new te(Wi,e)}toString(){return Zw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL extends Xl{compare(e,n){const i=e.node.compareTo(n.node);return i===0?qr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(e,n){const i=$e(e);return new te(n,i)}toString(){return".value"}}const OL=new NL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){return{type:"value",snapshotNode:t}}function Ur(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function co(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ho(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function AL(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.index_=e}updateChild(e,n,i,s,a,l){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(s).equals(i.getChild(s))&&h.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(co(n,h)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Ur(n,i)):l.trackChildChange(ho(n,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Le,(s,a)=>{n.hasChild(s)||i.trackChildChange(co(s,a))}),n.isLeafNode()||n.forEachChild(Le,(s,a)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(a)||i.trackChildChange(ho(s,a,l))}else i.trackChildChange(Ur(s,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Z.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.indexedFilter_=new af(e.getIndex()),this.index_=e.getIndex(),this.startPost_=fo.getStartPost_(e),this.endPost_=fo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,a,l){return this.matches(new te(n,i))||(i=Z.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,a,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=Z.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Z.EMPTY_NODE);const a=this;return n.forEachChild(Le,(l,h)=>{a.matches(new te(l,h))||(s=s.updateImmediateChild(l,Z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new fo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,a,l){return this.rangedFilter_.matches(new te(n,i))||(i=Z.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,a,l):this.fullLimitUpdateChild_(e,n,i,a,l)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=Z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Z.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))s=s.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Z.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:s=s.updateImmediateChild(h.name,Z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,a){let l;if(this.reverse_){const m=this.index_.getCompare();l=(v,T)=>m(T,v)}else l=this.index_.getCompare();const h=e;A(h.numChildren()===this.limit_,"");const d=new te(n,i),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(h.hasChild(n)){const m=h.getImmediateChild(n);let v=s.getChildAfterChild(this.index_,p,this.reverse_);for(;v!=null&&(v.name===n||h.hasChild(v.name));)v=s.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:l(v,d);if(g&&!i.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(ho(n,i,m)),h.updateImmediateChild(n,i);{a!=null&&a.trackChildChange(co(n,m));const P=h.updateImmediateChild(n,Z.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(Ur(v.name,v.node)),P.updateImmediateChild(v.name,v.node)):P}}else return i.isEmpty()?e:g&&l(p,d)>=0?(a!=null&&(a.trackChildChange(co(p.name,p.node)),a.trackChildChange(Ur(n,i))),h.updateImmediateChild(n,i).updateImmediateChild(p.name,Z.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Br}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new lf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bL(t){return t.loadsAllData()?new af(t.getIndex()):t.hasLimit()?new ML(t):new fo(t)}function Wm(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===OL?n="$value":t.index_===xr?n="$key":(A(t.index_ instanceof RL,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=je(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=je(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+je(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=je(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+je(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Hm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Hw{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=No("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=El.getListenId_(e,i),h={};this.listens_[l]=h;const d=Wm(e._queryParams);this.restRequest_(a+".json",d,(p,g)=>{let m=g;if(p===404&&(m=null,p=null),p===null&&this.onDataUpdate_(a,m,!1,i),zr(this.listens_,l)===h){let v;p?p===401?v="permission_denied":v="rest_error:"+p:v="ok",s(v,null)}})}unlisten(e,n){const i=El.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Wm(e._queryParams),i=e._path.toString(),s=new Gl;return this.restRequest_(i+".json",n,(a,l)=>{let h=l;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(i,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(n.auth=s.accessToken),a&&a.token&&(n.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gr(n);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=so(h.responseText)}catch{vt("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,d)}else h.status!==401&&h.status!==404&&vt("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.rootNode_=Z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(){return{value:null,children:new Map}}function e0(t,e,n){if(ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=ee(e);t.children.has(i)||t.children.set(i,Cl());const s=t.children.get(i);e=ve(e),e0(s,e,n)}}function Oh(t,e,n){t.value!==null?n(e,t.value):zL(t,(i,s)=>{const a=new _e(e.toString()+"/"+i);Oh(s,a,n)})}function zL(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yt(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=10*1e3,BL=30*1e3,UL=5*60*1e3;class WL{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new FL(e);const i=Vm+(BL-Vm)*Math.random();Fs(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;yt(e,(s,a)=>{a>0&&Nn(this.statsToReport_,s)&&(n[s]=a,i=!0)}),i&&this.server_.reportStats(n),Fs(this.reportStats_.bind(this),Math.floor(Math.random()*2*UL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zt||(Zt={}));function t0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Zt.ACK_USER_WRITE,this.source=t0()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new _e(e));return new Sl(ce(),n,this.revert)}}else return A(ee(this.path)===e,"operationForChild called for unrelated child."),new Sl(ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.source=e,this.path=n,this.type=Zt.LISTEN_COMPLETE}operationForChild(e){return ne(this.path)?new po(this.source,ce()):new po(this.source,ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Zt.OVERWRITE}operationForChild(e){return ne(this.path)?new Hi(this.source,ce(),this.snap.getImmediateChild(e)):new Hi(this.source,ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Zt.MERGE}operationForChild(e){if(ne(this.path)){const n=this.children.subtree(new _e(e));return n.isEmpty()?null:n.value?new Hi(this.source,ce(),n.value):new _o(this.source,ce(),n)}else return A(ee(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _o(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=ee(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function VL(t,e,n,i){const s=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(AL(l.childName,l.snapshotNode))}),Cs(t,s,"child_removed",e,i,n),Cs(t,s,"child_added",e,i,n),Cs(t,s,"child_moved",a,i,n),Cs(t,s,"child_changed",e,i,n),Cs(t,s,"value",e,i,n),s}function Cs(t,e,n,i,s,a){const l=i.filter(h=>h.type===n);l.sort((h,d)=>ZL(t,h,d)),l.forEach(h=>{const d=jL(t,h,a);s.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(d,t.query_))})})}function jL(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ZL(t,e,n){if(e.childName==null||n.childName==null)throw Zr("Should only compare child_ events.");const i=new te(e.childName,e.snapshotNode),s=new te(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t,e){return{eventCache:t,serverCache:e}}function Bs(t,e,n,i){return Jl(new Vi(e,n,i),t.serverCache)}function n0(t,e,n,i){return Jl(t.eventCache,new Vi(e,n,i))}function Ah(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ji(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc;const GL=()=>(Tc||(Tc=new pt(Nx)),Tc);class Ee{constructor(e,n=GL()){this.value=e,this.children=n}static fromObject(e){let n=new Ee(null);return yt(e,(i,s)=>{n=n.set(new _e(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ce(),value:this.value};if(ne(e))return null;{const i=ee(e),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue(ve(e),n);return a!=null?{path:ze(new _e(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{const n=ee(e),i=this.children.get(n);return i!==null?i.subtree(ve(e)):new Ee(null)}}set(e,n){if(ne(e))return new Ee(n,this.children);{const i=ee(e),a=(this.children.get(i)||new Ee(null)).set(ve(e),n),l=this.children.insert(i,a);return new Ee(this.value,l)}}remove(e){if(ne(e))return this.children.isEmpty()?new Ee(null):new Ee(null,this.children);{const n=ee(e),i=this.children.get(n);if(i){const s=i.remove(ve(e));let a;return s.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,s),this.value===null&&a.isEmpty()?new Ee(null):new Ee(this.value,a)}else return this}}get(e){if(ne(e))return this.value;{const n=ee(e),i=this.children.get(n);return i?i.get(ve(e)):null}}setTree(e,n){if(ne(e))return n;{const i=ee(e),a=(this.children.get(i)||new Ee(null)).setTree(ve(e),n);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new Ee(this.value,l)}}fold(e){return this.fold_(ce(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(ze(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ce(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(ne(e))return null;{const a=ee(e),l=this.children.get(a);return l?l.findOnPath_(ve(e),ze(n,a),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ce(),n)}foreachOnPath_(e,n,i){if(ne(e))return this;{this.value&&i(n,this.value);const s=ee(e),a=this.children.get(s);return a?a.foreachOnPath_(ve(e),ze(n,s),i):new Ee(null)}}foreach(e){this.foreach_(ce(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(ze(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.writeTree_=e}static empty(){return new qt(new Ee(null))}}function Us(t,e,n){if(ne(e))return new qt(new Ee(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let a=i.value;const l=ft(s,e);return a=a.updateChild(l,n),new qt(t.writeTree_.set(s,a))}else{const s=new Ee(n),a=t.writeTree_.setTree(e,s);return new qt(a)}}}function jm(t,e,n){let i=t;return yt(n,(s,a)=>{i=Us(i,ze(e,s),a)}),i}function Zm(t,e){if(ne(e))return qt.empty();{const n=t.writeTree_.setTree(e,new Ee(null));return new qt(n)}}function Mh(t,e){return Ki(t,e)!=null}function Ki(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ft(n.path,e)):null}function Gm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Le,(i,s)=>{e.push(new te(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new te(i,s.value))}),e}function ri(t,e){if(ne(e))return t;{const n=Ki(t,e);return n!=null?new qt(new Ee(n)):new qt(t.writeTree_.subtree(e))}}function bh(t){return t.writeTree_.isEmpty()}function Wr(t,e){return i0(ce(),t.writeTree_,e)}function i0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(A(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):n=i0(ze(t,s),a,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ze(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){return a0(e,t)}function KL(t,e,n,i,s){A(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Us(t.visibleWrites,e,n)),t.lastWriteId=i}function qL(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function $L(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,a=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const h=t.allWrites[l];h.visible&&(l>=n&&YL(h,i.path)?s=!1:jt(i.path,h.path)&&(a=!0)),l--}if(s){if(a)return QL(t),!0;if(i.snap)t.visibleWrites=Zm(t.visibleWrites,i.path);else{const h=i.children;yt(h,d=>{t.visibleWrites=Zm(t.visibleWrites,ze(i.path,d))})}return!0}else return!1}function YL(t,e){if(t.snap)return jt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jt(ze(t.path,n),e))return!0;return!1}function QL(t){t.visibleWrites=r0(t.allWrites,XL,ce()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function XL(t){return t.visible}function r0(t,e,n){let i=qt.empty();for(let s=0;s<t.length;++s){const a=t[s];if(e(a)){const l=a.path;let h;if(a.snap)jt(n,l)?(h=ft(n,l),i=Us(i,h,a.snap)):jt(l,n)&&(h=ft(l,n),i=Us(i,ce(),a.snap.getChild(h)));else if(a.children){if(jt(n,l))h=ft(n,l),i=jm(i,h,a.children);else if(jt(l,n))if(h=ft(l,n),ne(h))i=jm(i,ce(),a.children);else{const d=zr(a.children,ee(h));if(d){const p=d.getChild(ve(h));i=Us(i,ce(),p)}}}else throw Zr("WriteRecord should have .snap or .children")}}return i}function s0(t,e,n,i,s){if(!i&&!s){const a=Ki(t.visibleWrites,e);if(a!=null)return a;{const l=ri(t.visibleWrites,e);if(bh(l))return n;if(n==null&&!Mh(l,ce()))return null;{const h=n||Z.EMPTY_NODE;return Wr(l,h)}}}else{const a=ri(t.visibleWrites,e);if(!s&&bh(a))return n;if(!s&&n==null&&!Mh(a,ce()))return null;{const l=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(jt(p.path,e)||jt(e,p.path))},h=r0(t.allWrites,l,e),d=n||Z.EMPTY_NODE;return Wr(h,d)}}}function JL(t,e,n){let i=Z.EMPTY_NODE;const s=Ki(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Le,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(n){const a=ri(t.visibleWrites,e);return n.forEachChild(Le,(l,h)=>{const d=Wr(ri(a,new _e(l)),h);i=i.updateImmediateChild(l,d)}),Gm(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=ri(t.visibleWrites,e);return Gm(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function e1(t,e,n,i,s){A(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=ze(e,n);if(Mh(t.visibleWrites,a))return null;{const l=ri(t.visibleWrites,a);return bh(l)?s.getChild(n):Wr(l,s.getChild(n))}}function t1(t,e,n,i){const s=ze(e,n),a=Ki(t.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(n)){const l=ri(t.visibleWrites,s);return Wr(l,i.getNode().getImmediateChild(n))}else return null}function n1(t,e){return Ki(t.visibleWrites,e)}function i1(t,e,n,i,s,a,l){let h;const d=ri(t.visibleWrites,e),p=Ki(d,ce());if(p!=null)h=p;else if(n!=null)h=Wr(d,n);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){const g=[],m=l.getCompare(),v=a?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let T=v.getNext();for(;T&&g.length<s;)m(T,i)!==0&&g.push(T),T=v.getNext();return g}else return[]}function r1(){return{visibleWrites:qt.empty(),allWrites:[],lastWriteId:-1}}function Tl(t,e,n,i){return s0(t.writeTree,t.treePath,e,n,i)}function df(t,e){return JL(t.writeTree,t.treePath,e)}function Km(t,e,n,i){return e1(t.writeTree,t.treePath,e,n,i)}function Il(t,e){return n1(t.writeTree,ze(t.treePath,e))}function s1(t,e,n,i,s,a){return i1(t.writeTree,t.treePath,e,n,i,s,a)}function ff(t,e,n){return t1(t.writeTree,t.treePath,e,n)}function o0(t,e){return a0(ze(t.treePath,e),t.writeTree)}function a0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;A(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),A(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(i,ho(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(i,co(i,s.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(i,Ur(i,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(i,ho(i,e.snapshotNode,s.oldSnap));else throw Zr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const l0=new a1;class pf{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Vi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ff(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ji(this.viewCache_),a=s1(this.writes_,s,n,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){return{filter:t}}function u1(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function c1(t,e,n,i,s){const a=new o1;let l,h;if(n.type===Zt.OVERWRITE){const p=n;p.source.fromUser?l=Dh(t,e,p.path,p.snap,i,s,a):(A(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!ne(p.path),l=kl(t,e,p.path,p.snap,i,s,h,a))}else if(n.type===Zt.MERGE){const p=n;p.source.fromUser?l=d1(t,e,p.path,p.children,i,s,a):(A(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),l=zh(t,e,p.path,p.children,i,s,h,a))}else if(n.type===Zt.ACK_USER_WRITE){const p=n;p.revert?l=_1(t,e,p.path,i,s,a):l=f1(t,e,p.path,p.affectedTree,i,s,a)}else if(n.type===Zt.LISTEN_COMPLETE)l=p1(t,e,n.path,i,a);else throw Zr("Unknown operation type: "+n.type);const d=a.getChanges();return h1(e,l,d),{viewCache:l,changes:d}}function h1(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=Ah(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&n.push(Jw(Ah(e)))}}function u0(t,e,n,i,s,a){const l=e.eventCache;if(Il(i,n)!=null)return e;{let h,d;if(ne(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=ji(e),g=p instanceof Z?p:Z.EMPTY_NODE,m=df(i,g);h=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const p=Tl(i,ji(e));h=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=ee(n);if(p===".priority"){A(li(n)===1,"Can't have a priority with additional path components");const g=l.getNode();d=e.serverCache.getNode();const m=Km(i,n,g,d);m!=null?h=t.filter.updatePriority(g,m):h=l.getNode()}else{const g=ve(n);let m;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const v=Km(i,n,l.getNode(),d);v!=null?m=l.getNode().getImmediateChild(p).updateChild(g,v):m=l.getNode().getImmediateChild(p)}else m=ff(i,p,e.serverCache);m!=null?h=t.filter.updateChild(l.getNode(),p,m,g,s,a):h=l.getNode()}}return Bs(e,h,l.isFullyInitialized()||ne(n),t.filter.filtersNodes())}}function kl(t,e,n,i,s,a,l,h){const d=e.serverCache;let p;const g=l?t.filter:t.filter.getIndexedFilter();if(ne(n))p=g.updateFullNode(d.getNode(),i,null);else if(g.filtersNodes()&&!d.isFiltered()){const T=d.getNode().updateChild(n,i);p=g.updateFullNode(d.getNode(),T,null)}else{const T=ee(n);if(!d.isCompleteForPath(n)&&li(n)>1)return e;const k=ve(n),V=d.getNode().getImmediateChild(T).updateChild(k,i);T===".priority"?p=g.updatePriority(d.getNode(),V):p=g.updateChild(d.getNode(),T,V,k,l0,null)}const m=n0(e,p,d.isFullyInitialized()||ne(n),g.filtersNodes()),v=new pf(s,m,a);return u0(t,m,n,s,v,h)}function Dh(t,e,n,i,s,a,l){const h=e.eventCache;let d,p;const g=new pf(s,e,a);if(ne(n))p=t.filter.updateFullNode(e.eventCache.getNode(),i,l),d=Bs(e,p,!0,t.filter.filtersNodes());else{const m=ee(n);if(m===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),i),d=Bs(e,p,h.isFullyInitialized(),h.isFiltered());else{const v=ve(n),T=h.getNode().getImmediateChild(m);let k;if(ne(v))k=i;else{const P=g.getCompleteChild(m);P!=null?jw(v)===".priority"&&P.getChild(Gw(v)).isEmpty()?k=P:k=P.updateChild(v,i):k=Z.EMPTY_NODE}if(T.equals(k))d=e;else{const P=t.filter.updateChild(h.getNode(),m,k,v,g,l);d=Bs(e,P,h.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function qm(t,e){return t.eventCache.isCompleteForChild(e)}function d1(t,e,n,i,s,a,l){let h=e;return i.foreach((d,p)=>{const g=ze(n,d);qm(e,ee(g))&&(h=Dh(t,h,g,p,s,a,l))}),i.foreach((d,p)=>{const g=ze(n,d);qm(e,ee(g))||(h=Dh(t,h,g,p,s,a,l))}),h}function $m(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function zh(t,e,n,i,s,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;ne(n)?p=i:p=new Ee(null).setTree(n,i);const g=e.serverCache.getNode();return p.children.inorderTraversal((m,v)=>{if(g.hasChild(m)){const T=e.serverCache.getNode().getImmediateChild(m),k=$m(t,T,v);d=kl(t,d,new _e(m),k,s,a,l,h)}}),p.children.inorderTraversal((m,v)=>{const T=!e.serverCache.isCompleteForChild(m)&&v.value===null;if(!g.hasChild(m)&&!T){const k=e.serverCache.getNode().getImmediateChild(m),P=$m(t,k,v);d=kl(t,d,new _e(m),P,s,a,l,h)}}),d}function f1(t,e,n,i,s,a,l){if(Il(s,n)!=null)return e;const h=e.serverCache.isFiltered(),d=e.serverCache;if(i.value!=null){if(ne(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return kl(t,e,n,d.getNode().getChild(n),s,a,h,l);if(ne(n)){let p=new Ee(null);return d.getNode().forEachChild(xr,(g,m)=>{p=p.set(new _e(g),m)}),zh(t,e,n,p,s,a,h,l)}else return e}else{let p=new Ee(null);return i.foreach((g,m)=>{const v=ze(n,g);d.isCompleteForPath(v)&&(p=p.set(g,d.getNode().getChild(v)))}),zh(t,e,n,p,s,a,h,l)}}function p1(t,e,n,i,s){const a=e.serverCache,l=n0(e,a.getNode(),a.isFullyInitialized()||ne(n),a.isFiltered());return u0(t,l,n,i,l0,s)}function _1(t,e,n,i,s,a){let l;if(Il(i,n)!=null)return e;{const h=new pf(i,e,s),d=e.eventCache.getNode();let p;if(ne(n)||ee(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Tl(i,ji(e));else{const m=e.serverCache.getNode();A(m instanceof Z,"serverChildren would be complete if leaf node"),g=df(i,m)}g=g,p=t.filter.updateFullNode(d,g,a)}else{const g=ee(n);let m=ff(i,g,e.serverCache);m==null&&e.serverCache.isCompleteForChild(g)&&(m=d.getImmediateChild(g)),m!=null?p=t.filter.updateChild(d,g,m,ve(n),h,a):e.eventCache.getNode().hasChild(g)?p=t.filter.updateChild(d,g,Z.EMPTY_NODE,ve(n),h,a):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Tl(i,ji(e)),l.isLeafNode()&&(p=t.filter.updateFullNode(p,l,a)))}return l=e.serverCache.isFullyInitialized()||Il(i,ce())!=null,Bs(e,p,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new af(i.getIndex()),a=bL(i);this.processor_=l1(a);const l=n.serverCache,h=n.eventCache,d=s.updateFullNode(Z.EMPTY_NODE,l.getNode(),null),p=a.updateFullNode(Z.EMPTY_NODE,h.getNode(),null),g=new Vi(d,l.isFullyInitialized(),s.filtersNodes()),m=new Vi(p,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Jl(m,g),this.eventGenerator_=new HL(this.query_)}get query(){return this.query_}}function g1(t){return t.viewCache_.serverCache.getNode()}function v1(t,e){const n=ji(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ne(e)&&!n.getImmediateChild(ee(e)).isEmpty())?n.getChild(e):null}function Ym(t){return t.eventRegistrations_.length===0}function y1(t,e){t.eventRegistrations_.push(e)}function Qm(t,e,n){const i=[];if(n){A(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(n,s);l&&i.push(l)})}if(e){let s=[];for(let a=0;a<t.eventRegistrations_.length;++a){const l=t.eventRegistrations_[a];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function Xm(t,e,n,i){e.type===Zt.MERGE&&e.source.queryId!==null&&(A(ji(t.viewCache_),"We should always have a full cache before handling merges"),A(Ah(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,a=c1(t.processor_,s,e,n,i);return u1(t.processor_,a.viewCache),A(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,c0(t,a.changes,a.viewCache.eventCache.getNode(),null)}function w1(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Le,(a,l)=>{i.push(Ur(a,l))}),n.isFullyInitialized()&&i.push(Jw(n.getNode())),c0(t,i,n.getNode(),e)}function c0(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return VL(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl;class E1{constructor(){this.views=new Map}}function C1(t){A(!Pl,"__referenceConstructor has already been defined"),Pl=t}function S1(){return A(Pl,"Reference.ts has not been loaded"),Pl}function T1(t){return t.views.size===0}function _f(t,e,n,i){const s=e.source.queryId;if(s!==null){const a=t.views.get(s);return A(a!=null,"SyncTree gave us an op for an invalid query."),Xm(a,e,n,i)}else{let a=[];for(const l of t.views.values())a=a.concat(Xm(l,e,n,i));return a}}function I1(t,e,n,i,s){const a=e._queryIdentifier,l=t.views.get(a);if(!l){let h=Tl(n,s?i:null),d=!1;h?d=!0:i instanceof Z?(h=df(n,i),d=!1):(h=Z.EMPTY_NODE,d=!1);const p=Jl(new Vi(h,d,!1),new Vi(i,s,!1));return new m1(e,p)}return l}function k1(t,e,n,i,s,a){const l=I1(t,e,i,s,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),y1(l,n),w1(l,n)}function P1(t,e,n,i){const s=e._queryIdentifier,a=[];let l=[];const h=ui(t);if(s==="default")for(const[d,p]of t.views.entries())l=l.concat(Qm(p,n,i)),Ym(p)&&(t.views.delete(d),p.query._queryParams.loadsAllData()||a.push(p.query));else{const d=t.views.get(s);d&&(l=l.concat(Qm(d,n,i)),Ym(d)&&(t.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)))}return h&&!ui(t)&&a.push(new(S1())(e._repo,e._path)),{removed:a,events:l}}function h0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Lr(t,e){let n=null;for(const i of t.views.values())n=n||v1(i,e);return n}function d0(t,e){if(e._queryParams.loadsAllData())return eu(t);{const i=e._queryIdentifier;return t.views.get(i)}}function f0(t,e){return d0(t,e)!=null}function ui(t){return eu(t)!=null}function eu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl;function x1(t){A(!xl,"__referenceConstructor has already been defined"),xl=t}function L1(){return A(xl,"Reference.ts has not been loaded"),xl}let R1=1;class Jm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ee(null),this.pendingWriteTree_=r1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function p0(t,e,n,i,s){return KL(t.pendingWriteTree_,e,n,i,s),s?Ao(t,new Hi(t0(),e,n)):[]}function Li(t,e,n=!1){const i=qL(t.pendingWriteTree_,e);if($L(t.pendingWriteTree_,e)){let a=new Ee(null);return i.snap!=null?a=a.set(ce(),!0):yt(i.children,l=>{a=a.set(new _e(l),!0)}),Ao(t,new Sl(i.path,a,n))}else return[]}function tu(t,e,n){return Ao(t,new Hi(uf(),e,n))}function N1(t,e,n){const i=Ee.fromObject(n);return Ao(t,new _o(uf(),e,i))}function O1(t,e){return Ao(t,new po(uf(),e))}function A1(t,e,n){const i=gf(t,n);if(i){const s=vf(i),a=s.path,l=s.queryId,h=ft(a,e),d=new po(cf(l),h);return yf(t,a,d)}else return[]}function Fh(t,e,n,i,s=!1){const a=e._path,l=t.syncPointTree_.get(a);let h=[];if(l&&(e._queryIdentifier==="default"||f0(l,e))){const d=P1(l,e,n,i);T1(l)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const p=d.removed;if(h=d.events,!s){const g=p.findIndex(v=>v._queryParams.loadsAllData())!==-1,m=t.syncPointTree_.findOnPath(a,(v,T)=>ui(T));if(g&&!m){const v=t.syncPointTree_.subtree(a);if(!v.isEmpty()){const T=D1(v);for(let k=0;k<T.length;++k){const P=T[k],V=P.query,E=g0(t,P);t.listenProvider_.startListening(Ws(V),Ll(t,V),E.hashFn,E.onComplete)}}}!m&&p.length>0&&!i&&(g?t.listenProvider_.stopListening(Ws(e),null):p.forEach(v=>{const T=t.queryToTagMap.get(nu(v));t.listenProvider_.stopListening(Ws(v),T)}))}z1(t,p)}return h}function M1(t,e,n,i){const s=gf(t,i);if(s!=null){const a=vf(s),l=a.path,h=a.queryId,d=ft(l,e),p=new Hi(cf(h),d,n);return yf(t,l,p)}else return[]}function b1(t,e,n,i){const s=gf(t,i);if(s){const a=vf(s),l=a.path,h=a.queryId,d=ft(l,e),p=Ee.fromObject(n),g=new _o(cf(h),d,p);return yf(t,l,g)}else return[]}function eg(t,e,n,i=!1){const s=e._path;let a=null,l=!1;t.syncPointTree_.foreachOnPath(s,(v,T)=>{const k=ft(v,s);a=a||Lr(T,k),l=l||ui(T)});let h=t.syncPointTree_.get(s);h?(l=l||ui(h),a=a||Lr(h,ce())):(h=new E1,t.syncPointTree_=t.syncPointTree_.set(s,h));let d;a!=null?d=!0:(d=!1,a=Z.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((T,k)=>{const P=Lr(k,ce());P&&(a=a.updateImmediateChild(T,P))}));const p=f0(h,e);if(!p&&!e._queryParams.loadsAllData()){const v=nu(e);A(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const T=F1();t.queryToTagMap.set(v,T),t.tagToQueryMap.set(T,v)}const g=hf(t.pendingWriteTree_,s);let m=k1(h,e,n,g,a,d);if(!p&&!l&&!i){const v=d0(h,e);m=m.concat(B1(t,e,v))}return m}function mf(t,e,n){const s=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,h)=>{const d=ft(l,e),p=Lr(h,d);if(p)return p});return s0(s,e,a,n,!0)}function Ao(t,e){return _0(e,t.syncPointTree_,null,hf(t.pendingWriteTree_,ce()))}function _0(t,e,n,i){if(ne(t.path))return m0(t,e,n,i);{const s=e.get(ce());n==null&&s!=null&&(n=Lr(s,ce()));let a=[];const l=ee(t.path),h=t.operationForChild(l),d=e.children.get(l);if(d&&h){const p=n?n.getImmediateChild(l):null,g=o0(i,l);a=a.concat(_0(h,d,p,g))}return s&&(a=a.concat(_f(s,t,i,n))),a}}function m0(t,e,n,i){const s=e.get(ce());n==null&&s!=null&&(n=Lr(s,ce()));let a=[];return e.children.inorderTraversal((l,h)=>{const d=n?n.getImmediateChild(l):null,p=o0(i,l),g=t.operationForChild(l);g&&(a=a.concat(m0(g,h,d,p)))}),s&&(a=a.concat(_f(s,t,i,n))),a}function g0(t,e){const n=e.query,i=Ll(t,n);return{hashFn:()=>(g1(e)||Z.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?A1(t,n._path,i):O1(t,n._path);{const a=Mx(s,n);return Fh(t,n,null,a)}}}}function Ll(t,e){const n=nu(e);return t.queryToTagMap.get(n)}function nu(t){return t._path.toString()+"$"+t._queryIdentifier}function gf(t,e){return t.tagToQueryMap.get(e)}function vf(t){const e=t.indexOf("$");return A(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _e(t.substr(0,e))}}function yf(t,e,n){const i=t.syncPointTree_.get(e);A(i,"Missing sync point for query tag that we're tracking");const s=hf(t.pendingWriteTree_,e);return _f(i,n,s,null)}function D1(t){return t.fold((e,n,i)=>{if(n&&ui(n))return[eu(n)];{let s=[];return n&&(s=h0(n)),yt(i,(a,l)=>{s=s.concat(l)}),s}})}function Ws(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(L1())(t._repo,t._path):t}function z1(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=nu(i),a=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(a)}}}function F1(){return R1++}function B1(t,e,n){const i=e._path,s=Ll(t,e),a=g0(t,n),l=t.listenProvider_.startListening(Ws(e),s,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(i);if(s)A(!ui(h.value),"If we're adding a query, it shouldn't be shadowed");else{const d=h.fold((p,g,m)=>{if(!ne(p)&&g&&ui(g))return[eu(g).query];{let v=[];return g&&(v=v.concat(h0(g).map(T=>T.query))),yt(m,(T,k)=>{v=v.concat(k)}),v}});for(let p=0;p<d.length;++p){const g=d[p];t.listenProvider_.stopListening(Ws(g),Ll(t,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new wf(n)}node(){return this.node_}}class Ef{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ze(this.path_,e);return new Ef(this.syncTree_,n)}node(){return mf(this.syncTree_,this.path_)}}const U1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tg=function(t,e,n){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return W1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return H1(t[".sv"],e);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},W1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:A(!1,"Unexpected server value: "+t)}},H1=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&A(!1,"Unexpected increment value: "+i);const s=e.node();if(A(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const l=s.getValue();return typeof l!="number"?i:l+i},V1=function(t,e,n,i){return Cf(e,new Ef(n,t),i)},v0=function(t,e,n){return Cf(t,new wf(e),n)};function Cf(t,e,n){const i=t.getPriority().val(),s=tg(i,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const l=t,h=tg(l.getValue(),e,n);return h!==l.getValue()||s!==l.getPriority().val()?new We(h,$e(s)):t}else{const l=t;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new We(s))),l.forEachChild(Le,(h,d)=>{const p=Cf(d,e.getImmediateChild(h),n);p!==d&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Tf(t,e){let n=e instanceof _e?e:new _e(e),i=t,s=ee(n);for(;s!==null;){const a=zr(i.node.children,s)||{children:{},childCount:0};i=new Sf(s,i,a),n=ve(n),s=ee(n)}return i}function Yr(t){return t.node.value}function y0(t,e){t.node.value=e,Bh(t)}function w0(t){return t.node.childCount>0}function j1(t){return Yr(t)===void 0&&!w0(t)}function iu(t,e){yt(t.node.children,(n,i)=>{e(new Sf(n,t,i))})}function E0(t,e,n,i){n&&e(t),iu(t,s=>{E0(s,e,!0)})}function Z1(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Mo(t){return new _e(t.parent===null?t.name:Mo(t.parent)+"/"+t.name)}function Bh(t){t.parent!==null&&G1(t.parent,t.name,t)}function G1(t,e,n){const i=j1(n),s=Nn(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,Bh(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Bh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/[\[\].#$\/\u0000-\u001F\u007F]/,q1=/[\[\].#$\u0000-\u001F\u007F]/,Ic=10*1024*1024,C0=function(t){return typeof t=="string"&&t.length!==0&&!K1.test(t)},S0=function(t){return typeof t=="string"&&t.length!==0&&!q1.test(t)},$1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),S0(t)},T0=function(t,e,n,i){i&&e===void 0||If(Wd(t,"value"),e,n)},If=function(t,e,n){const i=n instanceof _e?new fL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ti(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ti(i)+" with contents = "+e.toString());if(Sw(e))throw new Error(t+"contains "+e.toString()+" "+Ti(i));if(typeof e=="string"&&e.length>Ic/3&&Kl(e)>Ic)throw new Error(t+"contains a string greater than "+Ic+" utf8 bytes "+Ti(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(yt(e,(l,h)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!C0(l)))throw new Error(t+" contains an invalid key ("+l+") "+Ti(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pL(i,l),If(t,h,i),_L(i)}),s&&a)throw new Error(t+' contains ".value" child '+Ti(i)+" in addition to actual children.")}},I0=function(t,e,n,i){if(!S0(n))throw new Error(Wd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Y1=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),I0(t,e,n)},k0=function(t,e){if(ee(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Q1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!C0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$1(n))throw new Error(Wd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kf(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],a=s.getPath();n!==null&&!rf(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(s)}n&&t.eventLists_.push(n)}function P0(t,e,n){kf(t,n),x0(t,i=>rf(i,e))}function Ln(t,e,n){kf(t,n),x0(t,i=>jt(i,e)||jt(e,i))}function x0(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const a=s.path;e(a)?(J1(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function J1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();zs&&tt("event: "+n.toString()),$r(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="repo_interrupt",tR=25;class nR{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new X1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cl(),this.transactionQueueTree_=new Sf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iR(t,e,n){if(t.stats_=tf(t.repoInfo_),t.forceRestClient_||Fx())t.server_=new El(t.repoInfo_,(i,s,a,l)=>{ng(t,i,s,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ig(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new En(t.repoInfo_,e,(i,s,a,l)=>{ng(t,i,s,a,l)},i=>{ig(t,i)},i=>{rR(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Vx(t.repoInfo_,()=>new WL(t.stats_,t.server_)),t.infoData_=new DL,t.infoSyncTree_=new Jm({startListening:(i,s,a,l)=>{let h=[];const d=t.infoData_.getNode(i._path);return d.isEmpty()||(h=tu(t.infoSyncTree_,i._path,d),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),xf(t,"connected",!1),t.serverSyncTree_=new Jm({startListening:(i,s,a,l)=>(t.server_.listen(i,a,s,(h,d)=>{const p=l(h,d);Ln(t.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function L0(t){const n=t.infoData_.getNode(new _e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Pf(t){return U1({timestamp:L0(t)})}function ng(t,e,n,i,s){t.dataUpdateCount++;const a=new _e(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(s)if(i){const d=cl(n,p=>$e(p));l=b1(t.serverSyncTree_,a,d,s)}else{const d=$e(n);l=M1(t.serverSyncTree_,a,d,s)}else if(i){const d=cl(n,p=>$e(p));l=N1(t.serverSyncTree_,a,d)}else{const d=$e(n);l=tu(t.serverSyncTree_,a,d)}let h=a;l.length>0&&(h=ru(t,a)),Ln(t.eventQueue_,h,l)}function ig(t,e){xf(t,"connected",e),e===!1&&oR(t)}function rR(t,e){yt(e,(n,i)=>{xf(t,n,i)})}function xf(t,e,n){const i=new _e("/.info/"+e),s=$e(n);t.infoData_.updateSnapshot(i,s);const a=tu(t.infoSyncTree_,i,s);Ln(t.eventQueue_,i,a)}function R0(t){return t.nextWriteId_++}function sR(t,e,n,i,s){Lf(t,"set",{path:e.toString(),value:n,priority:i});const a=Pf(t),l=$e(n,i),h=mf(t.serverSyncTree_,e),d=v0(l,h,a),p=R0(t),g=p0(t.serverSyncTree_,e,d,p,!0);kf(t.eventQueue_,g),t.server_.put(e.toString(),l.val(!0),(v,T)=>{const k=v==="ok";k||vt("set at "+e+" failed: "+v);const P=Li(t.serverSyncTree_,p,!k);Ln(t.eventQueue_,e,P),cR(t,s,v,T)});const m=b0(t,e);ru(t,m),Ln(t.eventQueue_,m,[])}function oR(t){Lf(t,"onDisconnectEvents");const e=Pf(t),n=Cl();Oh(t.onDisconnect_,ce(),(s,a)=>{const l=V1(s,a,t.serverSyncTree_,e);e0(n,s,l)});let i=[];Oh(n,ce(),(s,a)=>{i=i.concat(tu(t.serverSyncTree_,s,a));const l=b0(t,s);ru(t,l)}),t.onDisconnect_=Cl(),Ln(t.eventQueue_,ce(),i)}function aR(t,e,n){let i;ee(e._path)===".info"?i=eg(t.infoSyncTree_,e,n):i=eg(t.serverSyncTree_,e,n),P0(t.eventQueue_,e._path,i)}function lR(t,e,n){let i;ee(e._path)===".info"?i=Fh(t.infoSyncTree_,e,n):i=Fh(t.serverSyncTree_,e,n),P0(t.eventQueue_,e._path,i)}function uR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(eR)}function Lf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),tt(n,...e)}function cR(t,e,n,i){e&&$r(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let a=s;i&&(a+=": "+i);const l=new Error(a);l.code=s,e(l)}})}function N0(t,e,n){return mf(t.serverSyncTree_,e,n)||Z.EMPTY_NODE}function Rf(t,e=t.transactionQueueTree_){if(e||su(t,e),Yr(e)){const n=A0(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&hR(t,Mo(e),n)}else w0(e)&&iu(e,n=>{Rf(t,n)})}function hR(t,e,n){const i=n.map(p=>p.currentWriteId),s=N0(t,e,i);let a=s;const l=s.hash();for(let p=0;p<n.length;p++){const g=n[p];A(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=ft(e,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const h=a.val(!0),d=e;t.server_.put(d.toString(),h,p=>{Lf(t,"transaction put response",{path:d.toString(),status:p});let g=[];if(p==="ok"){const m=[];for(let v=0;v<n.length;v++)n[v].status=2,g=g.concat(Li(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&m.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();su(t,Tf(t.transactionQueueTree_,e)),Rf(t,t.transactionQueueTree_),Ln(t.eventQueue_,e,g);for(let v=0;v<m.length;v++)$r(m[v])}else{if(p==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{vt("transaction at "+d.toString()+" failed: "+p);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=p}ru(t,e)}},l)}function ru(t,e){const n=O0(t,e),i=Mo(n),s=A0(t,n);return dR(t,s,i),i}function dR(t,e,n){if(e.length===0)return;const i=[];let s=[];const l=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const d=e[h],p=ft(n,d.path);let g=!1,m;if(A(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,m=d.abortReason,s=s.concat(Li(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=tR)g=!0,m="maxretry",s=s.concat(Li(t.serverSyncTree_,d.currentWriteId,!0));else{const v=N0(t,d.path,l);d.currentInputSnapshot=v;const T=e[h].update(v.val());if(T!==void 0){If("transaction failed: Data returned ",T,d.path);let k=$e(T);typeof T=="object"&&T!=null&&Nn(T,".priority")||(k=k.updatePriority(v.getPriority()));const V=d.currentWriteId,E=Pf(t),w=v0(k,v,E);d.currentOutputSnapshotRaw=k,d.currentOutputSnapshotResolved=w,d.currentWriteId=R0(t),l.splice(l.indexOf(V),1),s=s.concat(p0(t.serverSyncTree_,d.path,w,d.currentWriteId,d.applyLocally)),s=s.concat(Li(t.serverSyncTree_,V,!0))}else g=!0,m="nodata",s=s.concat(Li(t.serverSyncTree_,d.currentWriteId,!0))}Ln(t.eventQueue_,n,s),s=[],g&&(e[h].status=2,function(v){setTimeout(v,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(m==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(m),!1,null))))}su(t,t.transactionQueueTree_);for(let h=0;h<i.length;h++)$r(i[h]);Rf(t,t.transactionQueueTree_)}function O0(t,e){let n,i=t.transactionQueueTree_;for(n=ee(e);n!==null&&Yr(i)===void 0;)i=Tf(i,n),e=ve(e),n=ee(e);return i}function A0(t,e){const n=[];return M0(t,e,n),n.sort((i,s)=>i.order-s.order),n}function M0(t,e,n){const i=Yr(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);iu(e,s=>{M0(t,s,n)})}function su(t,e){const n=Yr(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,y0(e,n.length>0?n:void 0)}iu(e,i=>{su(t,i)})}function b0(t,e){const n=Mo(O0(t,e)),i=Tf(t.transactionQueueTree_,e);return Z1(i,s=>{kc(t,s)}),kc(t,i),E0(i,s=>{kc(t,s)}),n}function kc(t,e){const n=Yr(e);if(n){const i=[];let s=[],a=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(A(a===l-1,"All SENT items should be at beginning of queue."),a=l,n[l].status=3,n[l].abortReason="set"):(A(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),s=s.concat(Li(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?y0(e,void 0):n.length=a+1,Ln(t.eventQueue_,Mo(e),s);for(let l=0;l<i.length;l++)$r(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function pR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):vt(`Invalid query segment '${n}' in query '${t}'`)}return e}const rg=function(t,e){const n=_R(t),i=n.namespace;n.domain==="firebase.com"&&xn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&xn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Lx();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bw(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new _e(n.pathString)}},_R=function(t){let e="",n="",i="",s="",a="",l=!0,h="https",d=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(h=t.substring(0,p-1),t=t.substring(p+2));let g=t.indexOf("/");g===-1&&(g=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(g,m)),g<m&&(s=fR(t.substring(g,m)));const v=pR(t.substring(Math.min(t.length,m)));p=e.indexOf(":"),p>=0?(l=h==="https"||h==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const k=e.indexOf(".");i=e.substring(0,k).toLowerCase(),n=e.substring(k+1),a=i}"ns"in v&&(a=v.ns)}return{host:e,port:d,domain:n,subdomain:i,secure:l,scheme:h,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mR=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let s;const a=new Array(8);for(s=7;s>=0;s--)a[s]=sg.charAt(n%64),n=Math.floor(n/64);A(n===0,"Cannot push at time == 0");let l=a.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=sg.charAt(e[s]);return A(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+je(this.snapshot.exportVal())}}class vR{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return ne(this._path)?null:jw(this._path)}get ref(){return new pi(this._repo,this._path)}get _queryIdentifier(){const e=Hm(this._queryParams),n=Jd(e);return n==="{}"?"default":n}get _queryObject(){return Hm(this._queryParams)}isEqual(e){if(e=kt(e),!(e instanceof Nf))return!1;const n=this._repo===e._repo,i=rf(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+dL(this._path)}}class pi extends Nf{constructor(e,n){super(e,n,new lf,!1)}get parent(){const e=Gw(this._path);return e===null?null:new pi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Rl{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new _e(e),i=mo(this.ref,e);return new Rl(this._node.getChild(n),i,Le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new Rl(s,mo(this.ref,i),Le)))}hasChild(e){const n=new _e(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function D0(t,e){return t=kt(t),t._checkNotDeleted("ref"),mo(t._root,e)}function mo(t,e){return t=kt(t),ee(t._path)===null?Y1("child","path",e):I0("child","path",e),new pi(t._repo,ze(t._path,e))}function wR(t,e){t=kt(t),k0("push",t._path),T0("push",e,t._path,!0);const n=L0(t._repo),i=mR(n),s=mo(t,i),a=mo(t,i);let l;return l=Promise.resolve(a),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function ER(t,e){t=kt(t),k0("set",t._path),T0("set",e,t._path,!1);const n=new Gl;return sR(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Of{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new gR("value",this,new Rl(e.snapshotNode,new pi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vR(this,e,n):null}matches(e){return e instanceof Of?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function CR(t,e,n,i,s){const a=new yR(n,void 0),l=new Of(a);return aR(t._repo,t,l),()=>lR(t._repo,t,l)}function SR(t,e,n,i){return CR(t,"value",e)}C1(pi);x1(pi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="FIREBASE_DATABASE_EMULATOR_HOST",Uh={};let IR=!1;function kR(t,e,n,i){t.repoInfo_=new bw(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function PR(t,e,n,i,s){let a=i||t.options.databaseURL;a===void 0&&(t.options.projectId||xn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=rg(a,s),h=l.repoInfo,d;typeof process<"u"&&Tm&&(d=Tm[TR]),d?(a=`http://${d}?ns=${h.namespace}`,l=rg(a,s),h=l.repoInfo):l.repoInfo.secure;const p=new Ux(t.name,t.options,e);Q1("Invalid Firebase Database URL",l),ne(l.path)||xn("Database URL must point to the root of a Firebase Database (not including a child path).");const g=LR(h,t,p,new Bx(t.name,n));return new RR(g,t)}function xR(t,e){const n=Uh[e];(!n||n[t.key]!==t)&&xn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),uR(t),delete n[t.key]}function LR(t,e,n,i){let s=Uh[e.name];s||(s={},Uh[e.name]=s);let a=s[t.toURLString()];return a&&xn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new nR(t,IR,n,i),s[t.toURLString()]=a,a}class RR{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pi(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(xR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&xn("Cannot call "+e+" on a deleted database.")}}function NR(t=Fy(),e){const n=jd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=XT("database");i&&OR(n,...i)}return n}function OR(t,e,n,i={}){t=kt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&xn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let a;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&xn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new za(za.OWNER);else if(i.mockUserToken){const l=typeof i.mockUserToken=="string"?i.mockUserToken:JT(i.mockUserToken,t.app.options.projectId);a=new za(l)}kR(s,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){Sx(Kr),Fr(new Fi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return PR(i,s,a,n)},"PUBLIC").setMultipleInstances(!0)),ii(Im,km,t),ii(Im,km,"esm2017")}En.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};En.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};AR();let wa,go;function MR(){if(wa)return;wa=zy({apiKey:"REPLACE",authDomain:"REPLACE",projectId:"REPLACE",databaseURL:"REPLACE"}),Ql(wa),go=NR(wa)}function bR(){return sP(Ql())}function DR(){return hP(Ql())}function zR(t,e){if(!go)return()=>{};const n=D0(go,"suggestions");return SR(n,i=>{if(!i.exists()){e([]);return}const s=i.val(),a=Object.entries(s).map(([l,h])=>({id:l,...h})).filter(l=>l.visibility!=="hidden").filter(l=>{var h;return!t.country||((h=l.country)==null?void 0:h.toLowerCase().includes(t.country.toLowerCase()))}).filter(l=>{var h;return!t.city||((h=l.city)==null?void 0:h.toLowerCase().includes(t.city.toLowerCase()))}).filter(l=>!t.timeSlot||l.timeSlot===t.timeSlot).filter(l=>!t.category||l.category===t.category);e(a)})}async function FR(t){if(!go)throw new Error("Firebase not initialized");const e=D0(go,"suggestions"),n=wR(e),i=new Date().toISOString(),s={...t,createdAt:i,updatedAt:i,createdBy:(Ql().currentUser||{}).uid||null,visibility:"public",flags:[]};return await ER(n,s),n.key}delete Ty.Icon.Default.prototype._getIconUrl;Ty.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function BR({filters:t}){const[e,n]=re.useState([]);return re.useEffect(()=>{let i=zR(t,n);return()=>{typeof i=="function"&&i()}},[t]),W.createElement(UT,{center:[39.925533,32.866287],zoom:6,style:{height:"100%"}},W.createElement(VT,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map(i=>W.createElement(WT,{key:i.id,position:[i.lat,i.lng]},W.createElement(HT,null,W.createElement("strong",null,i.title),W.createElement("br",null),i.description,W.createElement("br",null),W.createElement("em",null,i.city,", ",i.country,"  ",i.timeSlot," / ",i.category)))))}function UR({onClose:t}){const[e,n]=re.useState({title:"",description:"",country:"",city:"",timeSlot:"morning",category:"food",lat:39.925533,lng:32.866287}),[i,s]=re.useState(!1),a=async l=>{l.preventDefault(),s(!0);try{await FR(e),t()}catch(h){console.error(h),alert("An error occurred")}finally{s(!1)}};return W.createElement("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center"}},W.createElement("form",{onSubmit:a,style:{background:"#fff",padding:20,width:420}},W.createElement("h3",null,"New Suggestion"),W.createElement("input",{placeholder:"Title",value:e.title,onChange:l=>n({...e,title:l.target.value}),required:!0}),W.createElement("textarea",{placeholder:"Description",value:e.description,onChange:l=>n({...e,description:l.target.value}),required:!0}),W.createElement("input",{placeholder:"Country",value:e.country,onChange:l=>n({...e,country:l.target.value})}),W.createElement("input",{placeholder:"City",value:e.city,onChange:l=>n({...e,city:l.target.value})}),W.createElement("label",null,"Time",W.createElement("select",{value:e.timeSlot,onChange:l=>n({...e,timeSlot:l.target.value})},W.createElement("option",{value:"morning"},"Morning"),W.createElement("option",{value:"noon"},"Noon"),W.createElement("option",{value:"evening"},"Evening"))),W.createElement("label",null,"Category",W.createElement("select",{value:e.category,onChange:l=>n({...e,category:l.target.value})},W.createElement("option",{value:"food"},"Food"),W.createElement("option",{value:"event"},"Event"))),W.createElement("div",{style:{display:"flex",gap:8,marginTop:8}},W.createElement("button",{type:"submit",disabled:i},"Save"),W.createElement("button",{type:"button",onClick:t},"Cancel"))))}MR();function WR(){const[t,e]=re.useState(!1),[n,i]=re.useState({country:"",city:"",timeSlot:"",category:""});return re.useEffect(()=>{bR().catch(()=>{})},[]),W.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column"}},W.createElement("header",{style:{padding:12,display:"flex",gap:12,alignItems:"center",borderBottom:"1px solid #eee"}},W.createElement("h3",{style:{margin:0}},"WebGIS  Visitor Suggestion Platform"),W.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:8}},W.createElement("button",{onClick:()=>e(!0)},"Add New Suggestion"),W.createElement("button",{onClick:()=>DR()},"Sign Out"))),W.createElement("div",{style:{display:"flex",flex:1}},W.createElement("aside",{style:{width:280,padding:12,borderRight:"1px solid #eee",boxSizing:"border-box"}},W.createElement("h4",null,"Filters"),W.createElement("label",null,"Country",W.createElement("input",{value:n.country,onChange:s=>i({...n,country:s.target.value})})),W.createElement("label",null,"City",W.createElement("input",{value:n.city,onChange:s=>i({...n,city:s.target.value})})),W.createElement("label",null,"Time",W.createElement("select",{value:n.timeSlot,onChange:s=>i({...n,timeSlot:s.target.value})},W.createElement("option",{value:""},"All"),W.createElement("option",{value:"morning"},"Morning"),W.createElement("option",{value:"noon"},"Noon"),W.createElement("option",{value:"evening"},"Evening"))),W.createElement("label",null,"Category",W.createElement("select",{value:n.category,onChange:s=>i({...n,category:s.target.value})},W.createElement("option",{value:""},"All"),W.createElement("option",{value:"food"},"Food"),W.createElement("option",{value:"event"},"Event")))),W.createElement("main",{style:{flex:1}},W.createElement(BR,{filters:n}))),t&&W.createElement(UR,{onClose:()=>e(!1)}))}vy(document.getElementById("root")).render(W.createElement(WR,null));
